<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!-- 
      The Protocol
 parameters will be replaced with the 
      document title extracted from the <h1> element or
      file name, if there is no <h1> heading
    -->
    <title>Protocol
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="http://code.jquery.com/jquery-1.11.2.js"></script>
    <script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
    <script src="http://getbootstrap.com/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="content/style.css" />
    <script src="content/tips.js" type="text/javascript"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">Bitcoin F#</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="Protocol.html">Protocol</a></li>
            <li><a href="DB.html">Persistence</a></li>
            <li><a href="P2P.html">Peer to Peer</a></li>
            <li><a href="Peer.html">Peer</a></li>
            <li><a href="Tracker.html">Tracker</a></li>
            <li><a href="Script.html">Script Interpreter</a></li>
            <li><a href="Mempool.html">Mempool</a></li>
            <li><a href="Checks.html">Validation</a></li>
            <li><a href="Blockchain.html">Blockchain</a></li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Misc <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                    <li><a href="Main.html">Main</a></li>
                    <li><a href="Test.html">Tests</a></li>
                    <li><a href="Building.html">Building and Running</a></li>
                    <li><a href="BIP37.html">SPV</a></li>
                </ul>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    <div class="container">
      <div class="row" style="margin-top:70px">
        <div class="span1"></div>
        <div class="span10" id="main">
          <h1>Protocol</h1>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">module</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="i">Protocol</span></pre>
</td>
</tr>
</table>

<p>The module begins the usual set of imports. I use the RX Framework to handle events
and data flow. There are a few other libraries:</p>

<ul>
<li>FSharpx: A set of extensions to F#. It adds a few useful monads</li>
<li>NodaTime: Mostly because I used JodaTime in Java and find it very well designed</li>
<li>Log4Net</li>
<li>BouncyCastle: Originally, I used it to calculate hashes and verify signatures. But
the .NET framework already includes a crypto digest library and ECDSA in BC is extremely
slow compared to SECP256K1. So now the usage of BC is limited to HEX to String conversions</li>
</ul>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="i">System</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 3)" onmouseover="showTip(event, 'fs2', 3)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 4)" onmouseover="showTip(event, 'fs3', 4)" class="i">Net</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 5)" onmouseover="showTip(event, 'fs2', 5)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs4', 6)" onmouseover="showTip(event, 'fs4', 6)" class="i">Collections</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 7)" onmouseover="showTip(event, 'fs2', 7)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs4', 8)" onmouseover="showTip(event, 'fs4', 8)" class="i">Collections</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs5', 9)" onmouseover="showTip(event, 'fs5', 9)" class="i">Generic</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 10)" onmouseover="showTip(event, 'fs2', 10)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs6', 11)" onmouseover="showTip(event, 'fs6', 11)" class="i">IO</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 12)" onmouseover="showTip(event, 'fs2', 12)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 13)" onmouseover="showTip(event, 'fs7', 13)" class="i">Text</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 14)" onmouseover="showTip(event, 'fs2', 14)" class="i">System</span><span class="o">.</span><span class="i">Reactive</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs8', 15)" onmouseover="showTip(event, 'fs8', 15)" class="i">Linq</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 16)" onmouseover="showTip(event, 'fs2', 16)" class="i">System</span><span class="o">.</span><span class="i">Reactive</span><span class="o">.</span><span class="i">Subjects</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 17)" onmouseover="showTip(event, 'fs2', 17)" class="i">System</span><span class="o">.</span><span class="i">Reactive</span><span class="o">.</span><span class="i">Disposables</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 18)" onmouseover="showTip(event, 'fs2', 18)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 19)" onmouseover="showTip(event, 'fs9', 19)" class="i">Threading</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs10', 20)" onmouseover="showTip(event, 'fs10', 20)" class="i">Tasks</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 21)" onmouseover="showTip(event, 'fs2', 21)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs11', 22)" onmouseover="showTip(event, 'fs11', 22)" class="i">Security</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 23)" onmouseover="showTip(event, 'fs12', 23)" class="i">Cryptography</span>
<span class="k">open</span> <span class="i">FSharpx</span>
<span class="k">open</span> <span class="i">FSharpx</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs13', 24)" onmouseover="showTip(event, 'fs13', 24)" class="i">Collections</span>
<span class="k">open</span> <span class="i">FSharpx</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs14', 25)" onmouseover="showTip(event, 'fs14', 25)" class="i">Choice</span>
<span class="k">open</span> <span class="i">FSharpx</span><span class="o">.</span><span class="i">Validation</span>
<span class="k">open</span> <span class="i">FSharpx</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs15', 26)" onmouseover="showTip(event, 'fs15', 26)" class="i">Option</span>
<span class="k">open</span> <span class="i">NodaTime</span>
<span class="k">open</span> <span class="i">log4net</span>
<span class="k">open</span> <span class="i">Org</span><span class="o">.</span><span class="i">BouncyCastle</span><span class="o">.</span><span class="i">Crypto</span><span class="o">.</span><span class="i">Digests</span>
<span class="k">open</span> <span class="i">Org</span><span class="o">.</span><span class="i">BouncyCastle</span><span class="o">.</span><span class="i">Utilities</span><span class="o">.</span><span class="i">Encoders</span></pre>
</td>
</tr>
</table>

<p>These are constants defined in the configuration file. They are imported through a type provider
and end up being checked at compile time. It's a small but nice feature.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs16', 27)" onmouseover="showTip(event, 'fs16', 27)" class="i">settings</span> <span class="o">=</span> <span class="i">AppSettings</span><span class="o">&lt;</span><span class="s">&quot;</span><span class="s">app</span><span class="s">.</span><span class="s">config</span><span class="s">&quot;</span><span class="o">&gt;</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs17', 28)" onmouseover="showTip(event, 'fs17', 28)" class="i">baseDir</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs16', 29)" onmouseover="showTip(event, 'fs16', 29)" class="i">settings</span><span class="o">.</span><span class="i">BaseDir</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs18', 30)" onmouseover="showTip(event, 'fs18', 30)" class="i">version</span> <span class="o">=</span> <span class="n">70001</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs19', 31)" onmouseover="showTip(event, 'fs19', 31)" class="i">connectTimeout</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs20', 32)" onmouseover="showTip(event, 'fs20', 32)" class="i">TimeSpan</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs21', 33)" onmouseover="showTip(event, 'fs21', 33)" class="i">FromSeconds</span>(<span onmouseout="hideTip(event, 'fs22', 34)" onmouseover="showTip(event, 'fs22', 34)" class="i">float</span> <span onmouseout="hideTip(event, 'fs16', 35)" onmouseover="showTip(event, 'fs16', 35)" class="i">settings</span><span class="o">.</span><span class="i">ConnectTimeout</span>)
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs23', 36)" onmouseover="showTip(event, 'fs23', 36)" class="i">handshakeTimeout</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs20', 37)" onmouseover="showTip(event, 'fs20', 37)" class="i">TimeSpan</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs21', 38)" onmouseover="showTip(event, 'fs21', 38)" class="i">FromSeconds</span>(<span onmouseout="hideTip(event, 'fs22', 39)" onmouseover="showTip(event, 'fs22', 39)" class="i">float</span> <span onmouseout="hideTip(event, 'fs16', 40)" onmouseover="showTip(event, 'fs16', 40)" class="i">settings</span><span class="o">.</span><span class="i">HandshakeTimeout</span>)
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs24', 41)" onmouseover="showTip(event, 'fs24', 41)" class="i">commandTimeout</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs20', 42)" onmouseover="showTip(event, 'fs20', 42)" class="i">TimeSpan</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs21', 43)" onmouseover="showTip(event, 'fs21', 43)" class="i">FromSeconds</span>(<span onmouseout="hideTip(event, 'fs22', 44)" onmouseover="showTip(event, 'fs22', 44)" class="i">float</span> <span onmouseout="hideTip(event, 'fs16', 45)" onmouseover="showTip(event, 'fs16', 45)" class="i">settings</span><span class="o">.</span><span class="i">CommandTimeout</span>)
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs25', 46)" onmouseover="showTip(event, 'fs25', 46)" class="i">minGetdataBatchSize</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs16', 47)" onmouseover="showTip(event, 'fs16', 47)" class="i">settings</span><span class="o">.</span><span class="i">MinGetdataBatchSize</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 48)" onmouseover="showTip(event, 'fs26', 48)" class="i">maxGetdataBatchSize</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs16', 49)" onmouseover="showTip(event, 'fs16', 49)" class="i">settings</span><span class="o">.</span><span class="i">MaxGetdataBatchSize</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs27', 50)" onmouseover="showTip(event, 'fs27', 50)" class="i">coinbaseMaturity</span> <span class="o">=</span> <span class="n">100</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs28', 51)" onmouseover="showTip(event, 'fs28', 51)" class="i">maxBlockSize</span> <span class="o">=</span> <span class="n">1000000</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs29', 52)" onmouseover="showTip(event, 'fs29', 52)" class="i">maxMoney</span> <span class="o">=</span> <span class="n">2100000000000000L</span></pre>
</td>
</tr>
</table>

<p>I define some helper functions and some constants here.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> (<span class="o">|?|</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs30', 53)" onmouseover="showTip(event, 'fs30', 53)" class="i">defaultArg</span> <span class="c">// infix version</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs31', 54)" onmouseover="showTip(event, 'fs31', 54)" class="i">txInvType</span> <span class="o">=</span> <span class="n">1</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs32', 55)" onmouseover="showTip(event, 'fs32', 55)" class="i">blockInvType</span> <span class="o">=</span> <span class="n">2</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs33', 56)" onmouseover="showTip(event, 'fs33', 56)" class="i">filteredBlockInvType</span> <span class="o">=</span> <span class="n">3</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs34', 57)" onmouseover="showTip(event, 'fs34', 57)" class="i">zeroHash</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 58)" onmouseover="showTip(event, 'fs35', 58)" class="i">byte</span>[] <span class="o">=</span> <span onmouseout="hideTip(event, 'fs36', 59)" onmouseover="showTip(event, 'fs36', 59)" class="i">Array</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs37', 60)" onmouseover="showTip(event, 'fs37', 60)" class="i">zeroCreate</span> <span class="n">32</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs38', 61)" onmouseover="showTip(event, 'fs38', 61)" class="i">random</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs39', 62)" onmouseover="showTip(event, 'fs39', 62)" class="i">Random</span>() <span class="c">// used to produce nonces in ping/pong</span>
<span class="k">exception</span> <span onmouseout="hideTip(event, 'fs40', 63)" onmouseover="showTip(event, 'fs40', 63)" class="i">ValidationException</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs41', 64)" onmouseover="showTip(event, 'fs41', 64)" class="i">string</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs42', 65)" onmouseover="showTip(event, 'fs42', 65)" class="i">either</span> <span class="o">=</span> <span class="k">new</span> <span class="i">EitherBuilder</span>()
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs43', 66)" onmouseover="showTip(event, 'fs43', 66)" class="i">maybe</span> <span class="o">=</span> <span class="k">new</span> <span class="i">MaybeBuilder</span>()

<span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs44', 67)" onmouseover="showTip(event, 'fs44', 67)" class="i">iterate</span> <span onmouseout="hideTip(event, 'fs45', 68)" onmouseover="showTip(event, 'fs45', 68)" class="i">f</span> <span onmouseout="hideTip(event, 'fs46', 69)" onmouseover="showTip(event, 'fs46', 69)" class="i">value</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs47', 70)" onmouseover="showTip(event, 'fs47', 70)" class="i">seq</span> { <span class="c">// Same as iterate in clojure</span>
    <span class="k">yield</span> <span onmouseout="hideTip(event, 'fs46', 71)" onmouseover="showTip(event, 'fs46', 71)" class="i">value</span>
    <span class="k">yield!</span> <span onmouseout="hideTip(event, 'fs44', 72)" onmouseover="showTip(event, 'fs44', 72)" class="i">iterate</span> <span onmouseout="hideTip(event, 'fs45', 73)" onmouseover="showTip(event, 'fs45', 73)" class="i">f</span> (<span onmouseout="hideTip(event, 'fs45', 74)" onmouseover="showTip(event, 'fs45', 74)" class="i">f</span> <span onmouseout="hideTip(event, 'fs46', 75)" onmouseover="showTip(event, 'fs46', 75)" class="i">value</span>) }</pre>
</td>
</tr>
</table>

<p>Find the first byte that matches a given condition starting from the end of the array</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs48', 76)" onmouseover="showTip(event, 'fs48', 76)" class="i">revFind</span> (<span onmouseout="hideTip(event, 'fs49', 77)" onmouseover="showTip(event, 'fs49', 77)" class="i">arr</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 78)" onmouseover="showTip(event, 'fs35', 78)" class="i">byte</span>[]) (<span onmouseout="hideTip(event, 'fs50', 79)" onmouseover="showTip(event, 'fs50', 79)" class="i">f</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 80)" onmouseover="showTip(event, 'fs35', 80)" class="i">byte</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs51', 81)" onmouseover="showTip(event, 'fs51', 81)" class="i">bool</span>) <span class="o">=</span>
    <span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs52', 82)" onmouseover="showTip(event, 'fs52', 82)" class="i">rf</span> (<span onmouseout="hideTip(event, 'fs53', 83)" onmouseover="showTip(event, 'fs53', 83)" class="i">i</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs54', 84)" onmouseover="showTip(event, 'fs54', 84)" class="i">int</span>) <span class="o">=</span>
        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs53', 85)" onmouseover="showTip(event, 'fs53', 85)" class="i">i</span> <span class="o">&lt;</span> <span class="n">0</span> <span class="o">||</span> <span onmouseout="hideTip(event, 'fs50', 86)" onmouseover="showTip(event, 'fs50', 86)" class="i">f</span>(<span onmouseout="hideTip(event, 'fs49', 87)" onmouseover="showTip(event, 'fs49', 87)" class="i">arr</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs53', 88)" onmouseover="showTip(event, 'fs53', 88)" class="i">i</span>]) <span class="k">then</span> 
            <span onmouseout="hideTip(event, 'fs53', 89)" onmouseover="showTip(event, 'fs53', 89)" class="i">i</span>
        <span class="k">else</span>
            <span onmouseout="hideTip(event, 'fs52', 90)" onmouseover="showTip(event, 'fs52', 90)" class="i">rf</span> (<span onmouseout="hideTip(event, 'fs53', 91)" onmouseover="showTip(event, 'fs53', 91)" class="i">i</span><span class="o">-</span><span class="n">1</span>)
    <span onmouseout="hideTip(event, 'fs52', 92)" onmouseover="showTip(event, 'fs52', 92)" class="i">rf</span> (<span onmouseout="hideTip(event, 'fs49', 93)" onmouseover="showTip(event, 'fs49', 93)" class="i">arr</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs55', 94)" onmouseover="showTip(event, 'fs55', 94)" class="i">Length</span><span class="o">-</span><span class="n">1</span>)</pre>
</td>
</tr>
</table>

<p>Extends the log4net logger with F# printf style. The later checks the format
string against the type of the effective parameters</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs56', 95)" onmouseover="showTip(event, 'fs56', 95)" class="i">logger</span> <span class="o">=</span> <span class="i">LogManager</span><span class="o">.</span><span class="i">GetLogger</span>(<span class="s">&quot;</span><span class="s">bitcoinfs</span><span class="s">&quot;</span>)
<span class="k">type</span> <span class="i">ILog</span> <span class="k">with</span>
    <span class="k">member</span> <span class="i">x</span><span class="o">.</span><span class="i">DebugF</span> <span class="i">format</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs57', 96)" onmouseover="showTip(event, 'fs57', 96)" class="i">Printf</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs58', 97)" onmouseover="showTip(event, 'fs58', 97)" class="i">ksprintf</span> (<span class="i">x</span><span class="o">.</span><span class="i">Debug</span>) <span class="i">format</span>
    <span class="k">member</span> <span class="i">x</span><span class="o">.</span><span class="i">InfoF</span> <span class="i">format</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs57', 98)" onmouseover="showTip(event, 'fs57', 98)" class="i">Printf</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs58', 99)" onmouseover="showTip(event, 'fs58', 99)" class="i">ksprintf</span> (<span class="i">x</span><span class="o">.</span><span class="i">Info</span>) <span class="i">format</span>
    <span class="k">member</span> <span class="i">x</span><span class="o">.</span><span class="i">ErrorF</span> <span class="i">format</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs57', 100)" onmouseover="showTip(event, 'fs57', 100)" class="i">Printf</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs58', 101)" onmouseover="showTip(event, 'fs58', 101)" class="i">ksprintf</span> (<span class="i">x</span><span class="o">.</span><span class="i">Error</span>) <span class="i">format</span>
    <span class="k">member</span> <span class="i">x</span><span class="o">.</span><span class="i">FatalF</span> <span class="i">format</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs57', 102)" onmouseover="showTip(event, 'fs57', 102)" class="i">Printf</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs58', 103)" onmouseover="showTip(event, 'fs58', 103)" class="i">ksprintf</span> (<span class="i">x</span><span class="o">.</span><span class="i">Fatal</span>) <span class="i">format</span></pre>
</td>
</tr>
</table>

<p>F# has structural comparison of arrays and you can directly compare them with =.
However, this is not the case for .NET containers and there are a few places where
they are more convenient than their F# counterparts. In these few cases, I need
a comparer that does deep compare, fortunately the BCL offers StructuralComparisons.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs59', 104)" onmouseover="showTip(event, 'fs59', 104)" class="i">HashCompare</span>() <span class="o">=</span> 
    <span class="k">interface</span> <span onmouseout="hideTip(event, 'fs60', 105)" onmouseover="showTip(event, 'fs60', 105)" class="i">IEqualityComparer</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs35', 106)" onmouseover="showTip(event, 'fs35', 106)" class="i">byte</span>[]<span class="o">&gt;</span> <span class="k">with</span>
        <span class="k">member</span> <span onmouseout="hideTip(event, 'fs61', 107)" onmouseover="showTip(event, 'fs61', 107)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs62', 108)" onmouseover="showTip(event, 'fs62', 108)" class="i">Equals</span>(<span onmouseout="hideTip(event, 'fs63', 109)" onmouseover="showTip(event, 'fs63', 109)" class="i">left</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 110)" onmouseover="showTip(event, 'fs35', 110)" class="i">byte</span>[], <span onmouseout="hideTip(event, 'fs64', 111)" onmouseover="showTip(event, 'fs64', 111)" class="i">right</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 112)" onmouseover="showTip(event, 'fs35', 112)" class="i">byte</span>[]) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs65', 113)" onmouseover="showTip(event, 'fs65', 113)" class="i">StructuralComparisons</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs66', 114)" onmouseover="showTip(event, 'fs66', 114)" class="i">StructuralEqualityComparer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs67', 115)" onmouseover="showTip(event, 'fs67', 115)" class="i">Equals</span>(<span onmouseout="hideTip(event, 'fs63', 116)" onmouseover="showTip(event, 'fs63', 116)" class="i">left</span>, <span onmouseout="hideTip(event, 'fs64', 117)" onmouseover="showTip(event, 'fs64', 117)" class="i">right</span>)
        <span class="k">member</span> <span onmouseout="hideTip(event, 'fs61', 118)" onmouseover="showTip(event, 'fs61', 118)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs68', 119)" onmouseover="showTip(event, 'fs68', 119)" class="i">GetHashCode</span>(<span onmouseout="hideTip(event, 'fs69', 120)" onmouseover="showTip(event, 'fs69', 120)" class="i">hash</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 121)" onmouseover="showTip(event, 'fs35', 121)" class="i">byte</span>[]) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs65', 122)" onmouseover="showTip(event, 'fs65', 122)" class="i">StructuralComparisons</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs66', 123)" onmouseover="showTip(event, 'fs66', 123)" class="i">StructuralEqualityComparer</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs70', 124)" onmouseover="showTip(event, 'fs70', 124)" class="i">GetHashCode</span> <span onmouseout="hideTip(event, 'fs69', 125)" onmouseover="showTip(event, 'fs69', 125)" class="i">hash</span></pre>
</td>
</tr>
</table>

<h2>Extensions methods</h2>

<p>When a task finishes, delivers a single element and then closes the observable</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs71', 126)" onmouseover="showTip(event, 'fs71', 126)" class="i">Async</span> <span class="o">=</span>
    <span class="k">static</span> <span class="k">member</span> <span onmouseout="hideTip(event, 'fs72', 127)" onmouseover="showTip(event, 'fs72', 127)" class="i">AsObservable</span>(<span onmouseout="hideTip(event, 'fs73', 128)" onmouseover="showTip(event, 'fs73', 128)" class="i">op</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs71', 129)" onmouseover="showTip(event, 'fs71', 129)" class="i">Async</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">a</span><span class="o">&gt;</span>) <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs74', 130)" onmouseover="showTip(event, 'fs74', 130)" class="i">Observable</span><span class="o">.</span><span class="i">Create</span>(<span class="k">fun</span> (<span class="i">obs</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs75', 131)" onmouseover="showTip(event, 'fs75', 131)" class="i">IObserver</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">a</span><span class="o">&gt;</span>) <span class="k">-&gt;</span>
            <span onmouseout="hideTip(event, 'fs71', 132)" onmouseover="showTip(event, 'fs71', 132)" class="i">Async</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs76', 133)" onmouseover="showTip(event, 'fs76', 133)" class="i">StartWithContinuations</span>(<span onmouseout="hideTip(event, 'fs73', 134)" onmouseover="showTip(event, 'fs73', 134)" class="i">op</span>, (<span class="k">fun</span> <span class="i">r</span> <span class="k">-&gt;</span> <span class="i">obs</span><span class="o">.</span><span class="i">OnNext</span> <span class="i">r</span>; <span class="i">obs</span><span class="o">.</span><span class="i">OnCompleted</span>()), <span class="i">obs</span><span class="o">.</span><span class="i">OnError</span>, <span class="i">obs</span><span class="o">.</span><span class="i">OnError</span>)
            <span class="i">Disposable</span><span class="o">.</span><span class="i">Create</span>(<span class="k">fun</span> () <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs77', 135)" onmouseover="showTip(event, 'fs77', 135)" class="i">ignore</span>())
        )</pre>
</td>
</tr>
</table>

<p>Most of the error handling in done in functional style with the Option monad. Checks are 
expressed like an assert that logs a message and evaluates to None. <code>errorIfFalse</code> lets me
write statements like <code>condition |&gt; errorIfFalse "error"</code> in a do-block.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs78', 136)" onmouseover="showTip(event, 'fs78', 136)" class="i">Option</span> <span class="o">=</span>
    <span class="k">static</span> <span class="k">member</span> <span onmouseout="hideTip(event, 'fs79', 137)" onmouseover="showTip(event, 'fs79', 137)" class="i">iterSecond</span>(<span onmouseout="hideTip(event, 'fs80', 138)" onmouseover="showTip(event, 'fs80', 138)" class="i">f</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs81', 139)" onmouseover="showTip(event, 'fs81', 139)" class="i">unit</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs81', 140)" onmouseover="showTip(event, 'fs81', 140)" class="i">unit</span>) (<span onmouseout="hideTip(event, 'fs82', 141)" onmouseover="showTip(event, 'fs82', 141)" class="i">opt</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs78', 142)" onmouseover="showTip(event, 'fs78', 142)" class="i">Option</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">a</span><span class="o">&gt;</span>) <span class="o">=</span> 
        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs82', 143)" onmouseover="showTip(event, 'fs82', 143)" class="i">opt</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs83', 144)" onmouseover="showTip(event, 'fs83', 144)" class="i">IsNone</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs80', 145)" onmouseover="showTip(event, 'fs80', 145)" class="i">f</span>()
        <span onmouseout="hideTip(event, 'fs82', 146)" onmouseover="showTip(event, 'fs82', 146)" class="i">opt</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs84', 147)" onmouseover="showTip(event, 'fs84', 147)" class="i">errorIfFalse</span> (<span onmouseout="hideTip(event, 'fs85', 148)" onmouseover="showTip(event, 'fs85', 148)" class="i">errorMsg</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs41', 149)" onmouseover="showTip(event, 'fs41', 149)" class="i">string</span>) (<span onmouseout="hideTip(event, 'fs86', 150)" onmouseover="showTip(event, 'fs86', 150)" class="i">b</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs51', 151)" onmouseover="showTip(event, 'fs51', 151)" class="i">bool</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs86', 152)" onmouseover="showTip(event, 'fs86', 152)" class="i">b</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs78', 153)" onmouseover="showTip(event, 'fs78', 153)" class="i">Option</span><span class="o">.</span><span class="i">ofBool</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs78', 154)" onmouseover="showTip(event, 'fs78', 154)" class="i">Option</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs87', 155)" onmouseover="showTip(event, 'fs87', 155)" class="i">iterSecond</span>(<span class="k">fun</span>() <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs56', 156)" onmouseover="showTip(event, 'fs56', 156)" class="i">logger</span><span class="o">.</span><span class="i">Debug</span> <span onmouseout="hideTip(event, 'fs85', 157)" onmouseover="showTip(event, 'fs85', 157)" class="i">errorMsg</span>)</pre>
</td>
</tr>
</table>

<h2>Utility functions</h2>

<p>Hashing functions. It's important to pass the digest by name i.e. in a factory function
otherwise the digest is bound at the let and there will be a single digest per hashing function.
As a result, hashing is no threat safe and hilarity ensues</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs88', 158)" onmouseover="showTip(event, 'fs88', 158)" class="i">hashBlock</span> (<span onmouseout="hideTip(event, 'fs89', 159)" onmouseover="showTip(event, 'fs89', 159)" class="i">digest</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs81', 160)" onmouseover="showTip(event, 'fs81', 160)" class="i">unit</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs90', 161)" onmouseover="showTip(event, 'fs90', 161)" class="i">HashAlgorithm</span>) (<span onmouseout="hideTip(event, 'fs91', 162)" onmouseover="showTip(event, 'fs91', 162)" class="i">input</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 163)" onmouseover="showTip(event, 'fs35', 163)" class="i">byte</span>[])<span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 164)" onmouseover="showTip(event, 'fs35', 164)" class="i">byte</span>[] <span class="o">=</span> <span onmouseout="hideTip(event, 'fs89', 165)" onmouseover="showTip(event, 'fs89', 165)" class="i">digest</span>()<span class="o">.</span><span class="i">ComputeHash</span>(<span onmouseout="hideTip(event, 'fs91', 166)" onmouseover="showTip(event, 'fs91', 166)" class="i">input</span>)

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs92', 167)" onmouseover="showTip(event, 'fs92', 167)" class="i">ripe160</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 168)" onmouseover="showTip(event, 'fs88', 168)" class="i">hashBlock</span> (<span class="k">fun</span> () <span class="k">-&gt;</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs93', 169)" onmouseover="showTip(event, 'fs93', 169)" class="i">RIPEMD160Managed</span>() <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs90', 170)" onmouseover="showTip(event, 'fs90', 170)" class="i">HashAlgorithm</span>)
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs94', 171)" onmouseover="showTip(event, 'fs94', 171)" class="i">sha1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 172)" onmouseover="showTip(event, 'fs88', 172)" class="i">hashBlock</span> (<span class="k">fun</span> () <span class="k">-&gt;</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs95', 173)" onmouseover="showTip(event, 'fs95', 173)" class="i">SHA1Managed</span>() <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs90', 174)" onmouseover="showTip(event, 'fs90', 174)" class="i">HashAlgorithm</span>)
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs96', 175)" onmouseover="showTip(event, 'fs96', 175)" class="i">sha256</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs88', 176)" onmouseover="showTip(event, 'fs88', 176)" class="i">hashBlock</span> (<span class="k">fun</span> () <span class="k">-&gt;</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs97', 177)" onmouseover="showTip(event, 'fs97', 177)" class="i">SHA256Managed</span>() <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs90', 178)" onmouseover="showTip(event, 'fs90', 178)" class="i">HashAlgorithm</span>)
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs98', 179)" onmouseover="showTip(event, 'fs98', 179)" class="i">hash160</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs96', 180)" onmouseover="showTip(event, 'fs96', 180)" class="i">sha256</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs92', 181)" onmouseover="showTip(event, 'fs92', 181)" class="i">ripe160</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs99', 182)" onmouseover="showTip(event, 'fs99', 182)" class="i">dsha</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs96', 183)" onmouseover="showTip(event, 'fs96', 183)" class="i">sha256</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs96', 184)" onmouseover="showTip(event, 'fs96', 184)" class="i">sha256</span></pre>
</td>
</tr>
</table>

<p>Conversion from hash to hex string for debugging and display purposes. Bitcoin reverses
hashes when they are displayed or when they are compared to big integers but not when they
are calculated.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs100', 185)" onmouseover="showTip(event, 'fs100', 185)" class="i">hashFromHex</span>(<span onmouseout="hideTip(event, 'fs101', 186)" onmouseover="showTip(event, 'fs101', 186)" class="i">s</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs102', 187)" onmouseover="showTip(event, 'fs102', 187)" class="i">String</span>) <span class="o">=</span> 
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs103', 188)" onmouseover="showTip(event, 'fs103', 188)" class="i">h</span> <span class="o">=</span> <span class="i">Hex</span><span class="o">.</span><span class="i">Decode</span>(<span onmouseout="hideTip(event, 'fs101', 189)" onmouseover="showTip(event, 'fs101', 189)" class="i">s</span>)
    <span onmouseout="hideTip(event, 'fs36', 190)" onmouseover="showTip(event, 'fs36', 190)" class="i">Array</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs104', 191)" onmouseover="showTip(event, 'fs104', 191)" class="i">Reverse</span> <span onmouseout="hideTip(event, 'fs103', 192)" onmouseover="showTip(event, 'fs103', 192)" class="i">h</span>
    <span onmouseout="hideTip(event, 'fs103', 193)" onmouseover="showTip(event, 'fs103', 193)" class="i">h</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs105', 194)" onmouseover="showTip(event, 'fs105', 194)" class="i">hashToHex</span>(<span onmouseout="hideTip(event, 'fs106', 195)" onmouseover="showTip(event, 'fs106', 195)" class="i">h</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 196)" onmouseover="showTip(event, 'fs35', 196)" class="i">byte</span>[]) <span class="o">=</span> 
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs107', 197)" onmouseover="showTip(event, 'fs107', 197)" class="i">rh</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs106', 198)" onmouseover="showTip(event, 'fs106', 198)" class="i">h</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs36', 199)" onmouseover="showTip(event, 'fs36', 199)" class="i">Array</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs108', 200)" onmouseover="showTip(event, 'fs108', 200)" class="i">copy</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs36', 201)" onmouseover="showTip(event, 'fs36', 201)" class="i">Array</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs109', 202)" onmouseover="showTip(event, 'fs109', 202)" class="i">rev</span>
    <span class="i">Hex</span><span class="o">.</span><span class="i">ToHexString</span> <span onmouseout="hideTip(event, 'fs107', 203)" onmouseover="showTip(event, 'fs107', 203)" class="i">rh</span></pre>
</td>
</tr>
</table>

<p>Helper functions that instanciate a binary reader/writer and feed that to
the parser/serializer.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs110', 204)" onmouseover="showTip(event, 'fs110', 204)" class="i">ToBinaryArray</span>(<span onmouseout="hideTip(event, 'fs111', 205)" onmouseover="showTip(event, 'fs111', 205)" class="i">f</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs112', 206)" onmouseover="showTip(event, 'fs112', 206)" class="i">BinaryWriter</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs81', 207)" onmouseover="showTip(event, 'fs81', 207)" class="i">unit</span>) <span class="o">=</span> 
    <span class="k">use</span> <span onmouseout="hideTip(event, 'fs113', 208)" onmouseover="showTip(event, 'fs113', 208)" class="i">ms</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs114', 209)" onmouseover="showTip(event, 'fs114', 209)" class="i">MemoryStream</span>()
    <span class="k">use</span> <span onmouseout="hideTip(event, 'fs115', 210)" onmouseover="showTip(event, 'fs115', 210)" class="i">os</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs112', 211)" onmouseover="showTip(event, 'fs112', 211)" class="i">BinaryWriter</span>(<span onmouseout="hideTip(event, 'fs113', 212)" onmouseover="showTip(event, 'fs113', 212)" class="i">ms</span>)
    <span onmouseout="hideTip(event, 'fs111', 213)" onmouseover="showTip(event, 'fs111', 213)" class="i">f</span>(<span onmouseout="hideTip(event, 'fs115', 214)" onmouseover="showTip(event, 'fs115', 214)" class="i">os</span>)
    <span onmouseout="hideTip(event, 'fs113', 215)" onmouseover="showTip(event, 'fs113', 215)" class="i">ms</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs116', 216)" onmouseover="showTip(event, 'fs116', 216)" class="i">ToArray</span>()

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs117', 217)" onmouseover="showTip(event, 'fs117', 217)" class="i">ParseByteArray</span>(<span onmouseout="hideTip(event, 'fs118', 218)" onmouseover="showTip(event, 'fs118', 218)" class="i">b</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 219)" onmouseover="showTip(event, 'fs35', 219)" class="i">byte</span>[])(<span onmouseout="hideTip(event, 'fs119', 220)" onmouseover="showTip(event, 'fs119', 220)" class="i">f</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs120', 221)" onmouseover="showTip(event, 'fs120', 221)" class="i">BinaryReader</span> <span class="k">-&gt;</span> <span class="o">&#39;</span><span class="i">a</span>) <span class="o">=</span> 
    <span class="k">use</span> <span onmouseout="hideTip(event, 'fs113', 222)" onmouseover="showTip(event, 'fs113', 222)" class="i">ms</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs114', 223)" onmouseover="showTip(event, 'fs114', 223)" class="i">MemoryStream</span>(<span onmouseout="hideTip(event, 'fs118', 224)" onmouseover="showTip(event, 'fs118', 224)" class="i">b</span>)
    <span class="k">use</span> <span onmouseout="hideTip(event, 'fs121', 225)" onmouseover="showTip(event, 'fs121', 225)" class="i">reader</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs120', 226)" onmouseover="showTip(event, 'fs120', 226)" class="i">BinaryReader</span>(<span onmouseout="hideTip(event, 'fs113', 227)" onmouseover="showTip(event, 'fs113', 227)" class="i">ms</span>, <span onmouseout="hideTip(event, 'fs122', 228)" onmouseover="showTip(event, 'fs122', 228)" class="i">Encoding</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs123', 229)" onmouseover="showTip(event, 'fs123', 229)" class="i">ASCII</span>)
    <span onmouseout="hideTip(event, 'fs119', 230)" onmouseover="showTip(event, 'fs119', 230)" class="i">f</span>(<span onmouseout="hideTip(event, 'fs121', 231)" onmouseover="showTip(event, 'fs121', 231)" class="i">reader</span>)</pre>
</td>
</tr>
</table>

<p>Extend the BinaryReader with support for variable ints, strings and byte strings
varints should actually be longs because the protocol supports up to 8 byte ints.
However, there isn't a place where varints could possibly exceed 4-bytes. I need to
support longs but I can safely cast down to ints.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs120', 232)" onmouseover="showTip(event, 'fs120', 232)" class="i">BinaryReader</span> <span class="k">with</span> 
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs124', 233)" onmouseover="showTip(event, 'fs124', 233)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs125', 234)" onmouseover="showTip(event, 'fs125', 234)" class="i">ReadVarInt</span>()<span class="o">:</span> <span onmouseout="hideTip(event, 'fs54', 235)" onmouseover="showTip(event, 'fs54', 235)" class="i">int</span> <span class="o">=</span> 
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs126', 236)" onmouseover="showTip(event, 'fs126', 236)" class="i">b</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs124', 237)" onmouseover="showTip(event, 'fs124', 237)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs127', 238)" onmouseover="showTip(event, 'fs127', 238)" class="i">ReadByte</span>()
        <span class="k">match</span> <span onmouseout="hideTip(event, 'fs126', 239)" onmouseover="showTip(event, 'fs126', 239)" class="i">b</span> <span class="k">with</span> 
        | <span class="n">0xFDuy</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs54', 240)" onmouseover="showTip(event, 'fs54', 240)" class="i">int</span>(<span onmouseout="hideTip(event, 'fs124', 241)" onmouseover="showTip(event, 'fs124', 241)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs128', 242)" onmouseover="showTip(event, 'fs128', 242)" class="i">ReadUInt16</span>())
        | <span class="n">0xFEuy</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs54', 243)" onmouseover="showTip(event, 'fs54', 243)" class="i">int</span>(<span onmouseout="hideTip(event, 'fs124', 244)" onmouseover="showTip(event, 'fs124', 244)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs129', 245)" onmouseover="showTip(event, 'fs129', 245)" class="i">ReadUInt32</span>())
        | <span class="n">0xFFuy</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs54', 246)" onmouseover="showTip(event, 'fs54', 246)" class="i">int</span>(<span onmouseout="hideTip(event, 'fs124', 247)" onmouseover="showTip(event, 'fs124', 247)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs130', 248)" onmouseover="showTip(event, 'fs130', 248)" class="i">ReadUInt64</span>())
        | _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs54', 249)" onmouseover="showTip(event, 'fs54', 249)" class="i">int</span>(<span onmouseout="hideTip(event, 'fs126', 250)" onmouseover="showTip(event, 'fs126', 250)" class="i">b</span>)
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs124', 251)" onmouseover="showTip(event, 'fs124', 251)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs131', 252)" onmouseover="showTip(event, 'fs131', 252)" class="i">ReadVarString</span>()<span class="o">:</span> <span onmouseout="hideTip(event, 'fs41', 253)" onmouseover="showTip(event, 'fs41', 253)" class="i">string</span> <span class="o">=</span> 
        <span onmouseout="hideTip(event, 'fs122', 254)" onmouseover="showTip(event, 'fs122', 254)" class="i">Encoding</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs123', 255)" onmouseover="showTip(event, 'fs123', 255)" class="i">ASCII</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs132', 256)" onmouseover="showTip(event, 'fs132', 256)" class="i">GetString</span>(<span onmouseout="hideTip(event, 'fs124', 257)" onmouseover="showTip(event, 'fs124', 257)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs133', 258)" onmouseover="showTip(event, 'fs133', 258)" class="i">ReadScript</span>())
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs124', 259)" onmouseover="showTip(event, 'fs124', 259)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs134', 260)" onmouseover="showTip(event, 'fs134', 260)" class="i">ReadScript</span>()<span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 261)" onmouseover="showTip(event, 'fs35', 261)" class="i">byte</span>[] <span class="o">=</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs135', 262)" onmouseover="showTip(event, 'fs135', 262)" class="i">length</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs124', 263)" onmouseover="showTip(event, 'fs124', 263)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs136', 264)" onmouseover="showTip(event, 'fs136', 264)" class="i">ReadVarInt</span>()
        <span onmouseout="hideTip(event, 'fs124', 265)" onmouseover="showTip(event, 'fs124', 265)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs137', 266)" onmouseover="showTip(event, 'fs137', 266)" class="i">ReadBytes</span>(<span onmouseout="hideTip(event, 'fs135', 267)" onmouseover="showTip(event, 'fs135', 267)" class="i">length</span>)</pre>
</td>
</tr>
</table>

<p>Extend the BinaryWriter with similar functions. Likewise for varints, I never have
to actually go to longs.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs112', 268)" onmouseover="showTip(event, 'fs112', 268)" class="i">BinaryWriter</span> <span class="k">with</span>
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs138', 269)" onmouseover="showTip(event, 'fs138', 269)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs139', 270)" onmouseover="showTip(event, 'fs139', 270)" class="i">WriteVarInt</span>(<span onmouseout="hideTip(event, 'fs53', 271)" onmouseover="showTip(event, 'fs53', 271)" class="i">i</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs54', 272)" onmouseover="showTip(event, 'fs54', 272)" class="i">int</span>) <span class="o">=</span> 
        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs53', 273)" onmouseover="showTip(event, 'fs53', 273)" class="i">i</span> <span class="o">&lt;=</span> <span class="n">0xFC</span> <span class="k">then</span>
            <span onmouseout="hideTip(event, 'fs138', 274)" onmouseover="showTip(event, 'fs138', 274)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 275)" onmouseover="showTip(event, 'fs140', 275)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs35', 276)" onmouseover="showTip(event, 'fs35', 276)" class="i">byte</span>(<span onmouseout="hideTip(event, 'fs53', 277)" onmouseover="showTip(event, 'fs53', 277)" class="i">i</span>))
        <span class="k">elif</span> <span onmouseout="hideTip(event, 'fs53', 278)" onmouseover="showTip(event, 'fs53', 278)" class="i">i</span> <span class="o">&lt;=</span> <span class="n">0xFFFF</span> <span class="k">then</span>
            <span onmouseout="hideTip(event, 'fs138', 279)" onmouseover="showTip(event, 'fs138', 279)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 280)" onmouseover="showTip(event, 'fs140', 280)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs35', 281)" onmouseover="showTip(event, 'fs35', 281)" class="i">byte</span>(<span class="n">0xFD</span>))
            <span onmouseout="hideTip(event, 'fs138', 282)" onmouseover="showTip(event, 'fs138', 282)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 283)" onmouseover="showTip(event, 'fs140', 283)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs141', 284)" onmouseover="showTip(event, 'fs141', 284)" class="i">int16</span> <span onmouseout="hideTip(event, 'fs53', 285)" onmouseover="showTip(event, 'fs53', 285)" class="i">i</span>)
        <span class="k">else</span> <span class="c">// Protocol allows for int64 but there isn&#39;t anything varint that goes so high</span>
            <span onmouseout="hideTip(event, 'fs138', 286)" onmouseover="showTip(event, 'fs138', 286)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 287)" onmouseover="showTip(event, 'fs140', 287)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs35', 288)" onmouseover="showTip(event, 'fs35', 288)" class="i">byte</span>(<span class="n">0xFE</span>))
            <span onmouseout="hideTip(event, 'fs138', 289)" onmouseover="showTip(event, 'fs138', 289)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 290)" onmouseover="showTip(event, 'fs140', 290)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs142', 291)" onmouseover="showTip(event, 'fs142', 291)" class="i">int32</span> <span onmouseout="hideTip(event, 'fs53', 292)" onmouseover="showTip(event, 'fs53', 292)" class="i">i</span>)
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs138', 293)" onmouseover="showTip(event, 'fs138', 293)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs143', 294)" onmouseover="showTip(event, 'fs143', 294)" class="i">WriteVarString</span>(<span onmouseout="hideTip(event, 'fs144', 295)" onmouseover="showTip(event, 'fs144', 295)" class="i">s</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs41', 296)" onmouseover="showTip(event, 'fs41', 296)" class="i">string</span>) <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs138', 297)" onmouseover="showTip(event, 'fs138', 297)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs145', 298)" onmouseover="showTip(event, 'fs145', 298)" class="i">WriteVarInt</span>(<span onmouseout="hideTip(event, 'fs144', 299)" onmouseover="showTip(event, 'fs144', 299)" class="i">s</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs146', 300)" onmouseover="showTip(event, 'fs146', 300)" class="i">Length</span>)
        <span onmouseout="hideTip(event, 'fs138', 301)" onmouseover="showTip(event, 'fs138', 301)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 302)" onmouseover="showTip(event, 'fs140', 302)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs122', 303)" onmouseover="showTip(event, 'fs122', 303)" class="i">Encoding</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs123', 304)" onmouseover="showTip(event, 'fs123', 304)" class="i">ASCII</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs147', 305)" onmouseover="showTip(event, 'fs147', 305)" class="i">GetBytes</span>(<span onmouseout="hideTip(event, 'fs144', 306)" onmouseover="showTip(event, 'fs144', 306)" class="i">s</span>))
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs138', 307)" onmouseover="showTip(event, 'fs138', 307)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs148', 308)" onmouseover="showTip(event, 'fs148', 308)" class="i">WriteScript</span>(<span onmouseout="hideTip(event, 'fs118', 309)" onmouseover="showTip(event, 'fs118', 309)" class="i">b</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 310)" onmouseover="showTip(event, 'fs35', 310)" class="i">byte</span>[]) <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs138', 311)" onmouseover="showTip(event, 'fs138', 311)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs145', 312)" onmouseover="showTip(event, 'fs145', 312)" class="i">WriteVarInt</span>(<span onmouseout="hideTip(event, 'fs118', 313)" onmouseover="showTip(event, 'fs118', 313)" class="i">b</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs55', 314)" onmouseover="showTip(event, 'fs55', 314)" class="i">Length</span>)
        <span onmouseout="hideTip(event, 'fs138', 315)" onmouseover="showTip(event, 'fs138', 315)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 316)" onmouseover="showTip(event, 'fs140', 316)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs118', 317)" onmouseover="showTip(event, 'fs118', 317)" class="i">b</span>)</pre>
</td>
</tr>
</table>

<h2>Primitive types &amp; Messages</h2>

<p>This section has the parser/serializer code for the basic types of the Protocol. Essentially
they are the non standard scalar types that can be included in messages.</p>

<p>It also has the same code for the messages themselves. The functions are written by hand. There are
some cases where the exact same code is reused. For instance when two messages have the same payload. I didn't
try to factorize but instead the code is duplicated. It's mainly to keep the code similar between messages and because
the gains wouldn't be big anyway.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs149', 318)" onmouseover="showTip(event, 'fs149', 318)" class="i">NetworkAddr</span>(<span onmouseout="hideTip(event, 'fs150', 319)" onmouseover="showTip(event, 'fs150', 319)" class="i">ip</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs151', 320)" onmouseover="showTip(event, 'fs151', 320)" class="i">IPEndPoint</span>) <span class="o">=</span> 
    <span class="c">// the address put in the version message. The other side may want to connect back using this IP</span>
    <span class="k">static</span> <span class="k">member</span> <span onmouseout="hideTip(event, 'fs152', 321)" onmouseover="showTip(event, 'fs152', 321)" class="i">MyAddress</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs149', 322)" onmouseover="showTip(event, 'fs149', 322)" class="i">NetworkAddr</span>(<span class="k">new</span> <span onmouseout="hideTip(event, 'fs151', 323)" onmouseover="showTip(event, 'fs151', 323)" class="i">IPEndPoint</span>(<span onmouseout="hideTip(event, 'fs153', 324)" onmouseover="showTip(event, 'fs153', 324)" class="i">IPAddress</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs154', 325)" onmouseover="showTip(event, 'fs154', 325)" class="i">Parse</span>(<span onmouseout="hideTip(event, 'fs16', 326)" onmouseover="showTip(event, 'fs16', 326)" class="i">settings</span><span class="o">.</span><span class="i">MyExtIp</span>), <span onmouseout="hideTip(event, 'fs16', 327)" onmouseover="showTip(event, 'fs16', 327)" class="i">settings</span><span class="o">.</span><span class="i">ServerPort</span>)) <span class="c">// TODO: Lookup external address</span>
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs155', 328)" onmouseover="showTip(event, 'fs155', 328)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs156', 329)" onmouseover="showTip(event, 'fs156', 329)" class="i">ToByteArray</span>() <span class="o">=</span>
        <span class="k">use</span> <span onmouseout="hideTip(event, 'fs113', 330)" onmouseover="showTip(event, 'fs113', 330)" class="i">ms</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs114', 331)" onmouseover="showTip(event, 'fs114', 331)" class="i">MemoryStream</span>()
        <span class="k">use</span> <span onmouseout="hideTip(event, 'fs115', 332)" onmouseover="showTip(event, 'fs115', 332)" class="i">os</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs112', 333)" onmouseover="showTip(event, 'fs112', 333)" class="i">BinaryWriter</span>(<span onmouseout="hideTip(event, 'fs113', 334)" onmouseover="showTip(event, 'fs113', 334)" class="i">ms</span>)
        <span onmouseout="hideTip(event, 'fs115', 335)" onmouseover="showTip(event, 'fs115', 335)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 336)" onmouseover="showTip(event, 'fs140', 336)" class="i">Write</span>(<span class="n">0L</span>)
        <span onmouseout="hideTip(event, 'fs115', 337)" onmouseover="showTip(event, 'fs115', 337)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 338)" onmouseover="showTip(event, 'fs140', 338)" class="i">Write</span>(<span class="n">0L</span>)
        <span onmouseout="hideTip(event, 'fs115', 339)" onmouseover="showTip(event, 'fs115', 339)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 340)" onmouseover="showTip(event, 'fs140', 340)" class="i">Write</span>(<span class="n">0xFFFF0000</span>)
        <span onmouseout="hideTip(event, 'fs115', 341)" onmouseover="showTip(event, 'fs115', 341)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 342)" onmouseover="showTip(event, 'fs140', 342)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs150', 343)" onmouseover="showTip(event, 'fs150', 343)" class="i">ip</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs157', 344)" onmouseover="showTip(event, 'fs157', 344)" class="i">Address</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs158', 345)" onmouseover="showTip(event, 'fs158', 345)" class="i">GetAddressBytes</span>())
        <span onmouseout="hideTip(event, 'fs115', 346)" onmouseover="showTip(event, 'fs115', 346)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 347)" onmouseover="showTip(event, 'fs140', 347)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs141', 348)" onmouseover="showTip(event, 'fs141', 348)" class="i">int16</span>(<span onmouseout="hideTip(event, 'fs150', 349)" onmouseover="showTip(event, 'fs150', 349)" class="i">ip</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs159', 350)" onmouseover="showTip(event, 'fs159', 350)" class="i">Port</span>))
        <span onmouseout="hideTip(event, 'fs113', 351)" onmouseover="showTip(event, 'fs113', 351)" class="i">ms</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs116', 352)" onmouseover="showTip(event, 'fs116', 352)" class="i">ToArray</span>()

    <span class="k">static</span> <span class="k">member</span> <span onmouseout="hideTip(event, 'fs160', 353)" onmouseover="showTip(event, 'fs160', 353)" class="i">Parse</span>(<span onmouseout="hideTip(event, 'fs121', 354)" onmouseover="showTip(event, 'fs121', 354)" class="i">reader</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs120', 355)" onmouseover="showTip(event, 'fs120', 355)" class="i">BinaryReader</span>) <span class="o">=</span> 
        <span onmouseout="hideTip(event, 'fs121', 356)" onmouseover="showTip(event, 'fs121', 356)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs137', 357)" onmouseover="showTip(event, 'fs137', 357)" class="i">ReadBytes</span>(<span class="n">20</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs77', 358)" onmouseover="showTip(event, 'fs77', 358)" class="i">ignore</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs161', 359)" onmouseover="showTip(event, 'fs161', 359)" class="i">ip</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 360)" onmouseover="showTip(event, 'fs121', 360)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs137', 361)" onmouseover="showTip(event, 'fs137', 361)" class="i">ReadBytes</span>(<span class="n">4</span>)
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs162', 362)" onmouseover="showTip(event, 'fs162', 362)" class="i">ipAddress</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs153', 363)" onmouseover="showTip(event, 'fs153', 363)" class="i">IPAddress</span>(<span onmouseout="hideTip(event, 'fs161', 364)" onmouseover="showTip(event, 'fs161', 364)" class="i">ip</span>)
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs163', 365)" onmouseover="showTip(event, 'fs163', 365)" class="i">port</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs54', 366)" onmouseover="showTip(event, 'fs54', 366)" class="i">int</span>(<span onmouseout="hideTip(event, 'fs164', 367)" onmouseover="showTip(event, 'fs164', 367)" class="i">uint16</span>(<span onmouseout="hideTip(event, 'fs153', 368)" onmouseover="showTip(event, 'fs153', 368)" class="i">IPAddress</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs165', 369)" onmouseover="showTip(event, 'fs165', 369)" class="i">NetworkToHostOrder</span>(<span onmouseout="hideTip(event, 'fs121', 370)" onmouseover="showTip(event, 'fs121', 370)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs166', 371)" onmouseover="showTip(event, 'fs166', 371)" class="i">ReadInt16</span>())))
        <span class="k">new</span> <span onmouseout="hideTip(event, 'fs149', 372)" onmouseover="showTip(event, 'fs149', 372)" class="i">NetworkAddr</span>(<span class="k">new</span> <span onmouseout="hideTip(event, 'fs151', 373)" onmouseover="showTip(event, 'fs151', 373)" class="i">IPEndPoint</span>(<span onmouseout="hideTip(event, 'fs162', 374)" onmouseover="showTip(event, 'fs162', 374)" class="i">ipAddress</span>, <span onmouseout="hideTip(event, 'fs163', 375)" onmouseover="showTip(event, 'fs163', 375)" class="i">port</span>))

    <span class="k">member</span> <span class="k">val</span> <span onmouseout="hideTip(event, 'fs167', 376)" onmouseover="showTip(event, 'fs167', 376)" class="i">EndPoint</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs150', 377)" onmouseover="showTip(event, 'fs150', 377)" class="i">ip</span> <span class="k">with</span> <span class="i">get</span></pre>
</td>
</tr>
</table>

<p>The Version message. The other messages that follow the same pattern are not presented here to keep the page short.
Refer to the <a href="https://github.com/hhanh00">code source</a></p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs168', 378)" onmouseover="showTip(event, 'fs168', 378)" class="i">Version</span>(<span onmouseout="hideTip(event, 'fs169', 379)" onmouseover="showTip(event, 'fs169', 379)" class="i">version</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs142', 380)" onmouseover="showTip(event, 'fs142', 380)" class="i">int32</span>, <span onmouseout="hideTip(event, 'fs170', 381)" onmouseover="showTip(event, 'fs170', 381)" class="i">services</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs171', 382)" onmouseover="showTip(event, 'fs171', 382)" class="i">int64</span>, <span onmouseout="hideTip(event, 'fs172', 383)" onmouseover="showTip(event, 'fs172', 383)" class="i">timestamp</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs171', 384)" onmouseover="showTip(event, 'fs171', 384)" class="i">int64</span>, <span onmouseout="hideTip(event, 'fs173', 385)" onmouseover="showTip(event, 'fs173', 385)" class="i">recv</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 386)" onmouseover="showTip(event, 'fs35', 386)" class="i">byte</span>[], <span onmouseout="hideTip(event, 'fs174', 387)" onmouseover="showTip(event, 'fs174', 387)" class="i">from</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 388)" onmouseover="showTip(event, 'fs35', 388)" class="i">byte</span>[], <span onmouseout="hideTip(event, 'fs175', 389)" onmouseover="showTip(event, 'fs175', 389)" class="i">nonce</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs171', 390)" onmouseover="showTip(event, 'fs171', 390)" class="i">int64</span>, <span onmouseout="hideTip(event, 'fs176', 391)" onmouseover="showTip(event, 'fs176', 391)" class="i">userAgent</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs41', 392)" onmouseover="showTip(event, 'fs41', 392)" class="i">string</span>, <span onmouseout="hideTip(event, 'fs177', 393)" onmouseover="showTip(event, 'fs177', 393)" class="i">height</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs142', 394)" onmouseover="showTip(event, 'fs142', 394)" class="i">int32</span>, <span onmouseout="hideTip(event, 'fs178', 395)" onmouseover="showTip(event, 'fs178', 395)" class="i">relay</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 396)" onmouseover="showTip(event, 'fs35', 396)" class="i">byte</span>) <span class="o">=</span> 
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs179', 397)" onmouseover="showTip(event, 'fs179', 397)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs180', 398)" onmouseover="showTip(event, 'fs180', 398)" class="i">ToByteArray</span>() <span class="o">=</span> <span onmouseout="hideTip(event, 'fs110', 399)" onmouseover="showTip(event, 'fs110', 399)" class="i">ToBinaryArray</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs115', 400)" onmouseover="showTip(event, 'fs115', 400)" class="i">os</span> <span class="k">-&gt;</span>
        <span onmouseout="hideTip(event, 'fs115', 401)" onmouseover="showTip(event, 'fs115', 401)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 402)" onmouseover="showTip(event, 'fs140', 402)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs169', 403)" onmouseover="showTip(event, 'fs169', 403)" class="i">version</span>)
        <span onmouseout="hideTip(event, 'fs115', 404)" onmouseover="showTip(event, 'fs115', 404)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 405)" onmouseover="showTip(event, 'fs140', 405)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs170', 406)" onmouseover="showTip(event, 'fs170', 406)" class="i">services</span>)
        <span onmouseout="hideTip(event, 'fs115', 407)" onmouseover="showTip(event, 'fs115', 407)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 408)" onmouseover="showTip(event, 'fs140', 408)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs172', 409)" onmouseover="showTip(event, 'fs172', 409)" class="i">timestamp</span>)
        <span onmouseout="hideTip(event, 'fs115', 410)" onmouseover="showTip(event, 'fs115', 410)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 411)" onmouseover="showTip(event, 'fs140', 411)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs173', 412)" onmouseover="showTip(event, 'fs173', 412)" class="i">recv</span>)
        <span onmouseout="hideTip(event, 'fs115', 413)" onmouseover="showTip(event, 'fs115', 413)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 414)" onmouseover="showTip(event, 'fs140', 414)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs174', 415)" onmouseover="showTip(event, 'fs174', 415)" class="i">from</span>)
        <span onmouseout="hideTip(event, 'fs115', 416)" onmouseover="showTip(event, 'fs115', 416)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 417)" onmouseover="showTip(event, 'fs140', 417)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs175', 418)" onmouseover="showTip(event, 'fs175', 418)" class="i">nonce</span>)
        <span onmouseout="hideTip(event, 'fs115', 419)" onmouseover="showTip(event, 'fs115', 419)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs181', 420)" onmouseover="showTip(event, 'fs181', 420)" class="i">WriteVarString</span>(<span onmouseout="hideTip(event, 'fs176', 421)" onmouseover="showTip(event, 'fs176', 421)" class="i">userAgent</span>)
        <span onmouseout="hideTip(event, 'fs115', 422)" onmouseover="showTip(event, 'fs115', 422)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 423)" onmouseover="showTip(event, 'fs140', 423)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs177', 424)" onmouseover="showTip(event, 'fs177', 424)" class="i">height</span>)
        <span onmouseout="hideTip(event, 'fs115', 425)" onmouseover="showTip(event, 'fs115', 425)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 426)" onmouseover="showTip(event, 'fs140', 426)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs178', 427)" onmouseover="showTip(event, 'fs178', 427)" class="i">relay</span>)
        )

    <span class="k">static</span> <span class="k">member</span> <span onmouseout="hideTip(event, 'fs182', 428)" onmouseover="showTip(event, 'fs182', 428)" class="i">Create</span>(<span onmouseout="hideTip(event, 'fs183', 429)" onmouseover="showTip(event, 'fs183', 429)" class="i">timestamp</span><span class="o">:</span> <span class="i">Instant</span>, <span onmouseout="hideTip(event, 'fs184', 430)" onmouseover="showTip(event, 'fs184', 430)" class="i">recv</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs151', 431)" onmouseover="showTip(event, 'fs151', 431)" class="i">IPEndPoint</span>, <span onmouseout="hideTip(event, 'fs185', 432)" onmouseover="showTip(event, 'fs185', 432)" class="i">from</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs151', 433)" onmouseover="showTip(event, 'fs151', 433)" class="i">IPEndPoint</span>, <span onmouseout="hideTip(event, 'fs175', 434)" onmouseover="showTip(event, 'fs175', 434)" class="i">nonce</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs171', 435)" onmouseover="showTip(event, 'fs171', 435)" class="i">int64</span>, <span onmouseout="hideTip(event, 'fs176', 436)" onmouseover="showTip(event, 'fs176', 436)" class="i">userAgent</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs41', 437)" onmouseover="showTip(event, 'fs41', 437)" class="i">string</span>, <span onmouseout="hideTip(event, 'fs177', 438)" onmouseover="showTip(event, 'fs177', 438)" class="i">height</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs142', 439)" onmouseover="showTip(event, 'fs142', 439)" class="i">int32</span>, <span onmouseout="hideTip(event, 'fs178', 440)" onmouseover="showTip(event, 'fs178', 440)" class="i">relay</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 441)" onmouseover="showTip(event, 'fs35', 441)" class="i">byte</span>) <span class="o">=</span> 
        <span class="k">new</span> <span onmouseout="hideTip(event, 'fs168', 442)" onmouseover="showTip(event, 'fs168', 442)" class="i">Version</span>(<span onmouseout="hideTip(event, 'fs18', 443)" onmouseover="showTip(event, 'fs18', 443)" class="i">version</span>, <span class="n">1L</span>, <span onmouseout="hideTip(event, 'fs183', 444)" onmouseover="showTip(event, 'fs183', 444)" class="i">timestamp</span><span class="o">.</span><span class="i">Ticks</span> <span class="o">/</span> <span class="i">NodaConstants</span><span class="o">.</span><span class="i">TicksPerSecond</span>, (<span class="k">new</span> <span onmouseout="hideTip(event, 'fs149', 445)" onmouseover="showTip(event, 'fs149', 445)" class="i">NetworkAddr</span>(<span onmouseout="hideTip(event, 'fs184', 446)" onmouseover="showTip(event, 'fs184', 446)" class="i">recv</span>))<span class="o">.</span><span class="i">ToByteArray</span>(),
            (<span class="k">new</span> <span onmouseout="hideTip(event, 'fs149', 447)" onmouseover="showTip(event, 'fs149', 447)" class="i">NetworkAddr</span>(<span onmouseout="hideTip(event, 'fs185', 448)" onmouseover="showTip(event, 'fs185', 448)" class="i">from</span>))<span class="o">.</span><span class="i">ToByteArray</span>(), <span onmouseout="hideTip(event, 'fs175', 449)" onmouseover="showTip(event, 'fs175', 449)" class="i">nonce</span>, <span onmouseout="hideTip(event, 'fs176', 450)" onmouseover="showTip(event, 'fs176', 450)" class="i">userAgent</span>, <span onmouseout="hideTip(event, 'fs177', 451)" onmouseover="showTip(event, 'fs177', 451)" class="i">height</span>, <span onmouseout="hideTip(event, 'fs178', 452)" onmouseover="showTip(event, 'fs178', 452)" class="i">relay</span>)

    <span class="k">static</span> <span class="k">member</span> <span onmouseout="hideTip(event, 'fs186', 453)" onmouseover="showTip(event, 'fs186', 453)" class="i">Parse</span>(<span onmouseout="hideTip(event, 'fs121', 454)" onmouseover="showTip(event, 'fs121', 454)" class="i">reader</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs120', 455)" onmouseover="showTip(event, 'fs120', 455)" class="i">BinaryReader</span>) <span class="o">=</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs187', 456)" onmouseover="showTip(event, 'fs187', 456)" class="i">version</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 457)" onmouseover="showTip(event, 'fs121', 457)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs188', 458)" onmouseover="showTip(event, 'fs188', 458)" class="i">ReadInt32</span>()
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs170', 459)" onmouseover="showTip(event, 'fs170', 459)" class="i">services</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 460)" onmouseover="showTip(event, 'fs121', 460)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs189', 461)" onmouseover="showTip(event, 'fs189', 461)" class="i">ReadInt64</span>()
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs172', 462)" onmouseover="showTip(event, 'fs172', 462)" class="i">timestamp</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 463)" onmouseover="showTip(event, 'fs121', 463)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs189', 464)" onmouseover="showTip(event, 'fs189', 464)" class="i">ReadInt64</span>()
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs173', 465)" onmouseover="showTip(event, 'fs173', 465)" class="i">recv</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 466)" onmouseover="showTip(event, 'fs121', 466)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs137', 467)" onmouseover="showTip(event, 'fs137', 467)" class="i">ReadBytes</span>(<span class="n">26</span>)
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs174', 468)" onmouseover="showTip(event, 'fs174', 468)" class="i">from</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 469)" onmouseover="showTip(event, 'fs121', 469)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs137', 470)" onmouseover="showTip(event, 'fs137', 470)" class="i">ReadBytes</span>(<span class="n">26</span>)
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs175', 471)" onmouseover="showTip(event, 'fs175', 471)" class="i">nonce</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 472)" onmouseover="showTip(event, 'fs121', 472)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs189', 473)" onmouseover="showTip(event, 'fs189', 473)" class="i">ReadInt64</span>()
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs176', 474)" onmouseover="showTip(event, 'fs176', 474)" class="i">userAgent</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 475)" onmouseover="showTip(event, 'fs121', 475)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs190', 476)" onmouseover="showTip(event, 'fs190', 476)" class="i">ReadVarString</span>()
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs191', 477)" onmouseover="showTip(event, 'fs191', 477)" class="i">height</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 478)" onmouseover="showTip(event, 'fs121', 478)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs188', 479)" onmouseover="showTip(event, 'fs188', 479)" class="i">ReadInt32</span>()
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs178', 480)" onmouseover="showTip(event, 'fs178', 480)" class="i">relay</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 481)" onmouseover="showTip(event, 'fs121', 481)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs127', 482)" onmouseover="showTip(event, 'fs127', 482)" class="i">ReadByte</span>()
        <span class="k">new</span> <span onmouseout="hideTip(event, 'fs168', 483)" onmouseover="showTip(event, 'fs168', 483)" class="i">Version</span>(<span onmouseout="hideTip(event, 'fs187', 484)" onmouseover="showTip(event, 'fs187', 484)" class="i">version</span>, <span onmouseout="hideTip(event, 'fs170', 485)" onmouseover="showTip(event, 'fs170', 485)" class="i">services</span>, <span onmouseout="hideTip(event, 'fs172', 486)" onmouseover="showTip(event, 'fs172', 486)" class="i">timestamp</span>, <span onmouseout="hideTip(event, 'fs173', 487)" onmouseover="showTip(event, 'fs173', 487)" class="i">recv</span>, <span onmouseout="hideTip(event, 'fs174', 488)" onmouseover="showTip(event, 'fs174', 488)" class="i">from</span>, <span onmouseout="hideTip(event, 'fs175', 489)" onmouseover="showTip(event, 'fs175', 489)" class="i">nonce</span>, <span onmouseout="hideTip(event, 'fs176', 490)" onmouseover="showTip(event, 'fs176', 490)" class="i">userAgent</span>, <span onmouseout="hideTip(event, 'fs191', 491)" onmouseover="showTip(event, 'fs191', 491)" class="i">height</span>, <span onmouseout="hideTip(event, 'fs178', 492)" onmouseover="showTip(event, 'fs178', 492)" class="i">relay</span>)

    <span class="k">member</span> <span class="k">val</span> <span class="i">Recv</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs173', 493)" onmouseover="showTip(event, 'fs173', 493)" class="i">recv</span> <span class="k">with</span> <span class="i">get</span>
    <span class="k">member</span> <span class="k">val</span> <span class="i">From</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs174', 494)" onmouseover="showTip(event, 'fs174', 494)" class="i">from</span> <span class="k">with</span> <span class="i">get</span>
    <span class="k">member</span> <span class="k">val</span> <span class="i">UserAgent</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs176', 495)" onmouseover="showTip(event, 'fs176', 495)" class="i">userAgent</span> <span class="k">with</span> <span class="i">get</span>
    <span class="k">member</span> <span class="k">val</span> <span class="i">Relay</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs178', 496)" onmouseover="showTip(event, 'fs178', 496)" class="i">relay</span> <span class="k">with</span> <span class="i">get</span>
    <span class="k">member</span> <span class="k">val</span> <span class="i">Height</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs177', 497)" onmouseover="showTip(event, 'fs177', 497)" class="i">height</span> <span class="k">with</span> <span class="i">get</span></pre>
</td>
</tr>
</table>

<p>A <code>BitcoinMessage</code> is still a low-level object. The command has been identified and the payload
extracted but the later hasn't been parsed.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
<span class="l">35: </span>
<span class="l">36: </span>
<span class="l">37: </span>
<span class="l">38: </span>
<span class="l">39: </span>
<span class="l">40: </span>
<span class="l">41: </span>
<span class="l">42: </span>
<span class="l">43: </span>
<span class="l">44: </span>
<span class="l">45: </span>
<span class="l">46: </span>
<span class="l">47: </span>
<span class="l">48: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs401', 1498)" onmouseover="showTip(event, 'fs401', 1498)" class="i">magic</span> <span class="o">=</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs16', 1499)" onmouseover="showTip(event, 'fs16', 1499)" class="i">settings</span><span class="o">.</span><span class="i">TestNet</span> <span class="k">then</span> <span class="n">0xDAB5BFFA</span> <span class="k">else</span> <span class="n">0xD9B4BEF9</span> 
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs402', 1500)" onmouseover="showTip(event, 'fs402', 1500)" class="i">BitcoinMessage</span>(<span onmouseout="hideTip(event, 'fs403', 1501)" onmouseover="showTip(event, 'fs403', 1501)" class="i">command</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs41', 1502)" onmouseover="showTip(event, 'fs41', 1502)" class="i">string</span>, <span onmouseout="hideTip(event, 'fs404', 1503)" onmouseover="showTip(event, 'fs404', 1503)" class="i">payload</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 1504)" onmouseover="showTip(event, 'fs35', 1504)" class="i">byte</span>[]) <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs405', 1505)" onmouseover="showTip(event, 'fs405', 1505)" class="i">parsePayload</span>()<span class="o">:</span> <span onmouseout="hideTip(event, 'fs228', 1506)" onmouseover="showTip(event, 'fs228', 1506)" class="i">obj</span> <span class="o">=</span> 
        <span class="k">use</span> <span onmouseout="hideTip(event, 'fs113', 1507)" onmouseover="showTip(event, 'fs113', 1507)" class="i">ms</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs114', 1508)" onmouseover="showTip(event, 'fs114', 1508)" class="i">MemoryStream</span>(<span onmouseout="hideTip(event, 'fs404', 1509)" onmouseover="showTip(event, 'fs404', 1509)" class="i">payload</span>)
        <span class="k">match</span> <span onmouseout="hideTip(event, 'fs403', 1510)" onmouseover="showTip(event, 'fs403', 1510)" class="i">command</span> <span class="k">with</span>
        | <span class="s">&quot;</span><span class="s">getheaders</span><span class="s">&quot;</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs117', 1511)" onmouseover="showTip(event, 'fs117', 1511)" class="i">ParseByteArray</span> <span onmouseout="hideTip(event, 'fs404', 1512)" onmouseover="showTip(event, 'fs404', 1512)" class="i">payload</span> <span onmouseout="hideTip(event, 'fs208', 1513)" onmouseover="showTip(event, 'fs208', 1513)" class="i">GetHeaders</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs406', 1514)" onmouseover="showTip(event, 'fs406', 1514)" class="i">Parse</span> <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs228', 1515)" onmouseover="showTip(event, 'fs228', 1515)" class="i">obj</span>
        | <span class="s">&quot;</span><span class="s">getblocks</span><span class="s">&quot;</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs117', 1516)" onmouseover="showTip(event, 'fs117', 1516)" class="i">ParseByteArray</span> <span onmouseout="hideTip(event, 'fs404', 1517)" onmouseover="showTip(event, 'fs404', 1517)" class="i">payload</span> <span onmouseout="hideTip(event, 'fs376', 1518)" onmouseover="showTip(event, 'fs376', 1518)" class="i">GetBlocks</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs407', 1519)" onmouseover="showTip(event, 'fs407', 1519)" class="i">Parse</span> <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs228', 1520)" onmouseover="showTip(event, 'fs228', 1520)" class="i">obj</span>
        | <span class="s">&quot;</span><span class="s">getdata</span><span class="s">&quot;</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs117', 1521)" onmouseover="showTip(event, 'fs117', 1521)" class="i">ParseByteArray</span> <span onmouseout="hideTip(event, 'fs404', 1522)" onmouseover="showTip(event, 'fs404', 1522)" class="i">payload</span> <span onmouseout="hideTip(event, 'fs291', 1523)" onmouseover="showTip(event, 'fs291', 1523)" class="i">GetData</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs408', 1524)" onmouseover="showTip(event, 'fs408', 1524)" class="i">Parse</span> <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs228', 1525)" onmouseover="showTip(event, 'fs228', 1525)" class="i">obj</span>
        | <span class="s">&quot;</span><span class="s">version</span><span class="s">&quot;</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs117', 1526)" onmouseover="showTip(event, 'fs117', 1526)" class="i">ParseByteArray</span> <span onmouseout="hideTip(event, 'fs404', 1527)" onmouseover="showTip(event, 'fs404', 1527)" class="i">payload</span> <span onmouseout="hideTip(event, 'fs168', 1528)" onmouseover="showTip(event, 'fs168', 1528)" class="i">Version</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs409', 1529)" onmouseover="showTip(event, 'fs409', 1529)" class="i">Parse</span> <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs228', 1530)" onmouseover="showTip(event, 'fs228', 1530)" class="i">obj</span>
        | <span class="s">&quot;</span><span class="s">headers</span><span class="s">&quot;</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs117', 1531)" onmouseover="showTip(event, 'fs117', 1531)" class="i">ParseByteArray</span> <span onmouseout="hideTip(event, 'fs404', 1532)" onmouseover="showTip(event, 'fs404', 1532)" class="i">payload</span> <span onmouseout="hideTip(event, 'fs263', 1533)" onmouseover="showTip(event, 'fs263', 1533)" class="i">Headers</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs410', 1534)" onmouseover="showTip(event, 'fs410', 1534)" class="i">Parse</span> <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs228', 1535)" onmouseover="showTip(event, 'fs228', 1535)" class="i">obj</span>
        | <span class="s">&quot;</span><span class="s">addr</span><span class="s">&quot;</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs117', 1536)" onmouseover="showTip(event, 'fs117', 1536)" class="i">ParseByteArray</span> <span onmouseout="hideTip(event, 'fs404', 1537)" onmouseover="showTip(event, 'fs404', 1537)" class="i">payload</span> <span onmouseout="hideTip(event, 'fs195', 1538)" onmouseover="showTip(event, 'fs195', 1538)" class="i">Addr</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs411', 1539)" onmouseover="showTip(event, 'fs411', 1539)" class="i">Parse</span> <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs228', 1540)" onmouseover="showTip(event, 'fs228', 1540)" class="i">obj</span>
        | <span class="s">&quot;</span><span class="s">block</span><span class="s">&quot;</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs117', 1541)" onmouseover="showTip(event, 'fs117', 1541)" class="i">ParseByteArray</span> <span onmouseout="hideTip(event, 'fs404', 1542)" onmouseover="showTip(event, 'fs404', 1542)" class="i">payload</span> <span onmouseout="hideTip(event, 'fs347', 1543)" onmouseover="showTip(event, 'fs347', 1543)" class="i">Block</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs412', 1544)" onmouseover="showTip(event, 'fs412', 1544)" class="i">Parse</span> <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs228', 1545)" onmouseover="showTip(event, 'fs228', 1545)" class="i">obj</span>
        | <span class="s">&quot;</span><span class="s">inv</span><span class="s">&quot;</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs117', 1546)" onmouseover="showTip(event, 'fs117', 1546)" class="i">ParseByteArray</span> <span onmouseout="hideTip(event, 'fs404', 1547)" onmouseover="showTip(event, 'fs404', 1547)" class="i">payload</span> <span onmouseout="hideTip(event, 'fs279', 1548)" onmouseover="showTip(event, 'fs279', 1548)" class="i">InvVector</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs413', 1549)" onmouseover="showTip(event, 'fs413', 1549)" class="i">Parse</span> <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs228', 1550)" onmouseover="showTip(event, 'fs228', 1550)" class="i">obj</span>
        | <span class="s">&quot;</span><span class="s">tx</span><span class="s">&quot;</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs117', 1551)" onmouseover="showTip(event, 'fs117', 1551)" class="i">ParseByteArray</span> <span onmouseout="hideTip(event, 'fs404', 1552)" onmouseover="showTip(event, 'fs404', 1552)" class="i">payload</span> <span onmouseout="hideTip(event, 'fs324', 1553)" onmouseover="showTip(event, 'fs324', 1553)" class="i">Tx</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs355', 1554)" onmouseover="showTip(event, 'fs355', 1554)" class="i">Parse</span> <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs228', 1555)" onmouseover="showTip(event, 'fs228', 1555)" class="i">obj</span>
        | <span class="s">&quot;</span><span class="s">ping</span><span class="s">&quot;</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs117', 1556)" onmouseover="showTip(event, 'fs117', 1556)" class="i">ParseByteArray</span> <span onmouseout="hideTip(event, 'fs404', 1557)" onmouseover="showTip(event, 'fs404', 1557)" class="i">payload</span> <span onmouseout="hideTip(event, 'fs366', 1558)" onmouseover="showTip(event, 'fs366', 1558)" class="i">Ping</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs414', 1559)" onmouseover="showTip(event, 'fs414', 1559)" class="i">Parse</span> <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs228', 1560)" onmouseover="showTip(event, 'fs228', 1560)" class="i">obj</span>
        | <span class="s">&quot;</span><span class="s">mempool</span><span class="s">&quot;</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs117', 1561)" onmouseover="showTip(event, 'fs117', 1561)" class="i">ParseByteArray</span> <span onmouseout="hideTip(event, 'fs404', 1562)" onmouseover="showTip(event, 'fs404', 1562)" class="i">payload</span> <span onmouseout="hideTip(event, 'fs362', 1563)" onmouseover="showTip(event, 'fs362', 1563)" class="i">Mempool</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs415', 1564)" onmouseover="showTip(event, 'fs415', 1564)" class="i">Parse</span> <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs228', 1565)" onmouseover="showTip(event, 'fs228', 1565)" class="i">obj</span>
        | <span class="s">&quot;</span><span class="s">filterload</span><span class="s">&quot;</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs117', 1566)" onmouseover="showTip(event, 'fs117', 1566)" class="i">ParseByteArray</span> <span onmouseout="hideTip(event, 'fs404', 1567)" onmouseover="showTip(event, 'fs404', 1567)" class="i">payload</span> <span onmouseout="hideTip(event, 'fs381', 1568)" onmouseover="showTip(event, 'fs381', 1568)" class="i">FilterLoad</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs416', 1569)" onmouseover="showTip(event, 'fs416', 1569)" class="i">Parse</span> <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs228', 1570)" onmouseover="showTip(event, 'fs228', 1570)" class="i">obj</span>
        | <span class="s">&quot;</span><span class="s">filteradd</span><span class="s">&quot;</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs117', 1571)" onmouseover="showTip(event, 'fs117', 1571)" class="i">ParseByteArray</span> <span onmouseout="hideTip(event, 'fs404', 1572)" onmouseover="showTip(event, 'fs404', 1572)" class="i">payload</span> <span onmouseout="hideTip(event, 'fs390', 1573)" onmouseover="showTip(event, 'fs390', 1573)" class="i">FilterAdd</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs417', 1574)" onmouseover="showTip(event, 'fs417', 1574)" class="i">Parse</span> <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs228', 1575)" onmouseover="showTip(event, 'fs228', 1575)" class="i">obj</span>
        | <span class="s">&quot;</span><span class="s">filterclear</span><span class="s">&quot;</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs117', 1576)" onmouseover="showTip(event, 'fs117', 1576)" class="i">ParseByteArray</span> <span onmouseout="hideTip(event, 'fs404', 1577)" onmouseover="showTip(event, 'fs404', 1577)" class="i">payload</span> <span onmouseout="hideTip(event, 'fs397', 1578)" onmouseover="showTip(event, 'fs397', 1578)" class="i">FilterClear</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs418', 1579)" onmouseover="showTip(event, 'fs418', 1579)" class="i">Parse</span> <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs228', 1580)" onmouseover="showTip(event, 'fs228', 1580)" class="i">obj</span>
        | _ <span class="k">-&gt;</span> <span class="k">null</span>

    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs419', 1581)" onmouseover="showTip(event, 'fs419', 1581)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs420', 1582)" onmouseover="showTip(event, 'fs420', 1582)" class="i">ToByteArray</span>() <span class="o">=</span> 
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs421', 1583)" onmouseover="showTip(event, 'fs421', 1583)" class="i">hash256</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs99', 1584)" onmouseover="showTip(event, 'fs99', 1584)" class="i">dsha</span> <span onmouseout="hideTip(event, 'fs404', 1585)" onmouseover="showTip(event, 'fs404', 1585)" class="i">payload</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs422', 1586)" onmouseover="showTip(event, 'fs422', 1586)" class="i">checksum</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs421', 1587)" onmouseover="showTip(event, 'fs421', 1587)" class="i">hash256</span><span class="o">.</span>[<span class="n">0..</span><span class="n">3</span>]
        <span class="k">use</span> <span onmouseout="hideTip(event, 'fs113', 1588)" onmouseover="showTip(event, 'fs113', 1588)" class="i">ms</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs114', 1589)" onmouseover="showTip(event, 'fs114', 1589)" class="i">MemoryStream</span>()
        <span class="k">use</span> <span onmouseout="hideTip(event, 'fs115', 1590)" onmouseover="showTip(event, 'fs115', 1590)" class="i">os</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs112', 1591)" onmouseover="showTip(event, 'fs112', 1591)" class="i">BinaryWriter</span>(<span onmouseout="hideTip(event, 'fs113', 1592)" onmouseover="showTip(event, 'fs113', 1592)" class="i">ms</span>)
        <span onmouseout="hideTip(event, 'fs115', 1593)" onmouseover="showTip(event, 'fs115', 1593)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 1594)" onmouseover="showTip(event, 'fs140', 1594)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs401', 1595)" onmouseover="showTip(event, 'fs401', 1595)" class="i">magic</span>)
        <span class="k">let</span> <span class="k">mutable</span> <span onmouseout="hideTip(event, 'fs423', 1596)" onmouseover="showTip(event, 'fs423', 1596)" class="i">c</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs122', 1597)" onmouseover="showTip(event, 'fs122', 1597)" class="i">Encoding</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs123', 1598)" onmouseover="showTip(event, 'fs123', 1598)" class="i">ASCII</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs147', 1599)" onmouseover="showTip(event, 'fs147', 1599)" class="i">GetBytes</span>(<span onmouseout="hideTip(event, 'fs403', 1600)" onmouseover="showTip(event, 'fs403', 1600)" class="i">command</span>)
        <span onmouseout="hideTip(event, 'fs36', 1601)" onmouseover="showTip(event, 'fs36', 1601)" class="i">Array</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs424', 1602)" onmouseover="showTip(event, 'fs424', 1602)" class="i">Resize</span>(<span class="o">&amp;</span><span onmouseout="hideTip(event, 'fs423', 1603)" onmouseover="showTip(event, 'fs423', 1603)" class="i">c</span>, <span class="n">12</span>) <span class="c">// Pads with null bytes</span>
        <span onmouseout="hideTip(event, 'fs115', 1604)" onmouseover="showTip(event, 'fs115', 1604)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 1605)" onmouseover="showTip(event, 'fs140', 1605)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs423', 1606)" onmouseover="showTip(event, 'fs423', 1606)" class="i">c</span>)
        <span onmouseout="hideTip(event, 'fs115', 1607)" onmouseover="showTip(event, 'fs115', 1607)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 1608)" onmouseover="showTip(event, 'fs140', 1608)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs404', 1609)" onmouseover="showTip(event, 'fs404', 1609)" class="i">payload</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs55', 1610)" onmouseover="showTip(event, 'fs55', 1610)" class="i">Length</span>)
        <span onmouseout="hideTip(event, 'fs115', 1611)" onmouseover="showTip(event, 'fs115', 1611)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 1612)" onmouseover="showTip(event, 'fs140', 1612)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs422', 1613)" onmouseover="showTip(event, 'fs422', 1613)" class="i">checksum</span>)
        <span onmouseout="hideTip(event, 'fs115', 1614)" onmouseover="showTip(event, 'fs115', 1614)" class="i">os</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs140', 1615)" onmouseover="showTip(event, 'fs140', 1615)" class="i">Write</span>(<span onmouseout="hideTip(event, 'fs404', 1616)" onmouseover="showTip(event, 'fs404', 1616)" class="i">payload</span>)
        <span onmouseout="hideTip(event, 'fs113', 1617)" onmouseover="showTip(event, 'fs113', 1617)" class="i">ms</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs116', 1618)" onmouseover="showTip(event, 'fs116', 1618)" class="i">ToArray</span>()

    <span class="k">static</span> <span class="k">member</span> <span onmouseout="hideTip(event, 'fs425', 1619)" onmouseover="showTip(event, 'fs425', 1619)" class="i">Parse</span>(<span onmouseout="hideTip(event, 'fs121', 1620)" onmouseover="showTip(event, 'fs121', 1620)" class="i">reader</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs120', 1621)" onmouseover="showTip(event, 'fs120', 1621)" class="i">BinaryReader</span>) <span class="o">=</span> 
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs426', 1622)" onmouseover="showTip(event, 'fs426', 1622)" class="i">magic</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 1623)" onmouseover="showTip(event, 'fs121', 1623)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs188', 1624)" onmouseover="showTip(event, 'fs188', 1624)" class="i">ReadInt32</span>()
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs403', 1625)" onmouseover="showTip(event, 'fs403', 1625)" class="i">command</span> <span class="o">=</span> (<span class="k">new</span> <span onmouseout="hideTip(event, 'fs41', 1626)" onmouseover="showTip(event, 'fs41', 1626)" class="i">string</span>(<span onmouseout="hideTip(event, 'fs121', 1627)" onmouseover="showTip(event, 'fs121', 1627)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs427', 1628)" onmouseover="showTip(event, 'fs427', 1628)" class="i">ReadChars</span>(<span class="n">12</span>)))<span class="o">.</span><span class="i">TrimEnd</span>([| <span class="s">&#39;\000&#39;</span> |])
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs135', 1629)" onmouseover="showTip(event, 'fs135', 1629)" class="i">length</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 1630)" onmouseover="showTip(event, 'fs121', 1630)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs188', 1631)" onmouseover="showTip(event, 'fs188', 1631)" class="i">ReadInt32</span>()
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs428', 1632)" onmouseover="showTip(event, 'fs428', 1632)" class="i">checksum</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 1633)" onmouseover="showTip(event, 'fs121', 1633)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs188', 1634)" onmouseover="showTip(event, 'fs188', 1634)" class="i">ReadInt32</span>()
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs404', 1635)" onmouseover="showTip(event, 'fs404', 1635)" class="i">payload</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 1636)" onmouseover="showTip(event, 'fs121', 1636)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs137', 1637)" onmouseover="showTip(event, 'fs137', 1637)" class="i">ReadBytes</span>(<span onmouseout="hideTip(event, 'fs135', 1638)" onmouseover="showTip(event, 'fs135', 1638)" class="i">length</span>)

        <span class="k">new</span> <span onmouseout="hideTip(event, 'fs402', 1639)" onmouseover="showTip(event, 'fs402', 1639)" class="i">BitcoinMessage</span>(<span onmouseout="hideTip(event, 'fs403', 1640)" onmouseover="showTip(event, 'fs403', 1640)" class="i">command</span>, <span onmouseout="hideTip(event, 'fs404', 1641)" onmouseover="showTip(event, 'fs404', 1641)" class="i">payload</span>)

    <span class="k">override</span> <span onmouseout="hideTip(event, 'fs419', 1642)" onmouseover="showTip(event, 'fs419', 1642)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs429', 1643)" onmouseover="showTip(event, 'fs429', 1643)" class="i">ToString</span>() <span class="o">=</span> <span onmouseout="hideTip(event, 'fs403', 1644)" onmouseover="showTip(event, 'fs403', 1644)" class="i">command</span>
    <span class="k">member</span> <span class="k">val</span> <span class="i">Command</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs403', 1645)" onmouseover="showTip(event, 'fs403', 1645)" class="i">command</span> <span class="k">with</span> <span class="i">get</span>
    <span class="k">member</span> <span class="k">val</span> <span class="i">Payload</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs404', 1646)" onmouseover="showTip(event, 'fs404', 1646)" class="i">payload</span> <span class="k">with</span> <span class="i">get</span>
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs419', 1647)" onmouseover="showTip(event, 'fs419', 1647)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs430', 1648)" onmouseover="showTip(event, 'fs430', 1648)" class="i">ParsePayload</span>() <span class="o">=</span> <span onmouseout="hideTip(event, 'fs405', 1649)" onmouseover="showTip(event, 'fs405', 1649)" class="i">parsePayload</span>()</pre>
</td>
</tr>
</table>

<p>The message parser hooks up to an Observable of network buffers and produces
an Observable of <code>BitcoinMessage</code>. Network buffers can split messages at any point since
they are not aware of the semantics of the data transported. Therefore, there can be several
messages in one buffer and/or a message can be split accross multiple buffers.</p>

<p>The network buffers are treated as a sequence of byte arrays over which I fold a parser
function. It maintains a parsing state that has the type of the current message and the position
(inside the header part or the payload part) and it returns a sequence of messages.</p>

<p>Running the fold gives a sequence of sequence of messages so they need to be flatten to a simple sequence.</p>

<p>If the data is ill-formed, because of a bad magic value or an invalid checksum for example, the stream will raise
an <code>ParseException</code> that will be propagated as an Error element through the Observable. This method ensures that 
exceptions are treated as data and not as control flow.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
<span class="l">35: </span>
<span class="l">36: </span>
<span class="l">37: </span>
<span class="l">38: </span>
<span class="l">39: </span>
<span class="l">40: </span>
<span class="l">41: </span>
<span class="l">42: </span>
<span class="l">43: </span>
<span class="l">44: </span>
<span class="l">45: </span>
<span class="l">46: </span>
<span class="l">47: </span>
<span class="l">48: </span>
<span class="l">49: </span>
<span class="l">50: </span>
<span class="l">51: </span>
<span class="l">52: </span>
<span class="l">53: </span>
<span class="l">54: </span>
<span class="l">55: </span>
<span class="l">56: </span>
<span class="l">57: </span>
<span class="l">58: </span>
<span class="l">59: </span>
<span class="l">60: </span>
<span class="l">61: </span>
<span class="l">62: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">exception</span> <span onmouseout="hideTip(event, 'fs431', 1650)" onmouseover="showTip(event, 'fs431', 1650)" class="i">ParseException</span> 

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs432', 1651)" onmouseover="showTip(event, 'fs432', 1651)" class="i">ParserState</span> <span class="o">=</span> {
    <span onmouseout="hideTip(event, 'fs433', 1652)" onmouseover="showTip(event, 'fs433', 1652)" class="i">InHeader</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs51', 1653)" onmouseover="showTip(event, 'fs51', 1653)" class="i">bool</span>
    <span onmouseout="hideTip(event, 'fs434', 1654)" onmouseover="showTip(event, 'fs434', 1654)" class="i">Command</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs41', 1655)" onmouseover="showTip(event, 'fs41', 1655)" class="i">string</span>
    <span onmouseout="hideTip(event, 'fs435', 1656)" onmouseover="showTip(event, 'fs435', 1656)" class="i">Checksum</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs54', 1657)" onmouseover="showTip(event, 'fs54', 1657)" class="i">int</span>
    <span onmouseout="hideTip(event, 'fs436', 1658)" onmouseover="showTip(event, 'fs436', 1658)" class="i">PayloadLength</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs54', 1659)" onmouseover="showTip(event, 'fs54', 1659)" class="i">int</span>
    <span onmouseout="hideTip(event, 'fs437', 1660)" onmouseover="showTip(event, 'fs437', 1660)" class="i">Data</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 1661)" onmouseover="showTip(event, 'fs35', 1661)" class="i">byte</span>[]
}

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs438', 1662)" onmouseover="showTip(event, 'fs438', 1662)" class="i">BitcoinMessageParser</span>(<span onmouseout="hideTip(event, 'fs439', 1663)" onmouseover="showTip(event, 'fs439', 1663)" class="i">networkData</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs440', 1664)" onmouseover="showTip(event, 'fs440', 1664)" class="i">IObservable</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs35', 1665)" onmouseover="showTip(event, 'fs35', 1665)" class="i">byte</span>[]<span class="o">&gt;</span>) <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs441', 1666)" onmouseover="showTip(event, 'fs441', 1666)" class="i">headerLen</span> <span class="o">=</span> <span class="n">24</span>

    <span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs442', 1667)" onmouseover="showTip(event, 'fs442', 1667)" class="i">parse</span> (<span onmouseout="hideTip(event, 'fs443', 1668)" onmouseover="showTip(event, 'fs443', 1668)" class="i">state</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs432', 1669)" onmouseover="showTip(event, 'fs432', 1669)" class="i">ParserState</span>) (<span onmouseout="hideTip(event, 'fs121', 1670)" onmouseover="showTip(event, 'fs121', 1670)" class="i">reader</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs120', 1671)" onmouseover="showTip(event, 'fs120', 1671)" class="i">BinaryReader</span>) (<span onmouseout="hideTip(event, 'fs444', 1672)" onmouseover="showTip(event, 'fs444', 1672)" class="i">messages</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs402', 1673)" onmouseover="showTip(event, 'fs402', 1673)" class="i">BitcoinMessage</span> <span onmouseout="hideTip(event, 'fs210', 1674)" onmouseover="showTip(event, 'fs210', 1674)" class="i">list</span>) <span class="o">=</span> 
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs445', 1675)" onmouseover="showTip(event, 'fs445', 1675)" class="i">remaining</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs54', 1676)" onmouseover="showTip(event, 'fs54', 1676)" class="i">int</span>(<span onmouseout="hideTip(event, 'fs121', 1677)" onmouseover="showTip(event, 'fs121', 1677)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs334', 1678)" onmouseover="showTip(event, 'fs334', 1678)" class="i">BaseStream</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs446', 1679)" onmouseover="showTip(event, 'fs446', 1679)" class="i">Length</span> <span class="o">-</span> <span onmouseout="hideTip(event, 'fs121', 1680)" onmouseover="showTip(event, 'fs121', 1680)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs334', 1681)" onmouseover="showTip(event, 'fs334', 1681)" class="i">BaseStream</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs335', 1682)" onmouseover="showTip(event, 'fs335', 1682)" class="i">Position</span>)
        <span class="k">if</span> (<span onmouseout="hideTip(event, 'fs443', 1683)" onmouseover="showTip(event, 'fs443', 1683)" class="i">state</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs433', 1684)" onmouseover="showTip(event, 'fs433', 1684)" class="i">InHeader</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs445', 1685)" onmouseover="showTip(event, 'fs445', 1685)" class="i">remaining</span> <span class="o">&lt;</span> <span onmouseout="hideTip(event, 'fs441', 1686)" onmouseover="showTip(event, 'fs441', 1686)" class="i">headerLen</span>) <span class="o">||</span> (<span onmouseout="hideTip(event, 'fs250', 1687)" onmouseover="showTip(event, 'fs250', 1687)" class="i">not</span> <span onmouseout="hideTip(event, 'fs443', 1688)" onmouseover="showTip(event, 'fs443', 1688)" class="i">state</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs433', 1689)" onmouseover="showTip(event, 'fs433', 1689)" class="i">InHeader</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs445', 1690)" onmouseover="showTip(event, 'fs445', 1690)" class="i">remaining</span> <span class="o">&lt;</span> <span onmouseout="hideTip(event, 'fs443', 1691)" onmouseover="showTip(event, 'fs443', 1691)" class="i">state</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs436', 1692)" onmouseover="showTip(event, 'fs436', 1692)" class="i">PayloadLength</span>) <span class="k">then</span>
            (<span onmouseout="hideTip(event, 'fs444', 1693)" onmouseover="showTip(event, 'fs444', 1693)" class="i">messages</span>, <span onmouseout="hideTip(event, 'fs443', 1694)" onmouseover="showTip(event, 'fs443', 1694)" class="i">state</span>)
        <span class="k">else</span>
            <span class="k">if</span> <span onmouseout="hideTip(event, 'fs443', 1695)" onmouseover="showTip(event, 'fs443', 1695)" class="i">state</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs433', 1696)" onmouseover="showTip(event, 'fs433', 1696)" class="i">InHeader</span> <span class="k">then</span>
                <span class="k">let</span> <span onmouseout="hideTip(event, 'fs447', 1697)" onmouseover="showTip(event, 'fs447', 1697)" class="i">messageMagic</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 1698)" onmouseover="showTip(event, 'fs121', 1698)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs188', 1699)" onmouseover="showTip(event, 'fs188', 1699)" class="i">ReadInt32</span>()
                <span class="k">if</span> <span onmouseout="hideTip(event, 'fs447', 1700)" onmouseover="showTip(event, 'fs447', 1700)" class="i">messageMagic</span> <span class="o">&lt;&gt;</span> <span onmouseout="hideTip(event, 'fs401', 1701)" onmouseover="showTip(event, 'fs401', 1701)" class="i">magic</span> <span class="k">then</span>
                    <span onmouseout="hideTip(event, 'fs448', 1702)" onmouseover="showTip(event, 'fs448', 1702)" class="i">raise</span> <span onmouseout="hideTip(event, 'fs431', 1703)" onmouseover="showTip(event, 'fs431', 1703)" class="i">ParseException</span>
                <span class="k">else</span>
                    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs403', 1704)" onmouseover="showTip(event, 'fs403', 1704)" class="i">command</span> <span class="o">=</span> (<span class="k">new</span> <span onmouseout="hideTip(event, 'fs41', 1705)" onmouseover="showTip(event, 'fs41', 1705)" class="i">string</span>(<span onmouseout="hideTip(event, 'fs121', 1706)" onmouseover="showTip(event, 'fs121', 1706)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs427', 1707)" onmouseover="showTip(event, 'fs427', 1707)" class="i">ReadChars</span>(<span class="n">12</span>)))<span class="o">.</span><span class="i">TrimEnd</span>([| <span class="s">&#39;\000&#39;</span> |])
                    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs449', 1708)" onmouseover="showTip(event, 'fs449', 1708)" class="i">payloadLength</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 1709)" onmouseover="showTip(event, 'fs121', 1709)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs188', 1710)" onmouseover="showTip(event, 'fs188', 1710)" class="i">ReadInt32</span>()
                    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs428', 1711)" onmouseover="showTip(event, 'fs428', 1711)" class="i">checksum</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 1712)" onmouseover="showTip(event, 'fs121', 1712)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs188', 1713)" onmouseover="showTip(event, 'fs188', 1713)" class="i">ReadInt32</span>()
                    <span onmouseout="hideTip(event, 'fs442', 1714)" onmouseover="showTip(event, 'fs442', 1714)" class="i">parse</span> 
                        ({ <span onmouseout="hideTip(event, 'fs443', 1715)" onmouseover="showTip(event, 'fs443', 1715)" class="i">state</span> <span class="k">with</span> <span class="i">InHeader</span> <span class="o">=</span> <span class="k">false</span>; <span class="i">Command</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs403', 1716)" onmouseover="showTip(event, 'fs403', 1716)" class="i">command</span>; <span class="i">Checksum</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs428', 1717)" onmouseover="showTip(event, 'fs428', 1717)" class="i">checksum</span>; <span class="i">PayloadLength</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs449', 1718)" onmouseover="showTip(event, 'fs449', 1718)" class="i">payloadLength</span> })
                        <span onmouseout="hideTip(event, 'fs121', 1719)" onmouseover="showTip(event, 'fs121', 1719)" class="i">reader</span>
                        <span onmouseout="hideTip(event, 'fs444', 1720)" onmouseover="showTip(event, 'fs444', 1720)" class="i">messages</span>
            <span class="k">else</span> 
                <span class="k">let</span> <span onmouseout="hideTip(event, 'fs404', 1721)" onmouseover="showTip(event, 'fs404', 1721)" class="i">payload</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 1722)" onmouseover="showTip(event, 'fs121', 1722)" class="i">reader</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs137', 1723)" onmouseover="showTip(event, 'fs137', 1723)" class="i">ReadBytes</span>(<span onmouseout="hideTip(event, 'fs443', 1724)" onmouseover="showTip(event, 'fs443', 1724)" class="i">state</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs436', 1725)" onmouseover="showTip(event, 'fs436', 1725)" class="i">PayloadLength</span>)
                <span class="k">let</span> <span onmouseout="hideTip(event, 'fs421', 1726)" onmouseover="showTip(event, 'fs421', 1726)" class="i">hash256</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs99', 1727)" onmouseover="showTip(event, 'fs99', 1727)" class="i">dsha</span> <span onmouseout="hideTip(event, 'fs404', 1728)" onmouseover="showTip(event, 'fs404', 1728)" class="i">payload</span>
                <span class="k">let</span> <span onmouseout="hideTip(event, 'fs428', 1729)" onmouseover="showTip(event, 'fs428', 1729)" class="i">checksum</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs450', 1730)" onmouseover="showTip(event, 'fs450', 1730)" class="i">BitConverter</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs451', 1731)" onmouseover="showTip(event, 'fs451', 1731)" class="i">ToInt32</span>(<span onmouseout="hideTip(event, 'fs421', 1732)" onmouseover="showTip(event, 'fs421', 1732)" class="i">hash256</span>, <span class="n">0</span>)
                <span class="k">if</span> <span onmouseout="hideTip(event, 'fs428', 1733)" onmouseover="showTip(event, 'fs428', 1733)" class="i">checksum</span> <span class="o">&lt;&gt;</span> <span onmouseout="hideTip(event, 'fs443', 1734)" onmouseover="showTip(event, 'fs443', 1734)" class="i">state</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs435', 1735)" onmouseover="showTip(event, 'fs435', 1735)" class="i">Checksum</span> <span class="k">then</span>
                    <span onmouseout="hideTip(event, 'fs448', 1736)" onmouseover="showTip(event, 'fs448', 1736)" class="i">raise</span> <span onmouseout="hideTip(event, 'fs431', 1737)" onmouseover="showTip(event, 'fs431', 1737)" class="i">ParseException</span>
                <span onmouseout="hideTip(event, 'fs442', 1738)" onmouseover="showTip(event, 'fs442', 1738)" class="i">parse</span> 
                    ({ <span onmouseout="hideTip(event, 'fs443', 1739)" onmouseover="showTip(event, 'fs443', 1739)" class="i">state</span> <span class="k">with</span> <span class="i">InHeader</span> <span class="o">=</span> <span class="k">true</span> })
                    <span onmouseout="hideTip(event, 'fs121', 1740)" onmouseover="showTip(event, 'fs121', 1740)" class="i">reader</span>
                    (<span class="k">new</span> <span onmouseout="hideTip(event, 'fs402', 1741)" onmouseover="showTip(event, 'fs402', 1741)" class="i">BitcoinMessage</span>(<span onmouseout="hideTip(event, 'fs443', 1742)" onmouseover="showTip(event, 'fs443', 1742)" class="i">state</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs434', 1743)" onmouseover="showTip(event, 'fs434', 1743)" class="i">Command</span>, <span onmouseout="hideTip(event, 'fs404', 1744)" onmouseover="showTip(event, 'fs404', 1744)" class="i">payload</span>) <span class="o">::</span> <span onmouseout="hideTip(event, 'fs444', 1745)" onmouseover="showTip(event, 'fs444', 1745)" class="i">messages</span>)

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs452', 1746)" onmouseover="showTip(event, 'fs452', 1746)" class="i">acc</span> (<span onmouseout="hideTip(event, 'fs443', 1747)" onmouseover="showTip(event, 'fs443', 1747)" class="i">state</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs432', 1748)" onmouseover="showTip(event, 'fs432', 1748)" class="i">ParserState</span>) (<span onmouseout="hideTip(event, 'fs453', 1749)" onmouseover="showTip(event, 'fs453', 1749)" class="i">chunk</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 1750)" onmouseover="showTip(event, 'fs35', 1750)" class="i">byte</span>[])<span class="o">:</span> <span onmouseout="hideTip(event, 'fs402', 1751)" onmouseover="showTip(event, 'fs402', 1751)" class="i">BitcoinMessage</span> <span onmouseout="hideTip(event, 'fs210', 1752)" onmouseover="showTip(event, 'fs210', 1752)" class="i">list</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs432', 1753)" onmouseover="showTip(event, 'fs432', 1753)" class="i">ParserState</span> <span class="o">=</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs391', 1754)" onmouseover="showTip(event, 'fs391', 1754)" class="i">data</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs36', 1755)" onmouseover="showTip(event, 'fs36', 1755)" class="i">Array</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs454', 1756)" onmouseover="showTip(event, 'fs454', 1756)" class="i">concat</span> [<span onmouseout="hideTip(event, 'fs443', 1757)" onmouseover="showTip(event, 'fs443', 1757)" class="i">state</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs455', 1758)" onmouseover="showTip(event, 'fs455', 1758)" class="i">Data</span>; <span onmouseout="hideTip(event, 'fs453', 1759)" onmouseover="showTip(event, 'fs453', 1759)" class="i">chunk</span>]
        <span class="k">use</span> <span onmouseout="hideTip(event, 'fs113', 1760)" onmouseover="showTip(event, 'fs113', 1760)" class="i">ms</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs114', 1761)" onmouseover="showTip(event, 'fs114', 1761)" class="i">MemoryStream</span>(<span onmouseout="hideTip(event, 'fs391', 1762)" onmouseover="showTip(event, 'fs391', 1762)" class="i">data</span>)
        <span class="k">use</span> <span onmouseout="hideTip(event, 'fs121', 1763)" onmouseover="showTip(event, 'fs121', 1763)" class="i">reader</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs120', 1764)" onmouseover="showTip(event, 'fs120', 1764)" class="i">BinaryReader</span>(<span onmouseout="hideTip(event, 'fs113', 1765)" onmouseover="showTip(event, 'fs113', 1765)" class="i">ms</span>)
        <span class="k">let</span> (<span onmouseout="hideTip(event, 'fs444', 1766)" onmouseover="showTip(event, 'fs444', 1766)" class="i">messages</span>, <span onmouseout="hideTip(event, 'fs456', 1767)" onmouseover="showTip(event, 'fs456', 1767)" class="i">newState</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs442', 1768)" onmouseover="showTip(event, 'fs442', 1768)" class="i">parse</span> <span onmouseout="hideTip(event, 'fs443', 1769)" onmouseover="showTip(event, 'fs443', 1769)" class="i">state</span> <span onmouseout="hideTip(event, 'fs121', 1770)" onmouseover="showTip(event, 'fs121', 1770)" class="i">reader</span> <span onmouseout="hideTip(event, 'fs457', 1771)" onmouseover="showTip(event, 'fs457', 1771)" class="i">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs458', 1772)" onmouseover="showTip(event, 'fs458', 1772)" class="i">empty</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs459', 1773)" onmouseover="showTip(event, 'fs459', 1773)" class="i">remainingBytes</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs391', 1774)" onmouseover="showTip(event, 'fs391', 1774)" class="i">data</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs54', 1775)" onmouseover="showTip(event, 'fs54', 1775)" class="i">int</span> <span onmouseout="hideTip(event, 'fs113', 1776)" onmouseover="showTip(event, 'fs113', 1776)" class="i">ms</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs460', 1777)" onmouseover="showTip(event, 'fs460', 1777)" class="i">Position</span><span class="o">..</span>]
        (<span onmouseout="hideTip(event, 'fs444', 1778)" onmouseover="showTip(event, 'fs444', 1778)" class="i">messages</span>, { <span onmouseout="hideTip(event, 'fs456', 1779)" onmouseover="showTip(event, 'fs456', 1779)" class="i">newState</span> <span class="k">with</span> <span onmouseout="hideTip(event, 'fs396', 1780)" onmouseover="showTip(event, 'fs396', 1780)" class="i">Data</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs459', 1781)" onmouseover="showTip(event, 'fs459', 1781)" class="i">remainingBytes</span> })

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs461', 1782)" onmouseover="showTip(event, 'fs461', 1782)" class="i">bitcoinMessages</span> <span class="o">=</span> 
        <span onmouseout="hideTip(event, 'fs439', 1783)" onmouseover="showTip(event, 'fs439', 1783)" class="i">networkData</span>
            <span class="o">.</span><span class="i">Scan</span>(
                (<span onmouseout="hideTip(event, 'fs457', 1784)" onmouseover="showTip(event, 'fs457', 1784)" class="i">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs458', 1785)" onmouseover="showTip(event, 'fs458', 1785)" class="i">empty</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs402', 1786)" onmouseover="showTip(event, 'fs402', 1786)" class="i">BitcoinMessage</span><span class="o">&gt;</span>, { <span class="i">InHeader</span> <span class="o">=</span> <span class="k">true</span>; <span onmouseout="hideTip(event, 'fs396', 1787)" onmouseover="showTip(event, 'fs396', 1787)" class="i">Data</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs36', 1788)" onmouseover="showTip(event, 'fs36', 1788)" class="i">Array</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs244', 1789)" onmouseover="showTip(event, 'fs244', 1789)" class="i">empty</span>; <span class="i">Command</span> <span class="o">=</span> <span class="s">&quot;</span><span class="s">&quot;</span>; <span class="i">Checksum</span> <span class="o">=</span> <span class="n">0</span>; <span class="i">PayloadLength</span> <span class="o">=</span> <span class="n">0</span>}),
                <span class="k">fun</span> (<span class="i">messages</span>, <span class="i">state</span>) (<span class="i">chunk</span>) <span class="k">-&gt;</span>
                    <span onmouseout="hideTip(event, 'fs452', 1790)" onmouseover="showTip(event, 'fs452', 1790)" class="i">acc</span> <span class="i">state</span> <span class="i">chunk</span> 
            )
            <span class="o">.</span><span class="i">Select</span>(<span onmouseout="hideTip(event, 'fs462', 1791)" onmouseover="showTip(event, 'fs462', 1791)" class="i">fst</span>)
            <span class="o">.</span><span class="i">SelectMany</span>(<span class="k">fun</span> <span class="i">m</span> <span class="k">-&gt;</span> (<span class="i">m</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs457', 1792)" onmouseover="showTip(event, 'fs457', 1792)" class="i">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs463', 1793)" onmouseover="showTip(event, 'fs463', 1793)" class="i">toSeq</span>)<span class="o">.</span><span class="i">ToObservable</span>())
            <span class="c">// .Select(fun m -&gt; logger.DebugF &quot;Incoming %A&quot; m; m)</span>
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs464', 1794)" onmouseover="showTip(event, 'fs464', 1794)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs465', 1795)" onmouseover="showTip(event, 'fs465', 1795)" class="i">BitcoinMessages</span> <span class="k">with</span> <span class="i">get</span>() <span class="o">=</span> <span onmouseout="hideTip(event, 'fs461', 1796)" onmouseover="showTip(event, 'fs461', 1796)" class="i">bitcoinMessages</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs466', 1797)" onmouseover="showTip(event, 'fs466', 1797)" class="i">hashCompare</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs59', 1798)" onmouseover="showTip(event, 'fs59', 1798)" class="i">HashCompare</span>() <span class="o">:&gt;</span> <span onmouseout="hideTip(event, 'fs60', 1799)" onmouseover="showTip(event, 'fs60', 1799)" class="i">IEqualityComparer</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs35', 1800)" onmouseover="showTip(event, 'fs35', 1800)" class="i">byte</span>[]<span class="o">&gt;</span></pre>
</td>
</tr>
</table>

          <div class="tip" id="fs1">module Protocol</div>
<div class="tip" id="fs2">namespace System</div>
<div class="tip" id="fs3">namespace System.Net</div>
<div class="tip" id="fs4">namespace System.Collections</div>
<div class="tip" id="fs5">namespace System.Collections.Generic</div>
<div class="tip" id="fs6">namespace System.IO</div>
<div class="tip" id="fs7">namespace System.Text</div>
<div class="tip" id="fs8">Multiple items<br />namespace System.Linq<br /><br />--------------------<br />namespace Microsoft.FSharp.Linq</div>
<div class="tip" id="fs9">namespace System.Threading</div>
<div class="tip" id="fs10">namespace System.Threading.Tasks</div>
<div class="tip" id="fs11">namespace System.Security</div>
<div class="tip" id="fs12">namespace System.Security.Cryptography</div>
<div class="tip" id="fs13">Multiple items<br />namespace System.Collections<br /><br />--------------------<br />namespace Microsoft.FSharp.Collections</div>
<div class="tip" id="fs14">Multiple items<br />type Choice&lt;&#39;T1,&#39;T2&gt; =<br />&#160;&#160;| Choice1Of2 of &#39;T1<br />&#160;&#160;| Choice2Of2 of &#39;T2<br /><br />Full name: Microsoft.FSharp.Core.Choice&lt;_,_&gt;<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3&gt; =<br />&#160;&#160;| Choice1Of3 of &#39;T1<br />&#160;&#160;| Choice2Of3 of &#39;T2<br />&#160;&#160;| Choice3Of3 of &#39;T3<br /><br />Full name: Microsoft.FSharp.Core.Choice&lt;_,_,_&gt;<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3,&#39;T4&gt; =<br />&#160;&#160;| Choice1Of4 of &#39;T1<br />&#160;&#160;| Choice2Of4 of &#39;T2<br />&#160;&#160;| Choice3Of4 of &#39;T3<br />&#160;&#160;| Choice4Of4 of &#39;T4<br /><br />Full name: Microsoft.FSharp.Core.Choice&lt;_,_,_,_&gt;<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3,&#39;T4,&#39;T5&gt; =<br />&#160;&#160;| Choice1Of5 of &#39;T1<br />&#160;&#160;| Choice2Of5 of &#39;T2<br />&#160;&#160;| Choice3Of5 of &#39;T3<br />&#160;&#160;| Choice4Of5 of &#39;T4<br />&#160;&#160;| Choice5Of5 of &#39;T5<br /><br />Full name: Microsoft.FSharp.Core.Choice&lt;_,_,_,_,_&gt;<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3,&#39;T4,&#39;T5,&#39;T6&gt; =<br />&#160;&#160;| Choice1Of6 of &#39;T1<br />&#160;&#160;| Choice2Of6 of &#39;T2<br />&#160;&#160;| Choice3Of6 of &#39;T3<br />&#160;&#160;| Choice4Of6 of &#39;T4<br />&#160;&#160;| Choice5Of6 of &#39;T5<br />&#160;&#160;| Choice6Of6 of &#39;T6<br /><br />Full name: Microsoft.FSharp.Core.Choice&lt;_,_,_,_,_,_&gt;<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3,&#39;T4,&#39;T5,&#39;T6,&#39;T7&gt; =<br />&#160;&#160;| Choice1Of7 of &#39;T1<br />&#160;&#160;| Choice2Of7 of &#39;T2<br />&#160;&#160;| Choice3Of7 of &#39;T3<br />&#160;&#160;| Choice4Of7 of &#39;T4<br />&#160;&#160;| Choice5Of7 of &#39;T5<br />&#160;&#160;| Choice6Of7 of &#39;T6<br />&#160;&#160;| Choice7Of7 of &#39;T7<br /><br />Full name: Microsoft.FSharp.Core.Choice&lt;_,_,_,_,_,_,_&gt;</div>
<div class="tip" id="fs15">module Option<br /><br />from Microsoft.FSharp.Core</div>
<div class="tip" id="fs16">type settings = obj<br /><br />Full name: Protocol.settings</div>
<div class="tip" id="fs17">val baseDir : obj<br /><br />Full name: Protocol.baseDir</div>
<div class="tip" id="fs18">val version : int<br /><br />Full name: Protocol.version</div>
<div class="tip" id="fs19">val connectTimeout : TimeSpan<br /><br />Full name: Protocol.connectTimeout</div>
<div class="tip" id="fs20">Multiple items<br />type TimeSpan =<br />&#160;&#160;struct<br />&#160;&#160;&#160;&#160;new : ticks:int64 -&gt; TimeSpan + 3 overloads<br />&#160;&#160;&#160;&#160;member Add : ts:TimeSpan -&gt; TimeSpan<br />&#160;&#160;&#160;&#160;member CompareTo : value:obj -&gt; int + 1 overload<br />&#160;&#160;&#160;&#160;member Days : int<br />&#160;&#160;&#160;&#160;member Duration : unit -&gt; TimeSpan<br />&#160;&#160;&#160;&#160;member Equals : value:obj -&gt; bool + 1 overload<br />&#160;&#160;&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;&#160;&#160;member Hours : int<br />&#160;&#160;&#160;&#160;member Milliseconds : int<br />&#160;&#160;&#160;&#160;member Minutes : int<br />&#160;&#160;&#160;&#160;...<br />&#160;&#160;end<br /><br />Full name: System.TimeSpan<br /><br />--------------------<br />TimeSpan()<br />TimeSpan(ticks: int64) : unit<br />TimeSpan(hours: int, minutes: int, seconds: int) : unit<br />TimeSpan(days: int, hours: int, minutes: int, seconds: int) : unit<br />TimeSpan(days: int, hours: int, minutes: int, seconds: int, milliseconds: int) : unit</div>
<div class="tip" id="fs21">TimeSpan.FromSeconds(value: float) : TimeSpan</div>
<div class="tip" id="fs22">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.float<br /><br />--------------------<br />type float = Double<br /><br />Full name: Microsoft.FSharp.Core.float<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; = float<br /><br />Full name: Microsoft.FSharp.Core.float&lt;_&gt;</div>
<div class="tip" id="fs23">val handshakeTimeout : TimeSpan<br /><br />Full name: Protocol.handshakeTimeout</div>
<div class="tip" id="fs24">val commandTimeout : TimeSpan<br /><br />Full name: Protocol.commandTimeout</div>
<div class="tip" id="fs25">val minGetdataBatchSize : obj<br /><br />Full name: Protocol.minGetdataBatchSize</div>
<div class="tip" id="fs26">val maxGetdataBatchSize : obj<br /><br />Full name: Protocol.maxGetdataBatchSize</div>
<div class="tip" id="fs27">val coinbaseMaturity : int<br /><br />Full name: Protocol.coinbaseMaturity</div>
<div class="tip" id="fs28">val maxBlockSize : int<br /><br />Full name: Protocol.maxBlockSize</div>
<div class="tip" id="fs29">val maxMoney : int64<br /><br />Full name: Protocol.maxMoney</div>
<div class="tip" id="fs30">val defaultArg : arg:&#39;T option -&gt; defaultValue:&#39;T -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.Operators.defaultArg</div>
<div class="tip" id="fs31">val txInvType : int<br /><br />Full name: Protocol.txInvType</div>
<div class="tip" id="fs32">val blockInvType : int<br /><br />Full name: Protocol.blockInvType</div>
<div class="tip" id="fs33">val filteredBlockInvType : int<br /><br />Full name: Protocol.filteredBlockInvType</div>
<div class="tip" id="fs34">val zeroHash : byte []<br /><br />Full name: Protocol.zeroHash</div>
<div class="tip" id="fs35">Multiple items<br />val byte : value:&#39;T -&gt; byte (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.byte<br /><br />--------------------<br />type byte = Byte<br /><br />Full name: Microsoft.FSharp.Core.byte</div>
<div class="tip" id="fs36">type Array =<br />&#160;&#160;member Clone : unit -&gt; obj<br />&#160;&#160;member CopyTo : array:Array * index:int -&gt; unit + 1 overload<br />&#160;&#160;member GetEnumerator : unit -&gt; IEnumerator<br />&#160;&#160;member GetLength : dimension:int -&gt; int<br />&#160;&#160;member GetLongLength : dimension:int -&gt; int64<br />&#160;&#160;member GetLowerBound : dimension:int -&gt; int<br />&#160;&#160;member GetUpperBound : dimension:int -&gt; int<br />&#160;&#160;member GetValue : params indices:int[] -&gt; obj + 7 overloads<br />&#160;&#160;member Initialize : unit -&gt; unit<br />&#160;&#160;member IsFixedSize : bool<br />&#160;&#160;...<br /><br />Full name: System.Array</div>
<div class="tip" id="fs37">val zeroCreate : count:int -&gt; &#39;T []<br /><br />Full name: Microsoft.FSharp.Collections.Array.zeroCreate</div>
<div class="tip" id="fs38">val random : Random<br /><br />Full name: Protocol.random</div>
<div class="tip" id="fs39">Multiple items<br />type Random =<br />&#160;&#160;new : unit -&gt; Random + 1 overload<br />&#160;&#160;member Next : unit -&gt; int + 2 overloads<br />&#160;&#160;member NextBytes : buffer:byte[] -&gt; unit<br />&#160;&#160;member NextDouble : unit -&gt; float<br /><br />Full name: System.Random<br /><br />--------------------<br />Random() : unit<br />Random(Seed: int) : unit</div>
<div class="tip" id="fs40">exception ValidationException of string<br /><br />Full name: Protocol.ValidationException</div>
<div class="tip" id="fs41">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.Operators.string<br /><br />--------------------<br />type string = String<br /><br />Full name: Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs42">val either : obj<br /><br />Full name: Protocol.either</div>
<div class="tip" id="fs43">val maybe : obj<br /><br />Full name: Protocol.maybe</div>
<div class="tip" id="fs44">val iterate : f:(&#39;a -&gt; &#39;a) -&gt; value:&#39;a -&gt; seq&lt;&#39;a&gt;<br /><br />Full name: Protocol.iterate</div>
<div class="tip" id="fs45">val f : (&#39;a -&gt; &#39;a)</div>
<div class="tip" id="fs46">val value : &#39;a</div>
<div class="tip" id="fs47">Multiple items<br />val seq : sequence:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Core.Operators.seq<br /><br />--------------------<br />type seq&lt;&#39;T&gt; = IEnumerable&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.seq&lt;_&gt;</div>
<div class="tip" id="fs48">val revFind : arr:byte [] -&gt; f:(byte -&gt; bool) -&gt; int<br /><br />Full name: Protocol.revFind</div>
<div class="tip" id="fs49">val arr : byte []</div>
<div class="tip" id="fs50">val f : (byte -&gt; bool)</div>
<div class="tip" id="fs51">type bool = Boolean<br /><br />Full name: Microsoft.FSharp.Core.bool</div>
<div class="tip" id="fs52">val rf : (int -&gt; int)</div>
<div class="tip" id="fs53">val i : int</div>
<div class="tip" id="fs54">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int<br /><br />--------------------<br />type int = int32<br /><br />Full name: Microsoft.FSharp.Core.int<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; = int<br /><br />Full name: Microsoft.FSharp.Core.int&lt;_&gt;</div>
<div class="tip" id="fs55">property Array.Length: int</div>
<div class="tip" id="fs56">val logger : obj<br /><br />Full name: Protocol.logger</div>
<div class="tip" id="fs57">module Printf<br /><br />from Microsoft.FSharp.Core</div>
<div class="tip" id="fs58">val ksprintf : continutation:(string -&gt; &#39;Result) -&gt; format:Printf.StringFormat&lt;&#39;T,&#39;Result&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.Printf.ksprintf</div>
<div class="tip" id="fs59">Multiple items<br />type HashCompare =<br />&#160;&#160;interface IEqualityComparer&lt;byte []&gt;<br />&#160;&#160;new : unit -&gt; HashCompare<br /><br />Full name: Protocol.HashCompare<br /><br />--------------------<br />new : unit -&gt; HashCompare</div>
<div class="tip" id="fs60">Multiple items<br />type IEqualityComparer =<br />&#160;&#160;member Equals : x:obj * y:obj -&gt; bool<br />&#160;&#160;member GetHashCode : obj:obj -&gt; int<br /><br />Full name: System.Collections.IEqualityComparer<br /><br />--------------------<br />type IEqualityComparer&lt;&#39;T&gt; =<br />&#160;&#160;member Equals : x:&#39;T * y:&#39;T -&gt; bool<br />&#160;&#160;member GetHashCode : obj:&#39;T -&gt; int<br /><br />Full name: System.Collections.Generic.IEqualityComparer&lt;_&gt;</div>
<div class="tip" id="fs61">val x : HashCompare</div>
<div class="tip" id="fs62">override HashCompare.Equals : left:byte [] * right:byte [] -&gt; bool<br /><br />Full name: Protocol.HashCompare.Equals</div>
<div class="tip" id="fs63">val left : byte []</div>
<div class="tip" id="fs64">val right : byte []</div>
<div class="tip" id="fs65">type StructuralComparisons =<br />&#160;&#160;static member StructuralComparer : IComparer<br />&#160;&#160;static member StructuralEqualityComparer : IEqualityComparer<br /><br />Full name: System.Collections.StructuralComparisons</div>
<div class="tip" id="fs66">property StructuralComparisons.StructuralEqualityComparer: IEqualityComparer</div>
<div class="tip" id="fs67">Object.Equals(obj: obj) : bool<br />IEqualityComparer.Equals(x: obj, y: obj) : bool</div>
<div class="tip" id="fs68">override HashCompare.GetHashCode : hash:byte [] -&gt; int<br /><br />Full name: Protocol.HashCompare.GetHashCode</div>
<div class="tip" id="fs69">val hash : byte []</div>
<div class="tip" id="fs70">Object.GetHashCode() : int<br />IEqualityComparer.GetHashCode(obj: obj) : int</div>
<div class="tip" id="fs71">Multiple items<br />type Async =<br />&#160;&#160;static member AsObservable : op:Async&lt;&#39;a&gt; -&gt; &#39;a0<br /><br />Full name: Protocol.Async<br /><br />--------------------<br />type Async&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Control.Async&lt;_&gt;</div>
<div class="tip" id="fs72">static member Async.AsObservable : op:Async&lt;&#39;a&gt; -&gt; &#39;a0<br /><br />Full name: Protocol.Async.AsObservable</div>
<div class="tip" id="fs73">val op : Async&lt;&#39;a&gt;</div>
<div class="tip" id="fs74">module Observable<br /><br />from Microsoft.FSharp.Control</div>
<div class="tip" id="fs75">type IObserver&lt;&#39;T&gt; =<br />&#160;&#160;member OnCompleted : unit -&gt; unit<br />&#160;&#160;member OnError : error:Exception -&gt; unit<br />&#160;&#160;member OnNext : value:&#39;T -&gt; unit<br /><br />Full name: System.IObserver&lt;_&gt;</div>
<div class="tip" id="fs76">static member Async.StartWithContinuations : computation:Async&lt;&#39;T&gt; * continuation:(&#39;T -&gt; unit) * exceptionContinuation:(exn -&gt; unit) * cancellationContinuation:(OperationCanceledException -&gt; unit) * ?cancellationToken:Threading.CancellationToken -&gt; unit</div>
<div class="tip" id="fs77">val ignore : value:&#39;T -&gt; unit<br /><br />Full name: Microsoft.FSharp.Core.Operators.ignore</div>
<div class="tip" id="fs78">Multiple items<br />module Option<br /><br />from Microsoft.FSharp.Core<br /><br />--------------------<br />type Option =<br />&#160;&#160;static member iterSecond : f:(unit -&gt; unit) -&gt; opt:Option&lt;&#39;a&gt; -&gt; Option&lt;&#39;a&gt;<br /><br />Full name: Protocol.Option</div>
<div class="tip" id="fs79">static member Option.iterSecond : f:(unit -&gt; unit) -&gt; opt:Option&lt;&#39;a&gt; -&gt; Option&lt;&#39;a&gt;<br /><br />Full name: Protocol.Option.iterSecond</div>
<div class="tip" id="fs80">val f : (unit -&gt; unit)</div>
<div class="tip" id="fs81">type unit = Unit<br /><br />Full name: Microsoft.FSharp.Core.unit</div>
<div class="tip" id="fs82">val opt : Option&lt;&#39;a&gt;</div>
<div class="tip" id="fs83">property Option.IsNone: bool</div>
<div class="tip" id="fs84">val errorIfFalse : errorMsg:string -&gt; b:bool -&gt; Option&lt;&#39;a&gt;<br /><br />Full name: Protocol.errorIfFalse</div>
<div class="tip" id="fs85">val errorMsg : string</div>
<div class="tip" id="fs86">val b : bool</div>
<div class="tip" id="fs87">static member Option.iterSecond : f:(unit -&gt; unit) -&gt; opt:Option&lt;&#39;a&gt; -&gt; Option&lt;&#39;a&gt;</div>
<div class="tip" id="fs88">val hashBlock : digest:(unit -&gt; HashAlgorithm) -&gt; input:byte [] -&gt; byte []<br /><br />Full name: Protocol.hashBlock</div>
<div class="tip" id="fs89">val digest : (unit -&gt; HashAlgorithm)</div>
<div class="tip" id="fs90">type HashAlgorithm =<br />&#160;&#160;member CanReuseTransform : bool<br />&#160;&#160;member CanTransformMultipleBlocks : bool<br />&#160;&#160;member Clear : unit -&gt; unit<br />&#160;&#160;member ComputeHash : inputStream:Stream -&gt; byte[] + 2 overloads<br />&#160;&#160;member Dispose : unit -&gt; unit<br />&#160;&#160;member Hash : byte[]<br />&#160;&#160;member HashSize : int<br />&#160;&#160;member Initialize : unit -&gt; unit<br />&#160;&#160;member InputBlockSize : int<br />&#160;&#160;member OutputBlockSize : int<br />&#160;&#160;...<br /><br />Full name: System.Security.Cryptography.HashAlgorithm</div>
<div class="tip" id="fs91">val input : byte []</div>
<div class="tip" id="fs92">val ripe160 : (byte [] -&gt; byte [])<br /><br />Full name: Protocol.ripe160</div>
<div class="tip" id="fs93">Multiple items<br />type RIPEMD160Managed =<br />&#160;&#160;inherit RIPEMD160<br />&#160;&#160;new : unit -&gt; RIPEMD160Managed<br />&#160;&#160;member Initialize : unit -&gt; unit<br /><br />Full name: System.Security.Cryptography.RIPEMD160Managed<br /><br />--------------------<br />RIPEMD160Managed() : unit</div>
<div class="tip" id="fs94">val sha1 : (byte [] -&gt; byte [])<br /><br />Full name: Protocol.sha1</div>
<div class="tip" id="fs95">Multiple items<br />type SHA1Managed =<br />&#160;&#160;inherit SHA1<br />&#160;&#160;new : unit -&gt; SHA1Managed<br />&#160;&#160;member Initialize : unit -&gt; unit<br /><br />Full name: System.Security.Cryptography.SHA1Managed<br /><br />--------------------<br />SHA1Managed() : unit</div>
<div class="tip" id="fs96">val sha256 : (byte [] -&gt; byte [])<br /><br />Full name: Protocol.sha256</div>
<div class="tip" id="fs97">Multiple items<br />type SHA256Managed =<br />&#160;&#160;inherit SHA256<br />&#160;&#160;new : unit -&gt; SHA256Managed<br />&#160;&#160;member Initialize : unit -&gt; unit<br /><br />Full name: System.Security.Cryptography.SHA256Managed<br /><br />--------------------<br />SHA256Managed() : unit</div>
<div class="tip" id="fs98">val hash160 : (byte [] -&gt; byte [])<br /><br />Full name: Protocol.hash160</div>
<div class="tip" id="fs99">val dsha : (byte [] -&gt; byte [])<br /><br />Full name: Protocol.dsha</div>
<div class="tip" id="fs100">val hashFromHex : s:String -&gt; #Array<br /><br />Full name: Protocol.hashFromHex</div>
<div class="tip" id="fs101">val s : String</div>
<div class="tip" id="fs102">Multiple items<br />type String =<br />&#160;&#160;new : value:char -&gt; string + 7 overloads<br />&#160;&#160;member Chars : int -&gt; char<br />&#160;&#160;member Clone : unit -&gt; obj<br />&#160;&#160;member CompareTo : value:obj -&gt; int + 1 overload<br />&#160;&#160;member Contains : value:string -&gt; bool<br />&#160;&#160;member CopyTo : sourceIndex:int * destination:char[] * destinationIndex:int * count:int -&gt; unit<br />&#160;&#160;member EndsWith : value:string -&gt; bool + 2 overloads<br />&#160;&#160;member Equals : obj:obj -&gt; bool + 2 overloads<br />&#160;&#160;member GetEnumerator : unit -&gt; CharEnumerator<br />&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;...<br /><br />Full name: System.String<br /><br />--------------------<br />String(value: nativeptr&lt;char&gt;) : unit<br />String(value: nativeptr&lt;sbyte&gt;) : unit<br />String(value: char []) : unit<br />String(c: char, count: int) : unit<br />String(value: nativeptr&lt;char&gt;, startIndex: int, length: int) : unit<br />String(value: nativeptr&lt;sbyte&gt;, startIndex: int, length: int) : unit<br />String(value: char [], startIndex: int, length: int) : unit<br />String(value: nativeptr&lt;sbyte&gt;, startIndex: int, length: int, enc: Encoding) : unit</div>
<div class="tip" id="fs103">val h : #Array</div>
<div class="tip" id="fs104">Array.Reverse(array: Array) : unit<br />Array.Reverse(array: Array, index: int, length: int) : unit</div>
<div class="tip" id="fs105">val hashToHex : h:byte [] -&gt; &#39;a<br /><br />Full name: Protocol.hashToHex</div>
<div class="tip" id="fs106">val h : byte []</div>
<div class="tip" id="fs107">val rh : byte []</div>
<div class="tip" id="fs108">val copy : array:&#39;T [] -&gt; &#39;T []<br /><br />Full name: Microsoft.FSharp.Collections.Array.copy</div>
<div class="tip" id="fs109">val rev : array:&#39;T [] -&gt; &#39;T []<br /><br />Full name: Microsoft.FSharp.Collections.Array.rev</div>
<div class="tip" id="fs110">val ToBinaryArray : f:(BinaryWriter -&gt; unit) -&gt; byte []<br /><br />Full name: Protocol.ToBinaryArray</div>
<div class="tip" id="fs111">val f : (BinaryWriter -&gt; unit)</div>
<div class="tip" id="fs112">Multiple items<br />type BinaryWriter =<br />&#160;&#160;new : output:Stream -&gt; BinaryWriter + 1 overload<br />&#160;&#160;member BaseStream : Stream<br />&#160;&#160;member Close : unit -&gt; unit<br />&#160;&#160;member Dispose : unit -&gt; unit<br />&#160;&#160;member Flush : unit -&gt; unit<br />&#160;&#160;member Seek : offset:int * origin:SeekOrigin -&gt; int64<br />&#160;&#160;member Write : value:bool -&gt; unit + 17 overloads<br />&#160;&#160;static val Null : BinaryWriter<br /><br />Full name: System.IO.BinaryWriter<br /><br />--------------------<br />BinaryWriter(output: Stream) : unit<br />BinaryWriter(output: Stream, encoding: Encoding) : unit</div>
<div class="tip" id="fs113">val ms : MemoryStream</div>
<div class="tip" id="fs114">Multiple items<br />type MemoryStream =<br />&#160;&#160;inherit Stream<br />&#160;&#160;new : unit -&gt; MemoryStream + 6 overloads<br />&#160;&#160;member CanRead : bool<br />&#160;&#160;member CanSeek : bool<br />&#160;&#160;member CanWrite : bool<br />&#160;&#160;member Capacity : int with get, set<br />&#160;&#160;member Flush : unit -&gt; unit<br />&#160;&#160;member GetBuffer : unit -&gt; byte[]<br />&#160;&#160;member Length : int64<br />&#160;&#160;member Position : int64 with get, set<br />&#160;&#160;member Read : buffer:byte[] * offset:int * count:int -&gt; int<br />&#160;&#160;...<br /><br />Full name: System.IO.MemoryStream<br /><br />--------------------<br />MemoryStream() : unit<br />MemoryStream(capacity: int) : unit<br />MemoryStream(buffer: byte []) : unit<br />MemoryStream(buffer: byte [], writable: bool) : unit<br />MemoryStream(buffer: byte [], index: int, count: int) : unit<br />MemoryStream(buffer: byte [], index: int, count: int, writable: bool) : unit<br />MemoryStream(buffer: byte [], index: int, count: int, writable: bool, publiclyVisible: bool) : unit</div>
<div class="tip" id="fs115">val os : BinaryWriter</div>
<div class="tip" id="fs116">MemoryStream.ToArray() : byte []</div>
<div class="tip" id="fs117">val ParseByteArray : b:byte [] -&gt; f:(BinaryReader -&gt; &#39;a) -&gt; &#39;a<br /><br />Full name: Protocol.ParseByteArray</div>
<div class="tip" id="fs118">val b : byte []</div>
<div class="tip" id="fs119">val f : (BinaryReader -&gt; &#39;a)</div>
<div class="tip" id="fs120">Multiple items<br />type BinaryReader =<br />&#160;&#160;new : input:Stream -&gt; BinaryReader + 1 overload<br />&#160;&#160;member BaseStream : Stream<br />&#160;&#160;member Close : unit -&gt; unit<br />&#160;&#160;member Dispose : unit -&gt; unit<br />&#160;&#160;member PeekChar : unit -&gt; int<br />&#160;&#160;member Read : unit -&gt; int + 2 overloads<br />&#160;&#160;member ReadBoolean : unit -&gt; bool<br />&#160;&#160;member ReadByte : unit -&gt; byte<br />&#160;&#160;member ReadBytes : count:int -&gt; byte[]<br />&#160;&#160;member ReadChar : unit -&gt; char<br />&#160;&#160;...<br /><br />Full name: System.IO.BinaryReader<br /><br />--------------------<br />BinaryReader(input: Stream) : unit<br />BinaryReader(input: Stream, encoding: Encoding) : unit</div>
<div class="tip" id="fs121">val reader : BinaryReader</div>
<div class="tip" id="fs122">type Encoding =<br />&#160;&#160;member BodyName : string<br />&#160;&#160;member Clone : unit -&gt; obj<br />&#160;&#160;member CodePage : int<br />&#160;&#160;member DecoderFallback : DecoderFallback with get, set<br />&#160;&#160;member EncoderFallback : EncoderFallback with get, set<br />&#160;&#160;member EncodingName : string<br />&#160;&#160;member Equals : value:obj -&gt; bool<br />&#160;&#160;member GetByteCount : chars:char[] -&gt; int + 3 overloads<br />&#160;&#160;member GetBytes : chars:char[] -&gt; byte[] + 5 overloads<br />&#160;&#160;member GetCharCount : bytes:byte[] -&gt; int + 2 overloads<br />&#160;&#160;...<br /><br />Full name: System.Text.Encoding</div>
<div class="tip" id="fs123">property Encoding.ASCII: Encoding</div>
<div class="tip" id="fs124">val x : BinaryReader</div>
<div class="tip" id="fs125">member BinaryReader.ReadVarInt : unit -&gt; int<br /><br />Full name: Protocol.ReadVarInt</div>
<div class="tip" id="fs126">val b : byte</div>
<div class="tip" id="fs127">BinaryReader.ReadByte() : byte</div>
<div class="tip" id="fs128">BinaryReader.ReadUInt16() : uint16</div>
<div class="tip" id="fs129">BinaryReader.ReadUInt32() : uint32</div>
<div class="tip" id="fs130">BinaryReader.ReadUInt64() : uint64</div>
<div class="tip" id="fs131">member BinaryReader.ReadVarString : unit -&gt; string<br /><br />Full name: Protocol.ReadVarString</div>
<div class="tip" id="fs132">Encoding.GetString(bytes: byte []) : string<br />Encoding.GetString(bytes: byte [], index: int, count: int) : string</div>
<div class="tip" id="fs133">member BinaryReader.ReadScript : unit -&gt; byte []</div>
<div class="tip" id="fs134">member BinaryReader.ReadScript : unit -&gt; byte []<br /><br />Full name: Protocol.ReadScript</div>
<div class="tip" id="fs135">val length : int</div>
<div class="tip" id="fs136">member BinaryReader.ReadVarInt : unit -&gt; int</div>
<div class="tip" id="fs137">BinaryReader.ReadBytes(count: int) : byte []</div>
<div class="tip" id="fs138">val x : BinaryWriter</div>
<div class="tip" id="fs139">member BinaryWriter.WriteVarInt : i:int -&gt; unit<br /><br />Full name: Protocol.WriteVarInt</div>
<div class="tip" id="fs140">BinaryWriter.Write(value: string) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />BinaryWriter.Write(value: float32) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />BinaryWriter.Write(value: uint64) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />BinaryWriter.Write(value: int64) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />BinaryWriter.Write(value: uint32) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />BinaryWriter.Write(value: int) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />BinaryWriter.Write(value: uint16) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />BinaryWriter.Write(value: int16) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />BinaryWriter.Write(value: decimal) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />BinaryWriter.Write(value: float) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em></div>
<div class="tip" id="fs141">Multiple items<br />val int16 : value:&#39;T -&gt; int16 (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int16<br /><br />--------------------<br />type int16 = Int16<br /><br />Full name: Microsoft.FSharp.Core.int16<br /><br />--------------------<br />type int16&lt;&#39;Measure&gt; = int16<br /><br />Full name: Microsoft.FSharp.Core.int16&lt;_&gt;</div>
<div class="tip" id="fs142">Multiple items<br />val int32 : value:&#39;T -&gt; int32 (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int32<br /><br />--------------------<br />type int32 = Int32<br /><br />Full name: Microsoft.FSharp.Core.int32</div>
<div class="tip" id="fs143">member BinaryWriter.WriteVarString : s:string -&gt; unit<br /><br />Full name: Protocol.WriteVarString</div>
<div class="tip" id="fs144">val s : string</div>
<div class="tip" id="fs145">member BinaryWriter.WriteVarInt : i:int -&gt; unit</div>
<div class="tip" id="fs146">property String.Length: int</div>
<div class="tip" id="fs147">Encoding.GetBytes(s: string) : byte []<br />Encoding.GetBytes(chars: char []) : byte []<br />Encoding.GetBytes(chars: char [], index: int, count: int) : byte []<br />Encoding.GetBytes(chars: nativeptr&lt;char&gt;, charCount: int, bytes: nativeptr&lt;byte&gt;, byteCount: int) : int<br />Encoding.GetBytes(s: string, charIndex: int, charCount: int, bytes: byte [], byteIndex: int) : int<br />Encoding.GetBytes(chars: char [], charIndex: int, charCount: int, bytes: byte [], byteIndex: int) : int</div>
<div class="tip" id="fs148">member BinaryWriter.WriteScript : b:byte [] -&gt; unit<br /><br />Full name: Protocol.WriteScript</div>
<div class="tip" id="fs149">Multiple items<br />type NetworkAddr =<br />&#160;&#160;new : ip:IPEndPoint -&gt; NetworkAddr<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;member EndPoint : IPEndPoint<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; NetworkAddr<br />&#160;&#160;static member MyAddress : NetworkAddr<br /><br />Full name: Protocol.NetworkAddr<br /><br />--------------------<br />new : ip:IPEndPoint -&gt; NetworkAddr</div>
<div class="tip" id="fs150">val ip : IPEndPoint</div>
<div class="tip" id="fs151">Multiple items<br />type IPEndPoint =<br />&#160;&#160;inherit EndPoint<br />&#160;&#160;new : address:int64 * port:int -&gt; IPEndPoint + 1 overload<br />&#160;&#160;member Address : IPAddress with get, set<br />&#160;&#160;member AddressFamily : AddressFamily<br />&#160;&#160;member Create : socketAddress:SocketAddress -&gt; EndPoint<br />&#160;&#160;member Equals : comparand:obj -&gt; bool<br />&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;member Port : int with get, set<br />&#160;&#160;member Serialize : unit -&gt; SocketAddress<br />&#160;&#160;member ToString : unit -&gt; string<br />&#160;&#160;static val MinPort : int<br />&#160;&#160;...<br /><br />Full name: System.Net.IPEndPoint<br /><br />--------------------<br />IPEndPoint(address: int64, port: int) : unit<br />IPEndPoint(address: IPAddress, port: int) : unit</div>
<div class="tip" id="fs152">static member NetworkAddr.MyAddress : NetworkAddr<br /><br />Full name: Protocol.NetworkAddr.MyAddress</div>
<div class="tip" id="fs153">Multiple items<br />type IPAddress =<br />&#160;&#160;new : newAddress:int64 -&gt; IPAddress + 2 overloads<br />&#160;&#160;member Address : int64 with get, set<br />&#160;&#160;member AddressFamily : AddressFamily<br />&#160;&#160;member Equals : comparand:obj -&gt; bool<br />&#160;&#160;member GetAddressBytes : unit -&gt; byte[]<br />&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;member IsIPv6LinkLocal : bool<br />&#160;&#160;member IsIPv6Multicast : bool<br />&#160;&#160;member IsIPv6SiteLocal : bool<br />&#160;&#160;member IsIPv6Teredo : bool<br />&#160;&#160;...<br /><br />Full name: System.Net.IPAddress<br /><br />--------------------<br />IPAddress(newAddress: int64) : unit<br />IPAddress(address: byte []) : unit<br />IPAddress(address: byte [], scopeid: int64) : unit</div>
<div class="tip" id="fs154">IPAddress.Parse(ipString: string) : IPAddress</div>
<div class="tip" id="fs155">val x : NetworkAddr</div>
<div class="tip" id="fs156">member NetworkAddr.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.NetworkAddr.ToByteArray</div>
<div class="tip" id="fs157">property IPEndPoint.Address: IPAddress</div>
<div class="tip" id="fs158">IPAddress.GetAddressBytes() : byte []</div>
<div class="tip" id="fs159">property IPEndPoint.Port: int</div>
<div class="tip" id="fs160">static member NetworkAddr.Parse : reader:BinaryReader -&gt; NetworkAddr<br /><br />Full name: Protocol.NetworkAddr.Parse</div>
<div class="tip" id="fs161">val ip : byte []</div>
<div class="tip" id="fs162">val ipAddress : IPAddress</div>
<div class="tip" id="fs163">val port : int</div>
<div class="tip" id="fs164">Multiple items<br />val uint16 : value:&#39;T -&gt; uint16 (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.uint16<br /><br />--------------------<br />type uint16 = UInt16<br /><br />Full name: Microsoft.FSharp.Core.uint16</div>
<div class="tip" id="fs165">IPAddress.NetworkToHostOrder(network: int16) : int16<br />IPAddress.NetworkToHostOrder(network: int) : int<br />IPAddress.NetworkToHostOrder(network: int64) : int64</div>
<div class="tip" id="fs166">BinaryReader.ReadInt16() : int16</div>
<div class="tip" id="fs167">type EndPoint =<br />&#160;&#160;member AddressFamily : AddressFamily<br />&#160;&#160;member Create : socketAddress:SocketAddress -&gt; EndPoint<br />&#160;&#160;member Serialize : unit -&gt; SocketAddress<br /><br />Full name: System.Net.EndPoint</div>
<div class="tip" id="fs168">Multiple items<br />type Version =<br />&#160;&#160;new : version:int32 * services:int64 * timestamp:int64 * recv:byte [] * from:byte [] * nonce:int64 * userAgent:string * height:int32 * relay:byte -&gt; Version<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;member From : byte []<br />&#160;&#160;member Height : int32<br />&#160;&#160;member Recv : byte []<br />&#160;&#160;member Relay : byte<br />&#160;&#160;member UserAgent : string<br />&#160;&#160;static member Create : timestamp:&#39;a * recv:IPEndPoint * from:IPEndPoint * nonce:int64 * userAgent:string * height:int32 * relay:byte -&gt; Version<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; Version<br /><br />Full name: Protocol.Version<br /><br />--------------------<br />new : version:int32 * services:int64 * timestamp:int64 * recv:byte [] * from:byte [] * nonce:int64 * userAgent:string * height:int32 * relay:byte -&gt; Version</div>
<div class="tip" id="fs169">val version : int32</div>
<div class="tip" id="fs170">val services : int64</div>
<div class="tip" id="fs171">Multiple items<br />val int64 : value:&#39;T -&gt; int64 (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int64<br /><br />--------------------<br />type int64 = Int64<br /><br />Full name: Microsoft.FSharp.Core.int64<br /><br />--------------------<br />type int64&lt;&#39;Measure&gt; = int64<br /><br />Full name: Microsoft.FSharp.Core.int64&lt;_&gt;</div>
<div class="tip" id="fs172">val timestamp : int64</div>
<div class="tip" id="fs173">val recv : byte []</div>
<div class="tip" id="fs174">val from : byte []</div>
<div class="tip" id="fs175">val nonce : int64</div>
<div class="tip" id="fs176">val userAgent : string</div>
<div class="tip" id="fs177">val height : int32</div>
<div class="tip" id="fs178">val relay : byte</div>
<div class="tip" id="fs179">val x : Version</div>
<div class="tip" id="fs180">member Version.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.Version.ToByteArray</div>
<div class="tip" id="fs181">member BinaryWriter.WriteVarString : s:string -&gt; unit</div>
<div class="tip" id="fs182">static member Version.Create : timestamp:&#39;a * recv:IPEndPoint * from:IPEndPoint * nonce:int64 * userAgent:string * height:int32 * relay:byte -&gt; Version<br /><br />Full name: Protocol.Version.Create</div>
<div class="tip" id="fs183">val timestamp : &#39;a</div>
<div class="tip" id="fs184">val recv : IPEndPoint</div>
<div class="tip" id="fs185">val from : IPEndPoint</div>
<div class="tip" id="fs186">static member Version.Parse : reader:BinaryReader -&gt; Version<br /><br />Full name: Protocol.Version.Parse</div>
<div class="tip" id="fs187">val version : int</div>
<div class="tip" id="fs188">BinaryReader.ReadInt32() : int</div>
<div class="tip" id="fs189">BinaryReader.ReadInt64() : int64</div>
<div class="tip" id="fs190">member BinaryReader.ReadVarString : unit -&gt; string</div>
<div class="tip" id="fs191">val height : int</div>
<div class="tip" id="fs192">type AddrEntry =<br />&#160;&#160;{Timestamp: int32;<br />&#160;&#160;&#160;Address: NetworkAddr;}<br /><br />Full name: Protocol.AddrEntry</div>
<div class="tip" id="fs193">AddrEntry.Timestamp: int32</div>
<div class="tip" id="fs194">AddrEntry.Address: NetworkAddr</div>
<div class="tip" id="fs195">Multiple items<br />type Addr =<br />&#160;&#160;new : addrs:AddrEntry [] -&gt; Addr<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;member Addrs : AddrEntry []<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; Addr<br /><br />Full name: Protocol.Addr<br /><br />--------------------<br />new : addrs:AddrEntry [] -&gt; Addr</div>
<div class="tip" id="fs196">val addrs : AddrEntry []</div>
<div class="tip" id="fs197">val x : Addr</div>
<div class="tip" id="fs198">member Addr.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.Addr.ToByteArray</div>
<div class="tip" id="fs199">val addr : AddrEntry</div>
<div class="tip" id="fs200">member NetworkAddr.ToByteArray : unit -&gt; byte []</div>
<div class="tip" id="fs201">static member Addr.Parse : reader:BinaryReader -&gt; Addr<br /><br />Full name: Protocol.Addr.Parse</div>
<div class="tip" id="fs202">val count : int</div>
<div class="tip" id="fs203">val timestamp : int</div>
<div class="tip" id="fs204">val nodeAddr : NetworkAddr</div>
<div class="tip" id="fs205">static member NetworkAddr.Parse : reader:BinaryReader -&gt; NetworkAddr</div>
<div class="tip" id="fs206">module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs207">val toArray : source:seq&lt;&#39;T&gt; -&gt; &#39;T []<br /><br />Full name: Microsoft.FSharp.Collections.Seq.toArray</div>
<div class="tip" id="fs208">Multiple items<br />type GetHeaders =<br />&#160;&#160;new : hashes:byte [] list * hashStop:byte [] -&gt; GetHeaders<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;override ToString : unit -&gt; string<br />&#160;&#160;member HashStop : byte []<br />&#160;&#160;member Hashes : byte [] list<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; GetHeaders<br /><br />Full name: Protocol.GetHeaders<br /><br />--------------------<br />new : hashes:byte [] list * hashStop:byte [] -&gt; GetHeaders</div>
<div class="tip" id="fs209">val hashes : byte [] list</div>
<div class="tip" id="fs210">type &#39;T list = List&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.list&lt;_&gt;</div>
<div class="tip" id="fs211">val hashStop : byte []</div>
<div class="tip" id="fs212">val x : GetHeaders</div>
<div class="tip" id="fs213">member GetHeaders.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.GetHeaders.ToByteArray</div>
<div class="tip" id="fs214">val length : source:seq&lt;&#39;T&gt; -&gt; int<br /><br />Full name: Microsoft.FSharp.Collections.Seq.length</div>
<div class="tip" id="fs215">static member GetHeaders.Parse : reader:BinaryReader -&gt; GetHeaders<br /><br />Full name: Protocol.GetHeaders.Parse</div>
<div class="tip" id="fs216">val hashCount : int</div>
<div class="tip" id="fs217">val toList : source:seq&lt;&#39;T&gt; -&gt; &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.Seq.toList</div>
<div class="tip" id="fs218">override GetHeaders.ToString : unit -&gt; string<br /><br />Full name: Protocol.GetHeaders.ToString</div>
<div class="tip" id="fs219">val sprintf : format:Printf.StringFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.sprintf</div>
<div class="tip" id="fs220">val head : source:seq&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Collections.Seq.head</div>
<div class="tip" id="fs221">Multiple items<br />type BlockHeaderCompare =<br />&#160;&#160;interface IEqualityComparer&lt;BlockHeader&gt;<br />&#160;&#160;new : unit -&gt; BlockHeaderCompare<br /><br />Full name: Protocol.BlockHeaderCompare<br /><br />--------------------<br />new : unit -&gt; BlockHeaderCompare</div>
<div class="tip" id="fs222">val hashCompare : IEqualityComparer&lt;byte []&gt;</div>
<div class="tip" id="fs223">Multiple items<br />type BlockHeader =<br />&#160;&#160;new : hash:byte [] -&gt; BlockHeader<br />&#160;&#160;new : hash:byte [] * version:int * prevBlockHash:byte [] * merkleRoot:byte [] * timestamp:uint32 * bits:int * nonce:int * txCount:int -&gt; BlockHeader<br />&#160;&#160;member ToByteArray : nocount:bool -&gt; full:bool -&gt; byte []<br />&#160;&#160;override ToString : unit -&gt; string<br />&#160;&#160;member Bits : int<br />&#160;&#160;member Hash : byte []<br />&#160;&#160;member Height : int<br />&#160;&#160;member IsMain : bool<br />&#160;&#160;member MerkleRoot : byte []<br />&#160;&#160;member NextHash : byte []<br />&#160;&#160;...<br /><br />Full name: Protocol.BlockHeader<br /><br />--------------------<br />new : hash:byte [] -&gt; BlockHeader<br />new : hash:byte [] * version:int * prevBlockHash:byte [] * merkleRoot:byte [] * timestamp:uint32 * bits:int * nonce:int * txCount:int -&gt; BlockHeader</div>
<div class="tip" id="fs224">val x : BlockHeaderCompare</div>
<div class="tip" id="fs225">override BlockHeaderCompare.Equals : left:BlockHeader * right:BlockHeader -&gt; bool<br /><br />Full name: Protocol.BlockHeaderCompare.Equals</div>
<div class="tip" id="fs226">val left : BlockHeader</div>
<div class="tip" id="fs227">val right : BlockHeader</div>
<div class="tip" id="fs228">type obj = Object<br /><br />Full name: Microsoft.FSharp.Core.obj</div>
<div class="tip" id="fs229">Object.ReferenceEquals(objA: obj, objB: obj) : bool</div>
<div class="tip" id="fs230">Object.Equals(obj: obj) : bool<br />IEqualityComparer.Equals(x: byte [], y: byte []) : bool</div>
<div class="tip" id="fs231">property BlockHeader.Hash: byte []</div>
<div class="tip" id="fs232">override BlockHeaderCompare.GetHashCode : header:BlockHeader -&gt; int<br /><br />Full name: Protocol.BlockHeaderCompare.GetHashCode</div>
<div class="tip" id="fs233">val header : BlockHeader</div>
<div class="tip" id="fs234">Object.GetHashCode() : int<br />IEqualityComparer.GetHashCode(obj: byte []) : int</div>
<div class="tip" id="fs235">val prevBlockHash : byte []</div>
<div class="tip" id="fs236">val merkleRoot : byte []</div>
<div class="tip" id="fs237">val timestamp : uint32</div>
<div class="tip" id="fs238">Multiple items<br />val uint32 : value:&#39;T -&gt; uint32 (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.uint32<br /><br />--------------------<br />type uint32 = UInt32<br /><br />Full name: Microsoft.FSharp.Core.uint32</div>
<div class="tip" id="fs239">val bits : int</div>
<div class="tip" id="fs240">val nonce : int</div>
<div class="tip" id="fs241">val txCount : int</div>
<div class="tip" id="fs242">val mutable height : int</div>
<div class="tip" id="fs243">val mutable nextBlockHash : byte []</div>
<div class="tip" id="fs244">val empty&lt;&#39;T&gt; : &#39;T []<br /><br />Full name: Microsoft.FSharp.Collections.Array.empty</div>
<div class="tip" id="fs245">val mutable isMain : bool</div>
<div class="tip" id="fs246">val x : BlockHeader</div>
<div class="tip" id="fs247">member BlockHeader.ToByteArray : nocount:bool -&gt; full:bool -&gt; byte []<br /><br />Full name: Protocol.BlockHeader.ToByteArray</div>
<div class="tip" id="fs248">val nocount : bool</div>
<div class="tip" id="fs249">val full : bool</div>
<div class="tip" id="fs250">val not : value:bool -&gt; bool<br /><br />Full name: Microsoft.FSharp.Core.Operators.not</div>
<div class="tip" id="fs251">static member BlockHeader.Parse : reader:BinaryReader -&gt; BlockHeader<br /><br />Full name: Protocol.BlockHeader.Parse</div>
<div class="tip" id="fs252">val headerHashPart : byte []</div>
<div class="tip" id="fs253">val r : BinaryReader</div>
<div class="tip" id="fs254">static member BlockHeader.Zero : BlockHeader<br /><br />Full name: Protocol.BlockHeader.Zero</div>
<div class="tip" id="fs255">override BlockHeader.ToString : unit -&gt; string<br /><br />Full name: Protocol.BlockHeader.ToString</div>
<div class="tip" id="fs256">member BlockHeader.Height : int with set<br /><br />Full name: Protocol.BlockHeader.Height</div>
<div class="tip" id="fs257">val set : elements:seq&lt;&#39;T&gt; -&gt; Set&lt;&#39;T&gt; (requires comparison)<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.set</div>
<div class="tip" id="fs258">val value : int</div>
<div class="tip" id="fs259">member BlockHeader.NextHash : byte [] with set<br /><br />Full name: Protocol.BlockHeader.NextHash</div>
<div class="tip" id="fs260">val value : byte []</div>
<div class="tip" id="fs261">member BlockHeader.IsMain : bool with set<br /><br />Full name: Protocol.BlockHeader.IsMain</div>
<div class="tip" id="fs262">val value : bool</div>
<div class="tip" id="fs263">Multiple items<br />type Headers =<br />&#160;&#160;new : headers:BlockHeader list -&gt; Headers<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;override ToString : unit -&gt; string<br />&#160;&#160;member Headers : BlockHeader list<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; Headers<br /><br />Full name: Protocol.Headers<br /><br />--------------------<br />new : headers:BlockHeader list -&gt; Headers</div>
<div class="tip" id="fs264">val headers : BlockHeader list</div>
<div class="tip" id="fs265">val x : Headers</div>
<div class="tip" id="fs266">member Headers.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.Headers.ToByteArray</div>
<div class="tip" id="fs267">property List.Length: int</div>
<div class="tip" id="fs268">member BlockHeader.ToByteArray : nocount:bool -&gt; full:bool -&gt; byte []</div>
<div class="tip" id="fs269">static member Headers.Parse : reader:BinaryReader -&gt; Headers<br /><br />Full name: Protocol.Headers.Parse</div>
<div class="tip" id="fs270">static member BlockHeader.Parse : reader:BinaryReader -&gt; BlockHeader</div>
<div class="tip" id="fs271">override Headers.ToString : unit -&gt; string<br /><br />Full name: Protocol.Headers.ToString</div>
<div class="tip" id="fs272">Multiple items<br />type InvEntry =<br />&#160;&#160;new : tpe:int * hash:byte [] -&gt; InvEntry<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;override ToString : unit -&gt; string<br />&#160;&#160;member Hash : byte []<br />&#160;&#160;member Type : int<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; InvEntry<br /><br />Full name: Protocol.InvEntry<br /><br />--------------------<br />new : tpe:int * hash:byte [] -&gt; InvEntry</div>
<div class="tip" id="fs273">val tpe : int</div>
<div class="tip" id="fs274">val x : InvEntry</div>
<div class="tip" id="fs275">member InvEntry.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.InvEntry.ToByteArray</div>
<div class="tip" id="fs276">type Type =<br />&#160;&#160;inherit MemberInfo<br />&#160;&#160;member Assembly : Assembly<br />&#160;&#160;member AssemblyQualifiedName : string<br />&#160;&#160;member Attributes : TypeAttributes<br />&#160;&#160;member BaseType : Type<br />&#160;&#160;member ContainsGenericParameters : bool<br />&#160;&#160;member DeclaringMethod : MethodBase<br />&#160;&#160;member DeclaringType : Type<br />&#160;&#160;member Equals : o:obj -&gt; bool + 1 overload<br />&#160;&#160;member FindInterfaces : filter:TypeFilter * filterCriteria:obj -&gt; Type[]<br />&#160;&#160;member FindMembers : memberType:MemberTypes * bindingAttr:BindingFlags * filter:MemberFilter * filterCriteria:obj -&gt; MemberInfo[]<br />&#160;&#160;...<br /><br />Full name: System.Type</div>
<div class="tip" id="fs277">override InvEntry.ToString : unit -&gt; string<br /><br />Full name: Protocol.InvEntry.ToString</div>
<div class="tip" id="fs278">static member InvEntry.Parse : reader:BinaryReader -&gt; InvEntry<br /><br />Full name: Protocol.InvEntry.Parse</div>
<div class="tip" id="fs279">Multiple items<br />type InvVector =<br />&#160;&#160;new : invs:InvEntry list -&gt; InvVector<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;member Invs : InvEntry list<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; InvVector<br /><br />Full name: Protocol.InvVector<br /><br />--------------------<br />new : invs:InvEntry list -&gt; InvVector</div>
<div class="tip" id="fs280">val invs : InvEntry list</div>
<div class="tip" id="fs281">val x : InvVector</div>
<div class="tip" id="fs282">member InvVector.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.InvVector.ToByteArray</div>
<div class="tip" id="fs283">val inv : InvEntry</div>
<div class="tip" id="fs284">member InvEntry.ToByteArray : unit -&gt; byte []</div>
<div class="tip" id="fs285">static member InvVector.Parse : reader:BinaryReader -&gt; InvVector<br /><br />Full name: Protocol.InvVector.Parse</div>
<div class="tip" id="fs286">static member InvEntry.Parse : reader:BinaryReader -&gt; InvEntry</div>
<div class="tip" id="fs287">Multiple items<br />type NotFound =<br />&#160;&#160;new : invs:InvEntry list -&gt; NotFound<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;member Invs : InvEntry list<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; NotFound<br /><br />Full name: Protocol.NotFound<br /><br />--------------------<br />new : invs:InvEntry list -&gt; NotFound</div>
<div class="tip" id="fs288">val x : NotFound</div>
<div class="tip" id="fs289">member NotFound.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.NotFound.ToByteArray</div>
<div class="tip" id="fs290">static member NotFound.Parse : reader:BinaryReader -&gt; NotFound<br /><br />Full name: Protocol.NotFound.Parse</div>
<div class="tip" id="fs291">Multiple items<br />type GetData =<br />&#160;&#160;new : invs:InvEntry list -&gt; GetData<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;member Invs : InvEntry list<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; GetData<br /><br />Full name: Protocol.GetData<br /><br />--------------------<br />new : invs:InvEntry list -&gt; GetData</div>
<div class="tip" id="fs292">val x : GetData</div>
<div class="tip" id="fs293">member GetData.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.GetData.ToByteArray</div>
<div class="tip" id="fs294">static member GetData.Parse : reader:BinaryReader -&gt; GetData<br /><br />Full name: Protocol.GetData.Parse</div>
<div class="tip" id="fs295">Multiple items<br />type OutPoint =<br />&#160;&#160;new : hash:byte [] * index:int -&gt; OutPoint<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;override ToString : unit -&gt; string<br />&#160;&#160;member Hash : byte []<br />&#160;&#160;member Index : int<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; OutPoint<br /><br />Full name: Protocol.OutPoint<br /><br />--------------------<br />new : hash:byte [] * index:int -&gt; OutPoint</div>
<div class="tip" id="fs296">val index : int</div>
<div class="tip" id="fs297">val x : OutPoint</div>
<div class="tip" id="fs298">member OutPoint.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.OutPoint.ToByteArray</div>
<div class="tip" id="fs299">static member OutPoint.Parse : reader:BinaryReader -&gt; OutPoint<br /><br />Full name: Protocol.OutPoint.Parse</div>
<div class="tip" id="fs300">override OutPoint.ToString : unit -&gt; string<br /><br />Full name: Protocol.OutPoint.ToString</div>
<div class="tip" id="fs301">Multiple items<br />type TxIn =<br />&#160;&#160;new : prevOutpoint:OutPoint * script:byte [] * sequence:int -&gt; TxIn<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;member PrevOutPoint : OutPoint<br />&#160;&#160;member Script : byte []<br />&#160;&#160;member Sequence : int<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; TxIn<br /><br />Full name: Protocol.TxIn<br /><br />--------------------<br />new : prevOutpoint:OutPoint * script:byte [] * sequence:int -&gt; TxIn</div>
<div class="tip" id="fs302">val prevOutpoint : OutPoint</div>
<div class="tip" id="fs303">val script : byte []</div>
<div class="tip" id="fs304">val sequence : int</div>
<div class="tip" id="fs305">val x : TxIn</div>
<div class="tip" id="fs306">member TxIn.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.TxIn.ToByteArray</div>
<div class="tip" id="fs307">member OutPoint.ToByteArray : unit -&gt; byte []</div>
<div class="tip" id="fs308">member BinaryWriter.WriteScript : b:byte [] -&gt; unit</div>
<div class="tip" id="fs309">static member TxIn.Parse : reader:BinaryReader -&gt; TxIn<br /><br />Full name: Protocol.TxIn.Parse</div>
<div class="tip" id="fs310">static member OutPoint.Parse : reader:BinaryReader -&gt; OutPoint</div>
<div class="tip" id="fs311">Multiple items<br />type TxOut =<br />&#160;&#160;new : value:int64 * script:byte [] -&gt; TxOut<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;member Script : byte []<br />&#160;&#160;member Value : int64<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; TxOut<br /><br />Full name: Protocol.TxOut<br /><br />--------------------<br />new : value:int64 * script:byte [] -&gt; TxOut</div>
<div class="tip" id="fs312">val value : int64</div>
<div class="tip" id="fs313">val x : TxOut</div>
<div class="tip" id="fs314">member TxOut.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.TxOut.ToByteArray</div>
<div class="tip" id="fs315">static member TxOut.Parse : reader:BinaryReader -&gt; TxOut<br /><br />Full name: Protocol.TxOut.Parse</div>
<div class="tip" id="fs316">Multiple items<br />type AllowNullLiteralAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : unit -&gt; AllowNullLiteralAttribute<br /><br />Full name: Microsoft.FSharp.Core.AllowNullLiteralAttribute<br /><br />--------------------<br />new : unit -&gt; AllowNullLiteralAttribute</div>
<div class="tip" id="fs317">Multiple items<br />type UTXO =<br />&#160;&#160;new : txOut:TxOut * height:int -&gt; UTXO<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;member Height : int<br />&#160;&#160;member TxOut : TxOut<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; UTXO<br /><br />Full name: Protocol.UTXO<br /><br />--------------------<br />new : txOut:TxOut * height:int -&gt; UTXO</div>
<div class="tip" id="fs318">val txOut : TxOut</div>
<div class="tip" id="fs319">val x : UTXO</div>
<div class="tip" id="fs320">member UTXO.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.UTXO.ToByteArray</div>
<div class="tip" id="fs321">member TxOut.ToByteArray : unit -&gt; byte []</div>
<div class="tip" id="fs322">static member UTXO.Parse : reader:BinaryReader -&gt; UTXO<br /><br />Full name: Protocol.UTXO.Parse</div>
<div class="tip" id="fs323">static member TxOut.Parse : reader:BinaryReader -&gt; TxOut</div>
<div class="tip" id="fs324">Multiple items<br />type Tx =<br />&#160;&#160;new : hash:byte [] * version:int * txIns:TxIn [] * txOuts:TxOut [] * lockTime:uint32 -&gt; Tx<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;override ToString : unit -&gt; string<br />&#160;&#160;member Hash : byte []<br />&#160;&#160;member LockTime : uint32<br />&#160;&#160;member TxIns : TxIn []<br />&#160;&#160;member TxOuts : TxOut []<br />&#160;&#160;member Version : int<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; Tx<br /><br />Full name: Protocol.Tx<br /><br />--------------------<br />new : hash:byte [] * version:int * txIns:TxIn [] * txOuts:TxOut [] * lockTime:uint32 -&gt; Tx</div>
<div class="tip" id="fs325">val txIns : TxIn []</div>
<div class="tip" id="fs326">val txOuts : TxOut []</div>
<div class="tip" id="fs327">val lockTime : uint32</div>
<div class="tip" id="fs328">val x : Tx</div>
<div class="tip" id="fs329">member Tx.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.Tx.ToByteArray</div>
<div class="tip" id="fs330">val txIn : TxIn</div>
<div class="tip" id="fs331">member TxIn.ToByteArray : unit -&gt; byte []</div>
<div class="tip" id="fs332">static member Tx.Parse : reader:BinaryReader -&gt; Tx<br /><br />Full name: Protocol.Tx.Parse</div>
<div class="tip" id="fs333">val beginPosition : int64</div>
<div class="tip" id="fs334">property BinaryReader.BaseStream: Stream</div>
<div class="tip" id="fs335">property Stream.Position: int64</div>
<div class="tip" id="fs336">val txInCount : int</div>
<div class="tip" id="fs337">static member TxIn.Parse : reader:BinaryReader -&gt; TxIn</div>
<div class="tip" id="fs338">val txOutCount : int</div>
<div class="tip" id="fs339">val endPosition : int64</div>
<div class="tip" id="fs340">val txSize : int64</div>
<div class="tip" id="fs341">Stream.Seek(offset: int64, origin: SeekOrigin) : int64</div>
<div class="tip" id="fs342">type SeekOrigin =<br />&#160;&#160;| Begin = 0<br />&#160;&#160;| Current = 1<br />&#160;&#160;| End = 2<br /><br />Full name: System.IO.SeekOrigin</div>
<div class="tip" id="fs343">field SeekOrigin.Begin = 0</div>
<div class="tip" id="fs344">val txBytes : byte []</div>
<div class="tip" id="fs345">val txHash : byte []</div>
<div class="tip" id="fs346">override Tx.ToString : unit -&gt; string<br /><br />Full name: Protocol.Tx.ToString</div>
<div class="tip" id="fs347">Multiple items<br />type Block =<br />&#160;&#160;new : header:BlockHeader * txs:Tx [] -&gt; Block<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;member Header : BlockHeader<br />&#160;&#160;member Txs : Tx []<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; Block<br /><br />Full name: Protocol.Block<br /><br />--------------------<br />new : header:BlockHeader * txs:Tx [] -&gt; Block</div>
<div class="tip" id="fs348">val txs : Tx []</div>
<div class="tip" id="fs349">val x : Block</div>
<div class="tip" id="fs350">member Block.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.Block.ToByteArray</div>
<div class="tip" id="fs351">val tx : Tx</div>
<div class="tip" id="fs352">member Tx.ToByteArray : unit -&gt; byte []</div>
<div class="tip" id="fs353">static member Block.Parse : reader:BinaryReader -&gt; Block<br /><br />Full name: Protocol.Block.Parse</div>
<div class="tip" id="fs354">property BlockHeader.TxCount: int</div>
<div class="tip" id="fs355">static member Tx.Parse : reader:BinaryReader -&gt; Tx</div>
<div class="tip" id="fs356">Multiple items<br />type MerkleBlock =<br />&#160;&#160;new : header:BlockHeader * txHashes:byte [] list * flags:byte [] -&gt; MerkleBlock<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;member Flags : byte []<br />&#160;&#160;member Header : BlockHeader<br />&#160;&#160;member TxHashes : byte [] list<br /><br />Full name: Protocol.MerkleBlock<br /><br />--------------------<br />new : header:BlockHeader * txHashes:byte [] list * flags:byte [] -&gt; MerkleBlock</div>
<div class="tip" id="fs357">val txHashes : byte [] list</div>
<div class="tip" id="fs358">val flags : byte []</div>
<div class="tip" id="fs359">val x : MerkleBlock</div>
<div class="tip" id="fs360">member MerkleBlock.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.MerkleBlock.ToByteArray</div>
<div class="tip" id="fs361">Multiple items<br />type FlagsAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : unit -&gt; FlagsAttribute<br /><br />Full name: System.FlagsAttribute<br /><br />--------------------<br />FlagsAttribute() : unit</div>
<div class="tip" id="fs362">Multiple items<br />type Mempool =<br />&#160;&#160;new : unit -&gt; Mempool<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; Mempool<br /><br />Full name: Protocol.Mempool<br /><br />--------------------<br />new : unit -&gt; Mempool</div>
<div class="tip" id="fs363">val x : Mempool</div>
<div class="tip" id="fs364">member Mempool.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.Mempool.ToByteArray</div>
<div class="tip" id="fs365">static member Mempool.Parse : reader:BinaryReader -&gt; Mempool<br /><br />Full name: Protocol.Mempool.Parse</div>
<div class="tip" id="fs366">Multiple items<br />type Ping =<br />&#160;&#160;new : nonce:uint64 -&gt; Ping<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;member Nonce : uint64<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; Ping<br /><br />Full name: Protocol.Ping<br /><br />--------------------<br />new : nonce:uint64 -&gt; Ping</div>
<div class="tip" id="fs367">val nonce : uint64</div>
<div class="tip" id="fs368">Multiple items<br />val uint64 : value:&#39;T -&gt; uint64 (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.uint64<br /><br />--------------------<br />type uint64 = UInt64<br /><br />Full name: Microsoft.FSharp.Core.uint64</div>
<div class="tip" id="fs369">val x : Ping</div>
<div class="tip" id="fs370">member Ping.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.Ping.ToByteArray</div>
<div class="tip" id="fs371">static member Ping.Parse : reader:BinaryReader -&gt; Ping<br /><br />Full name: Protocol.Ping.Parse</div>
<div class="tip" id="fs372">Multiple items<br />type Pong =<br />&#160;&#160;new : nonce:uint64 -&gt; Pong<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;member Nonce : uint64<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; Pong<br /><br />Full name: Protocol.Pong<br /><br />--------------------<br />new : nonce:uint64 -&gt; Pong</div>
<div class="tip" id="fs373">val x : Pong</div>
<div class="tip" id="fs374">member Pong.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.Pong.ToByteArray</div>
<div class="tip" id="fs375">static member Pong.Parse : reader:BinaryReader -&gt; Pong<br /><br />Full name: Protocol.Pong.Parse</div>
<div class="tip" id="fs376">Multiple items<br />type GetBlocks =<br />&#160;&#160;new : hashes:byte [] list * hashStop:byte [] -&gt; GetBlocks<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;override ToString : unit -&gt; string<br />&#160;&#160;member HashStop : byte []<br />&#160;&#160;member Hashes : byte [] list<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; GetBlocks<br /><br />Full name: Protocol.GetBlocks<br /><br />--------------------<br />new : hashes:byte [] list * hashStop:byte [] -&gt; GetBlocks</div>
<div class="tip" id="fs377">val x : GetBlocks</div>
<div class="tip" id="fs378">member GetBlocks.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.GetBlocks.ToByteArray</div>
<div class="tip" id="fs379">static member GetBlocks.Parse : reader:BinaryReader -&gt; GetBlocks<br /><br />Full name: Protocol.GetBlocks.Parse</div>
<div class="tip" id="fs380">override GetBlocks.ToString : unit -&gt; string<br /><br />Full name: Protocol.GetBlocks.ToString</div>
<div class="tip" id="fs381">Multiple items<br />type FilterLoad =<br />&#160;&#160;new : filter:byte [] * nHash:int * nTweak:int * nFlags:byte -&gt; FilterLoad<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;member Filter : byte []<br />&#160;&#160;member NFlags : byte<br />&#160;&#160;member NHash : int<br />&#160;&#160;member NTweak : int<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; FilterLoad<br /><br />Full name: Protocol.FilterLoad<br /><br />--------------------<br />new : filter:byte [] * nHash:int * nTweak:int * nFlags:byte -&gt; FilterLoad</div>
<div class="tip" id="fs382">val filter : byte []</div>
<div class="tip" id="fs383">val nHash : int</div>
<div class="tip" id="fs384">val nTweak : int</div>
<div class="tip" id="fs385">val nFlags : byte</div>
<div class="tip" id="fs386">val x : FilterLoad</div>
<div class="tip" id="fs387">member FilterLoad.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.FilterLoad.ToByteArray</div>
<div class="tip" id="fs388">static member FilterLoad.Parse : reader:BinaryReader -&gt; FilterLoad<br /><br />Full name: Protocol.FilterLoad.Parse</div>
<div class="tip" id="fs389">val filterLen : int</div>
<div class="tip" id="fs390">Multiple items<br />type FilterAdd =<br />&#160;&#160;new : data:byte [] -&gt; FilterAdd<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;member Data : byte []<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; FilterAdd<br /><br />Full name: Protocol.FilterAdd<br /><br />--------------------<br />new : data:byte [] -&gt; FilterAdd</div>
<div class="tip" id="fs391">val data : byte []</div>
<div class="tip" id="fs392">val x : FilterAdd</div>
<div class="tip" id="fs393">member FilterAdd.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.FilterAdd.ToByteArray</div>
<div class="tip" id="fs394">static member FilterAdd.Parse : reader:BinaryReader -&gt; FilterAdd<br /><br />Full name: Protocol.FilterAdd.Parse</div>
<div class="tip" id="fs395">val dataLen : int</div>
<div class="tip" id="fs396">Multiple items<br />namespace System.Data<br /><br />--------------------<br />namespace Microsoft.FSharp.Data</div>
<div class="tip" id="fs397">Multiple items<br />type FilterClear =<br />&#160;&#160;new : unit -&gt; FilterClear<br />&#160;&#160;member ToByteArray : unit -&gt; &#39;a []<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; FilterClear<br /><br />Full name: Protocol.FilterClear<br /><br />--------------------<br />new : unit -&gt; FilterClear</div>
<div class="tip" id="fs398">val x : FilterClear</div>
<div class="tip" id="fs399">member FilterClear.ToByteArray : unit -&gt; &#39;a []<br /><br />Full name: Protocol.FilterClear.ToByteArray</div>
<div class="tip" id="fs400">static member FilterClear.Parse : reader:BinaryReader -&gt; FilterClear<br /><br />Full name: Protocol.FilterClear.Parse</div>
<div class="tip" id="fs401">val magic : int<br /><br />Full name: Protocol.magic</div>
<div class="tip" id="fs402">Multiple items<br />type BitcoinMessage =<br />&#160;&#160;new : command:string * payload:byte [] -&gt; BitcoinMessage<br />&#160;&#160;member ParsePayload : unit -&gt; obj<br />&#160;&#160;member ToByteArray : unit -&gt; byte []<br />&#160;&#160;override ToString : unit -&gt; string<br />&#160;&#160;member Command : string<br />&#160;&#160;member Payload : byte []<br />&#160;&#160;static member Parse : reader:BinaryReader -&gt; BitcoinMessage<br /><br />Full name: Protocol.BitcoinMessage<br /><br />--------------------<br />new : command:string * payload:byte [] -&gt; BitcoinMessage</div>
<div class="tip" id="fs403">val command : string</div>
<div class="tip" id="fs404">val payload : byte []</div>
<div class="tip" id="fs405">val parsePayload : (unit -&gt; obj)</div>
<div class="tip" id="fs406">static member GetHeaders.Parse : reader:BinaryReader -&gt; GetHeaders</div>
<div class="tip" id="fs407">static member GetBlocks.Parse : reader:BinaryReader -&gt; GetBlocks</div>
<div class="tip" id="fs408">static member GetData.Parse : reader:BinaryReader -&gt; GetData</div>
<div class="tip" id="fs409">Multiple items<br />static member Version.Parse : reader:BinaryReader -&gt; Version<br /><br />--------------------<br />Version.Parse(input: string) : Version</div>
<div class="tip" id="fs410">static member Headers.Parse : reader:BinaryReader -&gt; Headers</div>
<div class="tip" id="fs411">static member Addr.Parse : reader:BinaryReader -&gt; Addr</div>
<div class="tip" id="fs412">static member Block.Parse : reader:BinaryReader -&gt; Block</div>
<div class="tip" id="fs413">static member InvVector.Parse : reader:BinaryReader -&gt; InvVector</div>
<div class="tip" id="fs414">static member Ping.Parse : reader:BinaryReader -&gt; Ping</div>
<div class="tip" id="fs415">static member Mempool.Parse : reader:BinaryReader -&gt; Mempool</div>
<div class="tip" id="fs416">static member FilterLoad.Parse : reader:BinaryReader -&gt; FilterLoad</div>
<div class="tip" id="fs417">static member FilterAdd.Parse : reader:BinaryReader -&gt; FilterAdd</div>
<div class="tip" id="fs418">static member FilterClear.Parse : reader:BinaryReader -&gt; FilterClear</div>
<div class="tip" id="fs419">val x : BitcoinMessage</div>
<div class="tip" id="fs420">member BitcoinMessage.ToByteArray : unit -&gt; byte []<br /><br />Full name: Protocol.BitcoinMessage.ToByteArray</div>
<div class="tip" id="fs421">val hash256 : byte []</div>
<div class="tip" id="fs422">val checksum : byte []</div>
<div class="tip" id="fs423">val mutable c : byte []</div>
<div class="tip" id="fs424">Array.Resize&lt;&#39;T&gt;(array: byref&lt;&#39;T []&gt;, newSize: int) : unit</div>
<div class="tip" id="fs425">static member BitcoinMessage.Parse : reader:BinaryReader -&gt; BitcoinMessage<br /><br />Full name: Protocol.BitcoinMessage.Parse</div>
<div class="tip" id="fs426">val magic : int</div>
<div class="tip" id="fs427">BinaryReader.ReadChars(count: int) : char []</div>
<div class="tip" id="fs428">val checksum : int</div>
<div class="tip" id="fs429">override BitcoinMessage.ToString : unit -&gt; string<br /><br />Full name: Protocol.BitcoinMessage.ToString</div>
<div class="tip" id="fs430">member BitcoinMessage.ParsePayload : unit -&gt; obj<br /><br />Full name: Protocol.BitcoinMessage.ParsePayload</div>
<div class="tip" id="fs431">exception ParseException<br /><br />Full name: Protocol.ParseException</div>
<div class="tip" id="fs432">type ParserState =<br />&#160;&#160;{InHeader: bool;<br />&#160;&#160;&#160;Command: string;<br />&#160;&#160;&#160;Checksum: int;<br />&#160;&#160;&#160;PayloadLength: int;<br />&#160;&#160;&#160;Data: byte [];}<br /><br />Full name: Protocol.ParserState</div>
<div class="tip" id="fs433">ParserState.InHeader: bool</div>
<div class="tip" id="fs434">ParserState.Command: string</div>
<div class="tip" id="fs435">ParserState.Checksum: int</div>
<div class="tip" id="fs436">ParserState.PayloadLength: int</div>
<div class="tip" id="fs437">Multiple items<br />ParserState.Data: byte []<br /><br />--------------------<br />namespace System.Data<br /><br />--------------------<br />namespace Microsoft.FSharp.Data</div>
<div class="tip" id="fs438">Multiple items<br />type BitcoinMessageParser =<br />&#160;&#160;new : networkData:IObservable&lt;byte []&gt; -&gt; BitcoinMessageParser<br />&#160;&#160;member BitcoinMessages : obj<br /><br />Full name: Protocol.BitcoinMessageParser<br /><br />--------------------<br />new : networkData:IObservable&lt;byte []&gt; -&gt; BitcoinMessageParser</div>
<div class="tip" id="fs439">val networkData : IObservable&lt;byte []&gt;</div>
<div class="tip" id="fs440">type IObservable&lt;&#39;T&gt; =<br />&#160;&#160;member Subscribe : observer:IObserver&lt;&#39;T&gt; -&gt; IDisposable<br /><br />Full name: System.IObservable&lt;_&gt;</div>
<div class="tip" id="fs441">val headerLen : int</div>
<div class="tip" id="fs442">val parse : (ParserState -&gt; BinaryReader -&gt; BitcoinMessage list -&gt; BitcoinMessage list * ParserState)</div>
<div class="tip" id="fs443">val state : ParserState</div>
<div class="tip" id="fs444">val messages : BitcoinMessage list</div>
<div class="tip" id="fs445">val remaining : int</div>
<div class="tip" id="fs446">property Stream.Length: int64</div>
<div class="tip" id="fs447">val messageMagic : int</div>
<div class="tip" id="fs448">val raise : exn:Exception -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.Operators.raise</div>
<div class="tip" id="fs449">val payloadLength : int</div>
<div class="tip" id="fs450">type BitConverter =<br />&#160;&#160;static val IsLittleEndian : bool<br />&#160;&#160;static member DoubleToInt64Bits : value:float -&gt; int64<br />&#160;&#160;static member GetBytes : value:bool -&gt; byte[] + 9 overloads<br />&#160;&#160;static member Int64BitsToDouble : value:int64 -&gt; float<br />&#160;&#160;static member ToBoolean : value:byte[] * startIndex:int -&gt; bool<br />&#160;&#160;static member ToChar : value:byte[] * startIndex:int -&gt; char<br />&#160;&#160;static member ToDouble : value:byte[] * startIndex:int -&gt; float<br />&#160;&#160;static member ToInt16 : value:byte[] * startIndex:int -&gt; int16<br />&#160;&#160;static member ToInt32 : value:byte[] * startIndex:int -&gt; int<br />&#160;&#160;static member ToInt64 : value:byte[] * startIndex:int -&gt; int64<br />&#160;&#160;...<br /><br />Full name: System.BitConverter</div>
<div class="tip" id="fs451">BitConverter.ToInt32(value: byte [], startIndex: int) : int</div>
<div class="tip" id="fs452">val acc : (ParserState -&gt; byte [] -&gt; BitcoinMessage list * ParserState)</div>
<div class="tip" id="fs453">val chunk : byte []</div>
<div class="tip" id="fs454">val concat : arrays:seq&lt;&#39;T []&gt; -&gt; &#39;T []<br /><br />Full name: Microsoft.FSharp.Collections.Array.concat</div>
<div class="tip" id="fs455">ParserState.Data: byte []</div>
<div class="tip" id="fs456">val newState : ParserState</div>
<div class="tip" id="fs457">Multiple items<br />type List&lt;&#39;T&gt; =<br />&#160;&#160;new : unit -&gt; List&lt;&#39;T&gt; + 2 overloads<br />&#160;&#160;member Add : item:&#39;T -&gt; unit<br />&#160;&#160;member AddRange : collection:IEnumerable&lt;&#39;T&gt; -&gt; unit<br />&#160;&#160;member AsReadOnly : unit -&gt; ReadOnlyCollection&lt;&#39;T&gt;<br />&#160;&#160;member BinarySearch : item:&#39;T -&gt; int + 2 overloads<br />&#160;&#160;member Capacity : int with get, set<br />&#160;&#160;member Clear : unit -&gt; unit<br />&#160;&#160;member Contains : item:&#39;T -&gt; bool<br />&#160;&#160;member ConvertAll&lt;&#39;TOutput&gt; : converter:Converter&lt;&#39;T, &#39;TOutput&gt; -&gt; List&lt;&#39;TOutput&gt;<br />&#160;&#160;member CopyTo : array:&#39;T[] -&gt; unit + 2 overloads<br />&#160;&#160;...<br />&#160;&#160;nested type Enumerator<br /><br />Full name: System.Collections.Generic.List&lt;_&gt;<br /><br />--------------------<br />List() : unit<br />List(capacity: int) : unit<br />List(collection: IEnumerable&lt;&#39;T&gt;) : unit</div>
<div class="tip" id="fs458">val empty&lt;&#39;T&gt; : &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List.empty</div>
<div class="tip" id="fs459">val remainingBytes : byte []</div>
<div class="tip" id="fs460">property MemoryStream.Position: int64</div>
<div class="tip" id="fs461">val bitcoinMessages : obj</div>
<div class="tip" id="fs462">val fst : tuple:(&#39;T1 * &#39;T2) -&gt; &#39;T1<br /><br />Full name: Microsoft.FSharp.Core.Operators.fst</div>
<div class="tip" id="fs463">val toSeq : list:&#39;T list -&gt; seq&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.List.toSeq</div>
<div class="tip" id="fs464">val x : BitcoinMessageParser</div>
<div class="tip" id="fs465">member BitcoinMessageParser.BitcoinMessages : obj<br /><br />Full name: Protocol.BitcoinMessageParser.BitcoinMessages</div>
<div class="tip" id="fs466">val hashCompare : IEqualityComparer&lt;byte []&gt;<br /><br />Full name: Protocol.hashCompare</div>
          
        </div>
        <div class="span1"></div>
      </div>
    </div>
  </body>
</html>
