<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!-- 
      The The Memory Pool
 parameters will be replaced with the 
      document title extracted from the <h1> element or
      file name, if there is no <h1> heading
    -->
    <title>The Memory Pool
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="http://code.jquery.com/jquery-1.11.2.js"></script>
    <script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
    <script src="http://getbootstrap.com/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="content/style.css" />
    <script src="content/tips.js" type="text/javascript"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">Bitcoin F#</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="Protocol.html">Protocol</a></li>
            <li><a href="DB.html">Persistence</a></li>
            <li><a href="P2P.html">Peer to Peer</a></li>
            <li><a href="Peer.html">Peer</a></li>
            <li><a href="Tracker.html">Tracker</a></li>
            <li><a href="Script.html">Script Interpreter</a></li>
            <li><a href="Mempool.html">Mempool</a></li>
            <li><a href="Checks.html">Validation</a></li>
            <li><a href="Blockchain.html">Blockchain</a></li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Misc <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                    <li><a href="Main.html">Main</a></li>
                    <li><a href="Test.html">Tests</a></li>
                    <li><a href="Building.html">Building and Running</a></li>
                    <li><a href="BIP37.html">SPV</a></li>
                    <li><a href="Changelog.html">Changelog</a></li>
                </ul>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    <div class="container">
      <div class="row" style="margin-top:70px">
        <div class="span1"></div>
        <div class="span10" id="main">
          <h1>The Memory Pool</h1>

<p>Where unconfirmed transactions go</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">module</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="i">Mempool</span></pre>
</td>
</tr>
</table>

<p>A UTXO accessor that stores UTXO operations in memory. Deletes are stored as tombstones and adds
are stored as key value pairs. The accessor methods first checks the in-memory table (a dictionary) for
a match before going to the base/lower UTXO accessor. Basically, this is an addendum to the base UTXO set.
Instead of modifying the base set, it keeps track of the recent differences.</p>

<p>If they become permanent, <code>Commit</code> writes them to the base UTXO set otherwise the accessor is simply discarded.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
<span class="l">35: </span>
<span class="l">36: </span>
<span class="l">37: </span>
<span class="l">38: </span>
<span class="l">39: </span>
<span class="l">40: </span>
<span class="l">41: </span>
<span class="l">42: </span>
<span class="l">43: </span>
<span class="l">44: </span>
<span class="l">45: </span>
<span class="l">46: </span>
<span class="l">47: </span>
<span class="l">48: </span>
<span class="l">49: </span>
<span class="l">50: </span>
<span class="l">51: </span>
<span class="l">52: </span>
<span class="l">53: </span>
<span class="l">54: </span>
<span class="l">55: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs29', 42)" onmouseover="showTip(event, 'fs29', 42)" class="i">MempoolUTXOAccessor</span>(<span onmouseout="hideTip(event, 'fs30', 43)" onmouseover="showTip(event, 'fs30', 43)" class="i">baseUTXO</span><span class="o">:</span> <span class="i">IUTXOAccessor</span>) <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs31', 44)" onmouseover="showTip(event, 'fs31', 44)" class="i">table</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs13', 45)" onmouseover="showTip(event, 'fs13', 45)" class="i">Dictionary</span><span class="o">&lt;</span><span class="i">OutPoint</span>, <span class="i">UTXO</span><span class="o">&gt;</span>(<span class="k">new</span> <span onmouseout="hideTip(event, 'fs19', 46)" onmouseover="showTip(event, 'fs19', 46)" class="i">OutpointCompare</span>())
    <span class="c">// With LevelDB, I had iterators. A dictionary does not have a sorted iterator so I need to keep track</span>
    <span class="c">// of the counts separately</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs32', 47)" onmouseover="showTip(event, 'fs32', 47)" class="i">counts</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs13', 48)" onmouseover="showTip(event, 'fs13', 48)" class="i">Dictionary</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs11', 49)" onmouseover="showTip(event, 'fs11', 49)" class="i">byte</span>[], <span onmouseout="hideTip(event, 'fs33', 50)" onmouseover="showTip(event, 'fs33', 50)" class="i">int</span><span class="o">&gt;</span>(<span class="k">new</span> <span class="i">HashCompare</span>()) 

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs34', 51)" onmouseover="showTip(event, 'fs34', 51)" class="i">getOrDefault</span> (<span onmouseout="hideTip(event, 'fs35', 52)" onmouseover="showTip(event, 'fs35', 52)" class="i">hash</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs11', 53)" onmouseover="showTip(event, 'fs11', 53)" class="i">byte</span>[]) <span class="o">=</span> 
        <span class="k">let</span> (<span onmouseout="hideTip(event, 'fs36', 54)" onmouseover="showTip(event, 'fs36', 54)" class="i">f</span>, <span onmouseout="hideTip(event, 'fs37', 55)" onmouseover="showTip(event, 'fs37', 55)" class="i">count</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs32', 56)" onmouseover="showTip(event, 'fs32', 56)" class="i">counts</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs38', 57)" onmouseover="showTip(event, 'fs38', 57)" class="i">TryGetValue</span>(<span onmouseout="hideTip(event, 'fs35', 58)" onmouseover="showTip(event, 'fs35', 58)" class="i">hash</span>) <span class="c">// I wish there was a GetOrDefault instead of a TryGetValue</span>
        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs36', 59)" onmouseover="showTip(event, 'fs36', 59)" class="i">f</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs37', 60)" onmouseover="showTip(event, 'fs37', 60)" class="i">count</span> <span class="k">else</span> <span class="n">0</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs39', 61)" onmouseover="showTip(event, 'fs39', 61)" class="i">deleteUTXO</span> (<span onmouseout="hideTip(event, 'fs28', 62)" onmouseover="showTip(event, 'fs28', 62)" class="i">outpoint</span><span class="o">:</span> <span class="i">OutPoint</span>) <span class="o">=</span> 
        <span onmouseout="hideTip(event, 'fs31', 63)" onmouseover="showTip(event, 'fs31', 63)" class="i">table</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs28', 64)" onmouseover="showTip(event, 'fs28', 64)" class="i">outpoint</span>] <span class="o">&lt;-</span> <span class="k">null</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs37', 65)" onmouseover="showTip(event, 'fs37', 65)" class="i">count</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs34', 66)" onmouseover="showTip(event, 'fs34', 66)" class="i">getOrDefault</span> <span onmouseout="hideTip(event, 'fs28', 67)" onmouseover="showTip(event, 'fs28', 67)" class="i">outpoint</span><span class="o">.</span><span class="i">Hash</span>
        <span onmouseout="hideTip(event, 'fs32', 68)" onmouseover="showTip(event, 'fs32', 68)" class="i">counts</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs28', 69)" onmouseover="showTip(event, 'fs28', 69)" class="i">outpoint</span><span class="o">.</span><span class="i">Hash</span>] <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs37', 70)" onmouseover="showTip(event, 'fs37', 70)" class="i">count</span><span class="o">-</span><span class="n">1</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs40', 71)" onmouseover="showTip(event, 'fs40', 71)" class="i">addUTXO</span> (<span onmouseout="hideTip(event, 'fs28', 72)" onmouseover="showTip(event, 'fs28', 72)" class="i">outpoint</span><span class="o">:</span> <span class="i">OutPoint</span>) (<span onmouseout="hideTip(event, 'fs41', 73)" onmouseover="showTip(event, 'fs41', 73)" class="i">utxo</span><span class="o">:</span> <span class="i">UTXO</span>) <span class="o">=</span> 
        <span onmouseout="hideTip(event, 'fs31', 74)" onmouseover="showTip(event, 'fs31', 74)" class="i">table</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs28', 75)" onmouseover="showTip(event, 'fs28', 75)" class="i">outpoint</span>] <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs41', 76)" onmouseover="showTip(event, 'fs41', 76)" class="i">utxo</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs37', 77)" onmouseover="showTip(event, 'fs37', 77)" class="i">count</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs34', 78)" onmouseover="showTip(event, 'fs34', 78)" class="i">getOrDefault</span> <span onmouseout="hideTip(event, 'fs28', 79)" onmouseover="showTip(event, 'fs28', 79)" class="i">outpoint</span><span class="o">.</span><span class="i">Hash</span>
        <span onmouseout="hideTip(event, 'fs32', 80)" onmouseover="showTip(event, 'fs32', 80)" class="i">counts</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs28', 81)" onmouseover="showTip(event, 'fs28', 81)" class="i">outpoint</span><span class="o">.</span><span class="i">Hash</span>] <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs37', 82)" onmouseover="showTip(event, 'fs37', 82)" class="i">count</span><span class="o">+</span><span class="n">1</span>
        
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs42', 83)" onmouseover="showTip(event, 'fs42', 83)" class="i">getUTXO</span> (<span onmouseout="hideTip(event, 'fs28', 84)" onmouseover="showTip(event, 'fs28', 84)" class="i">outpoint</span><span class="o">:</span> <span class="i">OutPoint</span>) <span class="o">=</span>
        <span class="k">let</span> (<span onmouseout="hideTip(event, 'fs36', 85)" onmouseover="showTip(event, 'fs36', 85)" class="i">f</span>, <span onmouseout="hideTip(event, 'fs43', 86)" onmouseover="showTip(event, 'fs43', 86)" class="i">utxo</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs31', 87)" onmouseover="showTip(event, 'fs31', 87)" class="i">table</span><span class="o">.</span><span class="i">TryGetValue</span>(<span onmouseout="hideTip(event, 'fs28', 88)" onmouseover="showTip(event, 'fs28', 88)" class="i">outpoint</span>)
        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs36', 89)" onmouseover="showTip(event, 'fs36', 89)" class="i">f</span>
        <span class="k">then</span> 
            <span class="k">if</span> <span onmouseout="hideTip(event, 'fs43', 90)" onmouseover="showTip(event, 'fs43', 90)" class="i">utxo</span> <span class="o">&lt;&gt;</span> <span class="k">null</span> 
            <span class="k">then</span> <span onmouseout="hideTip(event, 'fs44', 91)" onmouseover="showTip(event, 'fs44', 91)" class="i">Some</span>(<span onmouseout="hideTip(event, 'fs43', 92)" onmouseover="showTip(event, 'fs43', 92)" class="i">utxo</span>)
            <span class="k">else</span> 
                <span class="i">logger</span><span class="o">.</span><span class="i">DebugF</span> <span class="s">&quot;</span><span class="s">Cannot</span><span class="s"> </span><span class="s">find</span><span class="s"> </span><span class="s">outpoint</span><span class="s"> </span><span class="s">%</span><span class="s">A</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs28', 93)" onmouseover="showTip(event, 'fs28', 93)" class="i">outpoint</span>
                <span onmouseout="hideTip(event, 'fs45', 94)" onmouseover="showTip(event, 'fs45', 94)" class="i">None</span>
        <span class="k">else</span>
            <span onmouseout="hideTip(event, 'fs30', 95)" onmouseover="showTip(event, 'fs30', 95)" class="i">baseUTXO</span><span class="o">.</span><span class="i">GetUTXO</span> <span onmouseout="hideTip(event, 'fs28', 96)" onmouseover="showTip(event, 'fs28', 96)" class="i">outpoint</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs46', 97)" onmouseover="showTip(event, 'fs46', 97)" class="i">getCount</span> (<span onmouseout="hideTip(event, 'fs47', 98)" onmouseover="showTip(event, 'fs47', 98)" class="i">txHash</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs11', 99)" onmouseover="showTip(event, 'fs11', 99)" class="i">byte</span>[]) <span class="o">=</span>
        <span class="k">let</span> (<span onmouseout="hideTip(event, 'fs36', 100)" onmouseover="showTip(event, 'fs36', 100)" class="i">f</span>, <span onmouseout="hideTip(event, 'fs37', 101)" onmouseover="showTip(event, 'fs37', 101)" class="i">count</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs32', 102)" onmouseover="showTip(event, 'fs32', 102)" class="i">counts</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs38', 103)" onmouseover="showTip(event, 'fs38', 103)" class="i">TryGetValue</span>(<span onmouseout="hideTip(event, 'fs47', 104)" onmouseover="showTip(event, 'fs47', 104)" class="i">txHash</span>)
        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs36', 105)" onmouseover="showTip(event, 'fs36', 105)" class="i">f</span> 
        <span class="k">then</span> <span onmouseout="hideTip(event, 'fs37', 106)" onmouseover="showTip(event, 'fs37', 106)" class="i">count</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs30', 107)" onmouseover="showTip(event, 'fs30', 107)" class="i">baseUTXO</span><span class="o">.</span><span class="i">GetCount</span>(<span onmouseout="hideTip(event, 'fs47', 108)" onmouseover="showTip(event, 'fs47', 108)" class="i">txHash</span>)
        <span class="k">else</span> <span onmouseout="hideTip(event, 'fs30', 109)" onmouseover="showTip(event, 'fs30', 109)" class="i">baseUTXO</span><span class="o">.</span><span class="i">GetCount</span>(<span onmouseout="hideTip(event, 'fs47', 110)" onmouseover="showTip(event, 'fs47', 110)" class="i">txHash</span>)

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs48', 111)" onmouseover="showTip(event, 'fs48', 111)" class="i">commit</span>() <span class="o">=</span> <span class="c">// Write them for good</span>
        <span onmouseout="hideTip(event, 'fs31', 112)" onmouseover="showTip(event, 'fs31', 112)" class="i">table</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs49', 113)" onmouseover="showTip(event, 'fs49', 113)" class="i">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs50', 114)" onmouseover="showTip(event, 'fs50', 114)" class="i">iter</span>(<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs51', 115)" onmouseover="showTip(event, 'fs51', 115)" class="i">kv</span> <span class="k">-&gt;</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs52', 116)" onmouseover="showTip(event, 'fs52', 116)" class="i">outpoint</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs51', 117)" onmouseover="showTip(event, 'fs51', 117)" class="i">kv</span><span class="o">.</span><span class="i">Key</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs53', 118)" onmouseover="showTip(event, 'fs53', 118)" class="i">utxo</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs51', 119)" onmouseover="showTip(event, 'fs51', 119)" class="i">kv</span><span class="o">.</span><span class="i">Value</span>
            <span class="k">if</span> <span onmouseout="hideTip(event, 'fs53', 120)" onmouseover="showTip(event, 'fs53', 120)" class="i">utxo</span> <span class="o">&lt;&gt;</span> <span class="k">null</span> 
            <span class="k">then</span> <span onmouseout="hideTip(event, 'fs30', 121)" onmouseover="showTip(event, 'fs30', 121)" class="i">baseUTXO</span><span class="o">.</span><span class="i">AddUTXO</span>(<span onmouseout="hideTip(event, 'fs52', 122)" onmouseover="showTip(event, 'fs52', 122)" class="i">outpoint</span>, <span onmouseout="hideTip(event, 'fs53', 123)" onmouseover="showTip(event, 'fs53', 123)" class="i">utxo</span>)
            <span class="k">else</span> <span onmouseout="hideTip(event, 'fs30', 124)" onmouseover="showTip(event, 'fs30', 124)" class="i">baseUTXO</span><span class="o">.</span><span class="i">DeleteUTXO</span>(<span onmouseout="hideTip(event, 'fs52', 125)" onmouseover="showTip(event, 'fs52', 125)" class="i">outpoint</span>)
        )
        <span onmouseout="hideTip(event, 'fs31', 126)" onmouseover="showTip(event, 'fs31', 126)" class="i">table</span><span class="o">.</span><span class="i">Clear</span>()
        <span onmouseout="hideTip(event, 'fs32', 127)" onmouseover="showTip(event, 'fs32', 127)" class="i">counts</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs54', 128)" onmouseover="showTip(event, 'fs54', 128)" class="i">Clear</span>()

    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs55', 129)" onmouseover="showTip(event, 'fs55', 129)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs56', 130)" onmouseover="showTip(event, 'fs56', 130)" class="i">Clear</span>() <span class="o">=</span> <span onmouseout="hideTip(event, 'fs31', 131)" onmouseover="showTip(event, 'fs31', 131)" class="i">table</span><span class="o">.</span><span class="i">Clear</span>()
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs55', 132)" onmouseover="showTip(event, 'fs55', 132)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs57', 133)" onmouseover="showTip(event, 'fs57', 133)" class="i">Commit</span>() <span class="o">=</span> <span onmouseout="hideTip(event, 'fs48', 134)" onmouseover="showTip(event, 'fs48', 134)" class="i">commit</span>()

    <span class="k">interface</span> <span class="i">IUTXOAccessor</span> <span class="k">with</span>
        <span class="k">member</span> <span onmouseout="hideTip(event, 'fs55', 135)" onmouseover="showTip(event, 'fs55', 135)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs58', 136)" onmouseover="showTip(event, 'fs58', 136)" class="i">DeleteUTXO</span>(<span onmouseout="hideTip(event, 'fs59', 137)" onmouseover="showTip(event, 'fs59', 137)" class="i">outpoint</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs39', 138)" onmouseover="showTip(event, 'fs39', 138)" class="i">deleteUTXO</span> <span onmouseout="hideTip(event, 'fs59', 139)" onmouseover="showTip(event, 'fs59', 139)" class="i">outpoint</span>
        <span class="k">member</span> <span onmouseout="hideTip(event, 'fs55', 140)" onmouseover="showTip(event, 'fs55', 140)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs60', 141)" onmouseover="showTip(event, 'fs60', 141)" class="i">AddUTXO</span>(<span onmouseout="hideTip(event, 'fs61', 142)" onmouseover="showTip(event, 'fs61', 142)" class="i">outpoint</span>, <span onmouseout="hideTip(event, 'fs62', 143)" onmouseover="showTip(event, 'fs62', 143)" class="i">txOut</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs40', 144)" onmouseover="showTip(event, 'fs40', 144)" class="i">addUTXO</span> <span onmouseout="hideTip(event, 'fs61', 145)" onmouseover="showTip(event, 'fs61', 145)" class="i">outpoint</span> <span onmouseout="hideTip(event, 'fs62', 146)" onmouseover="showTip(event, 'fs62', 146)" class="i">txOut</span>
        <span class="k">member</span> <span onmouseout="hideTip(event, 'fs55', 147)" onmouseover="showTip(event, 'fs55', 147)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs63', 148)" onmouseover="showTip(event, 'fs63', 148)" class="i">GetUTXO</span>(<span onmouseout="hideTip(event, 'fs64', 149)" onmouseover="showTip(event, 'fs64', 149)" class="i">outpoint</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs42', 150)" onmouseover="showTip(event, 'fs42', 150)" class="i">getUTXO</span> <span onmouseout="hideTip(event, 'fs64', 151)" onmouseover="showTip(event, 'fs64', 151)" class="i">outpoint</span>
        <span class="k">member</span> <span onmouseout="hideTip(event, 'fs55', 152)" onmouseover="showTip(event, 'fs55', 152)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs65', 153)" onmouseover="showTip(event, 'fs65', 153)" class="i">GetCount</span>(<span onmouseout="hideTip(event, 'fs47', 154)" onmouseover="showTip(event, 'fs47', 154)" class="i">txHash</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs46', 155)" onmouseover="showTip(event, 'fs46', 155)" class="i">getCount</span> <span onmouseout="hideTip(event, 'fs47', 156)" onmouseover="showTip(event, 'fs47', 156)" class="i">txHash</span>
        <span class="k">member</span> <span onmouseout="hideTip(event, 'fs55', 157)" onmouseover="showTip(event, 'fs55', 157)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs66', 158)" onmouseover="showTip(event, 'fs66', 158)" class="i">Dispose</span>() <span class="o">=</span> <span onmouseout="hideTip(event, 'fs31', 159)" onmouseover="showTip(event, 'fs31', 159)" class="i">table</span><span class="o">.</span><span class="i">Clear</span>()</pre>
</td>
</tr>
</table>

<p>The memory pool receives transactions from the all the connected nodes. Many of them turn out to be invalid, most of the time
because the output is already spent (double-spend). Sometimes though, the signatures are invalid altogether. In any case,
it's important to check the transactions before they are accepted into the pool. When the application receives a new block,
the memory pool gets revalidated and every invalid transaction gets booted out. In this case, it is because of a double-spend between
the transactions in the block and the same one from the pool.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs67', 160)" onmouseover="showTip(event, 'fs67', 160)" class="i">txHash</span> <span class="o">=</span> <span class="i">hashFromHex</span> <span class="s">&quot;</span><span class="s">d4c7e1458bc7d7c54e90cc95117afd95a7498931cc2aa11e18ab0c52fc4cc512</span><span class="s">&quot;</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs68', 161)" onmouseover="showTip(event, 'fs68', 161)" class="i">checkScript</span> (<span onmouseout="hideTip(event, 'fs69', 162)" onmouseover="showTip(event, 'fs69', 162)" class="i">utxoAccessor</span><span class="o">:</span> <span class="i">IUTXOAccessor</span>) (<span onmouseout="hideTip(event, 'fs70', 163)" onmouseover="showTip(event, 'fs70', 163)" class="i">tx</span><span class="o">:</span> <span class="i">Tx</span>)<span class="o">:</span> <span onmouseout="hideTip(event, 'fs71', 164)" onmouseover="showTip(event, 'fs71', 164)" class="i">Option</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs72', 165)" onmouseover="showTip(event, 'fs72', 165)" class="i">unit</span><span class="o">&gt;</span> <span class="o">=</span> 
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs73', 166)" onmouseover="showTip(event, 'fs73', 166)" class="i">x</span> <span class="o">=</span> 
        <span onmouseout="hideTip(event, 'fs70', 167)" onmouseover="showTip(event, 'fs70', 167)" class="i">tx</span><span class="o">.</span><span class="i">TxIns</span> 
            <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs49', 168)" onmouseover="showTip(event, 'fs49', 168)" class="i">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs74', 169)" onmouseover="showTip(event, 'fs74', 169)" class="i">mapi</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs75', 170)" onmouseover="showTip(event, 'fs75', 170)" class="i">i</span> <span onmouseout="hideTip(event, 'fs76', 171)" onmouseover="showTip(event, 'fs76', 171)" class="i">txIn</span> <span class="k">-&gt;</span>
                <span class="k">let</span> <span onmouseout="hideTip(event, 'fs77', 172)" onmouseover="showTip(event, 'fs77', 172)" class="i">scriptEval</span> <span class="o">=</span> <span class="k">new</span> <span class="i">Script</span><span class="o">.</span><span class="i">ScriptRuntime</span>(<span class="i">Script</span><span class="o">.</span><span class="i">computeTxHash</span> <span onmouseout="hideTip(event, 'fs70', 173)" onmouseover="showTip(event, 'fs70', 173)" class="i">tx</span> <span onmouseout="hideTip(event, 'fs75', 174)" onmouseover="showTip(event, 'fs75', 174)" class="i">i</span>)
                <span class="k">let</span> <span onmouseout="hideTip(event, 'fs52', 175)" onmouseover="showTip(event, 'fs52', 175)" class="i">outpoint</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs76', 176)" onmouseover="showTip(event, 'fs76', 176)" class="i">txIn</span><span class="o">.</span><span class="i">PrevOutPoint</span>
                <span class="k">let</span> <span onmouseout="hideTip(event, 'fs78', 177)" onmouseover="showTip(event, 'fs78', 177)" class="i">utxo</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs69', 178)" onmouseover="showTip(event, 'fs69', 178)" class="i">utxoAccessor</span><span class="o">.</span><span class="i">GetUTXO</span> <span onmouseout="hideTip(event, 'fs52', 179)" onmouseover="showTip(event, 'fs52', 179)" class="i">outpoint</span>
                <span onmouseout="hideTip(event, 'fs78', 180)" onmouseover="showTip(event, 'fs78', 180)" class="i">utxo</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs71', 181)" onmouseover="showTip(event, 'fs71', 181)" class="i">Option</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs79', 182)" onmouseover="showTip(event, 'fs79', 182)" class="i">map</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs53', 183)" onmouseover="showTip(event, 'fs53', 183)" class="i">utxo</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs77', 184)" onmouseover="showTip(event, 'fs77', 184)" class="i">scriptEval</span><span class="o">.</span><span class="i">Verify</span>(<span onmouseout="hideTip(event, 'fs76', 185)" onmouseover="showTip(event, 'fs76', 185)" class="i">txIn</span><span class="o">.</span><span class="i">Script</span>, <span onmouseout="hideTip(event, 'fs53', 186)" onmouseover="showTip(event, 'fs53', 186)" class="i">utxo</span><span class="o">.</span><span class="i">TxOut</span><span class="o">.</span><span class="i">Script</span>))
                ) 
            <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs49', 187)" onmouseover="showTip(event, 'fs49', 187)" class="i">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs80', 188)" onmouseover="showTip(event, 'fs80', 188)" class="i">toList</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs71', 189)" onmouseover="showTip(event, 'fs71', 189)" class="i">Option</span><span class="o">.</span><span class="i">sequence</span> 
            <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs71', 190)" onmouseover="showTip(event, 'fs71', 190)" class="i">Option</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs79', 191)" onmouseover="showTip(event, 'fs79', 191)" class="i">map</span>(<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs81', 192)" onmouseover="showTip(event, 'fs81', 192)" class="i">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs81', 193)" onmouseover="showTip(event, 'fs81', 193)" class="i">x</span><span class="o">.</span><span class="i">All</span>(<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs81', 194)" onmouseover="showTip(event, 'fs81', 194)" class="i">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs81', 195)" onmouseover="showTip(event, 'fs81', 195)" class="i">x</span>)) <span class="c">// tx succeeds if all scripts succeed</span>
    (<span onmouseout="hideTip(event, 'fs73', 196)" onmouseover="showTip(event, 'fs73', 196)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs82', 197)" onmouseover="showTip(event, 'fs82', 197)" class="i">IsSome</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs73', 198)" onmouseover="showTip(event, 'fs73', 198)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs83', 199)" onmouseover="showTip(event, 'fs83', 199)" class="i">Value</span>) <span class="o">|&gt;</span> <span class="i">errorIfFalse</span> <span class="s">&quot;</span><span class="s">script</span><span class="s"> </span><span class="s">failure</span><span class="s">&quot;</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs84', 200)" onmouseover="showTip(event, 'fs84', 200)" class="i">mempoolAccessor</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs29', 201)" onmouseover="showTip(event, 'fs29', 201)" class="i">MempoolUTXOAccessor</span>(<span class="i">utxoAccessor</span>)
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs85', 202)" onmouseover="showTip(event, 'fs85', 202)" class="i">nopWriter</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs15', 203)" onmouseover="showTip(event, 'fs15', 203)" class="i">NopUndoWriter</span>()</pre>
</td>
</tr>
</table>

<p>Validating a tx in the pool will update the mempool UTXO set that is built on top of the confirmed UTXO. But for
the mempool, there is nothing to undo and therefore no need for an undo writer.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs86', 204)" onmouseover="showTip(event, 'fs86', 204)" class="i">validate</span> (<span onmouseout="hideTip(event, 'fs87', 205)" onmouseover="showTip(event, 'fs87', 205)" class="i">tx</span><span class="o">:</span> <span class="i">Tx</span>) <span class="o">=</span>
    <span class="i">maybe</span> {
        <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs68', 206)" onmouseover="showTip(event, 'fs68', 206)" class="i">checkScript</span> <span onmouseout="hideTip(event, 'fs84', 207)" onmouseover="showTip(event, 'fs84', 207)" class="i">mempoolAccessor</span> <span onmouseout="hideTip(event, 'fs87', 208)" onmouseover="showTip(event, 'fs87', 208)" class="i">tx</span>
        <span class="i">processUTXO</span> <span onmouseout="hideTip(event, 'fs84', 209)" onmouseover="showTip(event, 'fs84', 209)" class="i">mempoolAccessor</span> <span onmouseout="hideTip(event, 'fs85', 210)" onmouseover="showTip(event, 'fs85', 210)" class="i">nopWriter</span> <span class="k">false</span> <span onmouseout="hideTip(event, 'fs14', 211)" onmouseover="showTip(event, 'fs14', 211)" class="i">mempoolHeight</span> <span onmouseout="hideTip(event, 'fs87', 212)" onmouseover="showTip(event, 'fs87', 212)" class="i">tx</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs18', 213)" onmouseover="showTip(event, 'fs18', 213)" class="i">ignore</span>
        <span class="k">return</span> ()
    }</pre>
</td>
</tr>
</table>

<p>Revalidate builds a new pool and then flips the old one with the new one.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs88', 214)" onmouseover="showTip(event, 'fs88', 214)" class="i">revalidate</span> () <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs84', 215)" onmouseover="showTip(event, 'fs84', 215)" class="i">mempoolAccessor</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs89', 216)" onmouseover="showTip(event, 'fs89', 216)" class="i">Clear</span>()
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs90', 217)" onmouseover="showTip(event, 'fs90', 217)" class="i">newListTx</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs10', 218)" onmouseover="showTip(event, 'fs10', 218)" class="i">List</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs11', 219)" onmouseover="showTip(event, 'fs11', 219)" class="i">byte</span>[]<span class="o">&gt;</span>()
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs91', 220)" onmouseover="showTip(event, 'fs91', 220)" class="i">newMempool</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs13', 221)" onmouseover="showTip(event, 'fs13', 221)" class="i">Dictionary</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs11', 222)" onmouseover="showTip(event, 'fs11', 222)" class="i">byte</span>[], <span class="i">Tx</span><span class="o">&gt;</span>(<span class="k">new</span> <span class="i">HashCompare</span>())
    <span onmouseout="hideTip(event, 'fs9', 223)" onmouseover="showTip(event, 'fs9', 223)" class="i">listTx</span> <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs9', 224)" onmouseover="showTip(event, 'fs9', 224)" class="i">listTx</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs92', 225)" onmouseover="showTip(event, 'fs92', 225)" class="i">Where</span>(<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs35', 226)" onmouseover="showTip(event, 'fs35', 226)" class="i">hash</span> <span class="k">-&gt;</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs93', 227)" onmouseover="showTip(event, 'fs93', 227)" class="i">tx</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 228)" onmouseover="showTip(event, 'fs12', 228)" class="i">mempool</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs35', 229)" onmouseover="showTip(event, 'fs35', 229)" class="i">hash</span>]
        (<span onmouseout="hideTip(event, 'fs86', 230)" onmouseover="showTip(event, 'fs86', 230)" class="i">validate</span> <span onmouseout="hideTip(event, 'fs93', 231)" onmouseover="showTip(event, 'fs93', 231)" class="i">tx</span>)<span class="o">.</span><span class="i">IsSome</span>
        )<span class="o">.</span><span class="i">ToList</span>()
    <span onmouseout="hideTip(event, 'fs12', 232)" onmouseover="showTip(event, 'fs12', 232)" class="i">mempool</span> <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs9', 233)" onmouseover="showTip(event, 'fs9', 233)" class="i">listTx</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs94', 234)" onmouseover="showTip(event, 'fs94', 234)" class="i">Select</span>(<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs35', 235)" onmouseover="showTip(event, 'fs35', 235)" class="i">hash</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs12', 236)" onmouseover="showTip(event, 'fs12', 236)" class="i">mempool</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs35', 237)" onmouseover="showTip(event, 'fs35', 237)" class="i">hash</span>])<span class="o">.</span><span class="i">ToDictionary</span>(<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs93', 238)" onmouseover="showTip(event, 'fs93', 238)" class="i">tx</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs93', 239)" onmouseover="showTip(event, 'fs93', 239)" class="i">tx</span><span class="o">.</span><span class="i">Hash</span>)
    <span class="i">logger</span><span class="o">.</span><span class="i">InfoF</span> <span class="s">&quot;</span><span class="s">Mempool</span><span class="s"> </span><span class="s">has</span><span class="s"> </span><span class="s">%</span><span class="s">d</span><span class="s"> </span><span class="s">transactions</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs12', 240)" onmouseover="showTip(event, 'fs12', 240)" class="i">mempool</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs95', 241)" onmouseover="showTip(event, 'fs95', 241)" class="i">Count</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs96', 242)" onmouseover="showTip(event, 'fs96', 242)" class="i">addTx</span> <span onmouseout="hideTip(event, 'fs93', 243)" onmouseover="showTip(event, 'fs93', 243)" class="i">tx</span> <span class="o">=</span> 
    <span class="k">try</span>
        <span onmouseout="hideTip(event, 'fs86', 244)" onmouseover="showTip(event, 'fs86', 244)" class="i">validate</span> <span onmouseout="hideTip(event, 'fs93', 245)" onmouseover="showTip(event, 'fs93', 245)" class="i">tx</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs71', 246)" onmouseover="showTip(event, 'fs71', 246)" class="i">Option</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs97', 247)" onmouseover="showTip(event, 'fs97', 247)" class="i">iter</span>(<span class="k">fun</span> () <span class="k">-&gt;</span>
            <span onmouseout="hideTip(event, 'fs9', 248)" onmouseover="showTip(event, 'fs9', 248)" class="i">listTx</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs98', 249)" onmouseover="showTip(event, 'fs98', 249)" class="i">Add</span>(<span onmouseout="hideTip(event, 'fs93', 250)" onmouseover="showTip(event, 'fs93', 250)" class="i">tx</span><span class="o">.</span><span class="i">Hash</span>)
            <span onmouseout="hideTip(event, 'fs12', 251)" onmouseover="showTip(event, 'fs12', 251)" class="i">mempool</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs99', 252)" onmouseover="showTip(event, 'fs99', 252)" class="i">Item</span>(<span onmouseout="hideTip(event, 'fs93', 253)" onmouseover="showTip(event, 'fs93', 253)" class="i">tx</span><span class="o">.</span><span class="i">Hash</span>) <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs93', 254)" onmouseover="showTip(event, 'fs93', 254)" class="i">tx</span>
            <span class="i">broadcastToPeers</span><span class="o">.</span><span class="i">OnNext</span>(<span class="k">new</span> <span class="i">BitcoinMessage</span>(<span class="s">&quot;</span><span class="s">tx</span><span class="s">&quot;</span>, <span onmouseout="hideTip(event, 'fs93', 255)" onmouseover="showTip(event, 'fs93', 255)" class="i">tx</span><span class="o">.</span><span class="i">ToByteArray</span>()))
            <span class="i">logger</span><span class="o">.</span><span class="i">DebugF</span> <span class="s">&quot;</span><span class="s">Unconfirmed</span><span class="s"> </span><span class="s">TX</span><span class="s"> </span><span class="s">-</span><span class="s">&gt;</span><span class="s"> </span><span class="s">%</span><span class="s">s</span><span class="s">&quot;</span> (<span class="i">hashToHex</span> <span onmouseout="hideTip(event, 'fs93', 256)" onmouseover="showTip(event, 'fs93', 256)" class="i">tx</span><span class="o">.</span><span class="i">Hash</span>)
            )
    <span class="k">with</span>
    | <span class="i">ValidationException</span> <span class="i">e</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs18', 257)" onmouseover="showTip(event, 'fs18', 257)" class="i">ignore</span>() <span class="c">// printfn &quot;Invalid tx: %s&quot; (hashToHex tx.Hash)</span></pre>
</td>
</tr>
</table>

<h2>Message loop</h2>

<p>The main message loop picks up</p>

<ul>
<li>new <code>inv</code> messages. If the mempool doesn't have it, it will request for the tx data using <code>getdata</code></li>
<li><code>tx</code> data. It gets validated and then put into the pool</li>
<li><code>getdata</code>. When another node ask for the details of a tx it doesn't have</li>
<li><code>mempool</code>. The mempool message that triggers a full dump of the mempool as inv messages</li>
<li>revalidate</li>
</ul>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs100', 258)" onmouseover="showTip(event, 'fs100', 258)" class="i">processCommand</span> (<span onmouseout="hideTip(event, 'fs101', 259)" onmouseover="showTip(event, 'fs101', 259)" class="i">command</span><span class="o">:</span> <span class="i">MempoolCommand</span>) <span class="o">=</span> 
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs101', 260)" onmouseover="showTip(event, 'fs101', 260)" class="i">command</span> <span class="k">with</span>
    | <span class="i">Revalidate</span> (<span class="i">currentHeight</span>, <span class="i">undoTxs</span>) <span class="k">-&gt;</span>
        <span onmouseout="hideTip(event, 'fs14', 261)" onmouseover="showTip(event, 'fs14', 261)" class="i">mempoolHeight</span> <span class="o">&lt;-</span> <span class="i">currentHeight</span>
        <span class="k">for</span> <span class="i">txBlock</span> <span class="k">in</span> <span class="i">undoTxs</span> <span class="k">do</span>
        <span class="k">for</span> <span class="i">tx</span> <span class="k">in</span> <span class="i">txBlock</span> <span class="k">do</span>
            <span onmouseout="hideTip(event, 'fs9', 262)" onmouseover="showTip(event, 'fs9', 262)" class="i">listTx</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs98', 263)" onmouseover="showTip(event, 'fs98', 263)" class="i">Add</span>(<span class="i">tx</span><span class="o">.</span><span class="i">Hash</span>)
            <span onmouseout="hideTip(event, 'fs12', 264)" onmouseover="showTip(event, 'fs12', 264)" class="i">mempool</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs99', 265)" onmouseover="showTip(event, 'fs99', 265)" class="i">Item</span>(<span class="i">tx</span><span class="o">.</span><span class="i">Hash</span>) <span class="o">&lt;-</span> <span class="i">tx</span>
        <span onmouseout="hideTip(event, 'fs88', 266)" onmouseover="showTip(event, 'fs88', 266)" class="i">revalidate</span>()
    | <span class="i">Tx</span> <span class="i">tx</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs96', 267)" onmouseover="showTip(event, 'fs96', 267)" class="i">addTx</span> <span class="i">tx</span>
    | <span class="i">Inv</span> (<span class="i">invVector</span>, <span class="i">peer</span>) <span class="k">-&gt;</span> 
        <span class="k">let</span> <span class="i">newInvs</span> <span class="o">=</span> <span class="i">invVector</span><span class="o">.</span><span class="i">Invs</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs10', 268)" onmouseover="showTip(event, 'fs10', 268)" class="i">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs102', 269)" onmouseover="showTip(event, 'fs102', 269)" class="i">filter</span>(<span class="k">fun</span> <span class="i">inv</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs103', 270)" onmouseover="showTip(event, 'fs103', 270)" class="i">not</span> (<span onmouseout="hideTip(event, 'fs12', 271)" onmouseover="showTip(event, 'fs12', 271)" class="i">mempool</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs104', 272)" onmouseover="showTip(event, 'fs104', 272)" class="i">ContainsKey</span> <span class="i">inv</span><span class="o">.</span><span class="i">Hash</span>))
        <span class="i">newInvs</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs10', 273)" onmouseover="showTip(event, 'fs10', 273)" class="i">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs105', 274)" onmouseover="showTip(event, 'fs105', 274)" class="i">iter</span> (<span class="k">fun</span> <span class="i">inv</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs12', 275)" onmouseover="showTip(event, 'fs12', 275)" class="i">mempool</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs106', 276)" onmouseover="showTip(event, 'fs106', 276)" class="i">Add</span>(<span class="i">inv</span><span class="o">.</span><span class="i">Hash</span>, <span class="k">null</span>))
        <span class="k">let</span> <span class="i">gd</span> <span class="o">=</span> <span class="k">new</span> <span class="i">GetData</span>(<span class="i">newInvs</span>)
        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs103', 277)" onmouseover="showTip(event, 'fs103', 277)" class="i">not</span> <span class="i">gd</span><span class="o">.</span><span class="i">Invs</span><span class="o">.</span><span class="i">IsEmpty</span> <span class="k">then</span>
            <span class="i">peer</span><span class="o">.</span><span class="i">Receive</span>(<span class="i">GetData</span> <span class="i">gd</span>)
    | <span class="i">GetTx</span> (<span class="i">invs</span>, <span class="i">peer</span>) <span class="k">-&gt;</span>
        <span class="k">for</span> <span class="i">inv</span> <span class="k">in</span> <span class="i">invs</span> <span class="k">do</span>
            <span class="k">let</span> (<span class="i">f</span>, <span class="i">tx</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 278)" onmouseover="showTip(event, 'fs12', 278)" class="i">mempool</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs107', 279)" onmouseover="showTip(event, 'fs107', 279)" class="i">TryGetValue</span>(<span class="i">inv</span><span class="o">.</span><span class="i">Hash</span>)
            <span class="k">if</span> <span class="i">f</span> <span class="o">&amp;&amp;</span> <span class="i">tx</span> <span class="o">&lt;&gt;</span> <span class="k">null</span> <span class="k">then</span>
                <span class="i">peer</span><span class="o">.</span><span class="i">Send</span>(<span class="k">new</span> <span class="i">BitcoinMessage</span>(<span class="s">&quot;</span><span class="s">tx</span><span class="s">&quot;</span>, <span class="i">tx</span><span class="o">.</span><span class="i">ToByteArray</span>()))
    | <span class="i">Mempool</span> <span class="i">peer</span> <span class="k">-&gt;</span> 
        <span class="k">let</span> <span class="i">inv</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 280)" onmouseover="showTip(event, 'fs12', 280)" class="i">mempool</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs108', 281)" onmouseover="showTip(event, 'fs108', 281)" class="i">Keys</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs49', 282)" onmouseover="showTip(event, 'fs49', 282)" class="i">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs109', 283)" onmouseover="showTip(event, 'fs109', 283)" class="i">map</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs67', 284)" onmouseover="showTip(event, 'fs67', 284)" class="i">txHash</span> <span class="k">-&gt;</span> <span class="i">InvEntry</span>(<span class="i">txInvType</span>, <span onmouseout="hideTip(event, 'fs67', 285)" onmouseover="showTip(event, 'fs67', 285)" class="i">txHash</span>)) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs49', 286)" onmouseover="showTip(event, 'fs49', 286)" class="i">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs80', 287)" onmouseover="showTip(event, 'fs80', 287)" class="i">toList</span>
        <span class="i">logger</span><span class="o">.</span><span class="i">DebugF</span> <span class="s">&quot;</span><span class="s">MemoryPool</span><span class="s"> </span><span class="s">%</span><span class="s">A</span><span class="s">&quot;</span> <span class="i">inv</span>
        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs103', 288)" onmouseover="showTip(event, 'fs103', 288)" class="i">not</span> <span class="i">inv</span><span class="o">.</span><span class="i">IsEmpty</span> <span class="k">then</span>
            <span class="k">let</span> <span class="i">invVec</span> <span class="o">=</span> <span class="i">InvVector</span>(<span class="i">inv</span>)
            <span class="i">peer</span><span class="o">.</span><span class="i">Send</span>(<span class="k">new</span> <span class="i">BitcoinMessage</span>(<span class="s">&quot;</span><span class="s">inv</span><span class="s">&quot;</span>, <span class="i">invVec</span><span class="o">.</span><span class="i">ToByteArray</span>()))

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs110', 289)" onmouseover="showTip(event, 'fs110', 289)" class="i">startMempool</span>() <span class="o">=</span>
    <span class="i">mempoolIncoming</span><span class="o">.</span><span class="i">ObserveOn</span>(<span class="i">NewThreadScheduler</span><span class="o">.</span><span class="i">Default</span>)<span class="o">.</span><span class="i">Subscribe</span>(<span onmouseout="hideTip(event, 'fs100', 290)" onmouseover="showTip(event, 'fs100', 290)" class="i">processCommand</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs18', 291)" onmouseover="showTip(event, 'fs18', 291)" class="i">ignore</span></pre>
</td>
</tr>
</table>

          <div class="tip" id="fs1">module Mempool</div>
<div class="tip" id="fs2">namespace System</div>
<div class="tip" id="fs3">namespace System.Linq</div>
<div class="tip" id="fs4">namespace System.Collections</div>
<div class="tip" id="fs5">namespace System.Collections.Generic</div>
<div class="tip" id="fs6">Multiple items<br />namespace System.Linq<br /><br />--------------------<br />namespace Microsoft.FSharp.Linq</div>
<div class="tip" id="fs7">Multiple items<br />namespace System.Collections<br /><br />--------------------<br />namespace Microsoft.FSharp.Collections</div>
<div class="tip" id="fs8">Multiple items<br />type Choice&lt;&#39;T1,&#39;T2&gt; =<br />&#160;&#160;| Choice1Of2 of &#39;T1<br />&#160;&#160;| Choice2Of2 of &#39;T2<br /><br />Full name: Microsoft.FSharp.Core.Choice&lt;_,_&gt;<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3&gt; =<br />&#160;&#160;| Choice1Of3 of &#39;T1<br />&#160;&#160;| Choice2Of3 of &#39;T2<br />&#160;&#160;| Choice3Of3 of &#39;T3<br /><br />Full name: Microsoft.FSharp.Core.Choice&lt;_,_,_&gt;<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3,&#39;T4&gt; =<br />&#160;&#160;| Choice1Of4 of &#39;T1<br />&#160;&#160;| Choice2Of4 of &#39;T2<br />&#160;&#160;| Choice3Of4 of &#39;T3<br />&#160;&#160;| Choice4Of4 of &#39;T4<br /><br />Full name: Microsoft.FSharp.Core.Choice&lt;_,_,_,_&gt;<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3,&#39;T4,&#39;T5&gt; =<br />&#160;&#160;| Choice1Of5 of &#39;T1<br />&#160;&#160;| Choice2Of5 of &#39;T2<br />&#160;&#160;| Choice3Of5 of &#39;T3<br />&#160;&#160;| Choice4Of5 of &#39;T4<br />&#160;&#160;| Choice5Of5 of &#39;T5<br /><br />Full name: Microsoft.FSharp.Core.Choice&lt;_,_,_,_,_&gt;<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3,&#39;T4,&#39;T5,&#39;T6&gt; =<br />&#160;&#160;| Choice1Of6 of &#39;T1<br />&#160;&#160;| Choice2Of6 of &#39;T2<br />&#160;&#160;| Choice3Of6 of &#39;T3<br />&#160;&#160;| Choice4Of6 of &#39;T4<br />&#160;&#160;| Choice5Of6 of &#39;T5<br />&#160;&#160;| Choice6Of6 of &#39;T6<br /><br />Full name: Microsoft.FSharp.Core.Choice&lt;_,_,_,_,_,_&gt;<br /><br />--------------------<br />type Choice&lt;&#39;T1,&#39;T2,&#39;T3,&#39;T4,&#39;T5,&#39;T6,&#39;T7&gt; =<br />&#160;&#160;| Choice1Of7 of &#39;T1<br />&#160;&#160;| Choice2Of7 of &#39;T2<br />&#160;&#160;| Choice3Of7 of &#39;T3<br />&#160;&#160;| Choice4Of7 of &#39;T4<br />&#160;&#160;| Choice5Of7 of &#39;T5<br />&#160;&#160;| Choice6Of7 of &#39;T6<br />&#160;&#160;| Choice7Of7 of &#39;T7<br /><br />Full name: Microsoft.FSharp.Core.Choice&lt;_,_,_,_,_,_,_&gt;</div>
<div class="tip" id="fs9">val mutable listTx : List&lt;byte []&gt;<br /><br />Full name: Mempool.listTx</div>
<div class="tip" id="fs10">Multiple items<br />type List&lt;&#39;T&gt; =<br />&#160;&#160;new : unit -&gt; List&lt;&#39;T&gt; + 2 overloads<br />&#160;&#160;member Add : item:&#39;T -&gt; unit<br />&#160;&#160;member AddRange : collection:IEnumerable&lt;&#39;T&gt; -&gt; unit<br />&#160;&#160;member AsReadOnly : unit -&gt; ReadOnlyCollection&lt;&#39;T&gt;<br />&#160;&#160;member BinarySearch : item:&#39;T -&gt; int + 2 overloads<br />&#160;&#160;member Capacity : int with get, set<br />&#160;&#160;member Clear : unit -&gt; unit<br />&#160;&#160;member Contains : item:&#39;T -&gt; bool<br />&#160;&#160;member ConvertAll&lt;&#39;TOutput&gt; : converter:Converter&lt;&#39;T, &#39;TOutput&gt; -&gt; List&lt;&#39;TOutput&gt;<br />&#160;&#160;member CopyTo : array:&#39;T[] -&gt; unit + 2 overloads<br />&#160;&#160;...<br />&#160;&#160;nested type Enumerator<br /><br />Full name: System.Collections.Generic.List&lt;_&gt;<br /><br />--------------------<br />List() : unit<br />List(capacity: int) : unit<br />List(collection: IEnumerable&lt;&#39;T&gt;) : unit</div>
<div class="tip" id="fs11">Multiple items<br />val byte : value:&#39;T -&gt; byte (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.byte<br /><br />--------------------<br />type byte = Byte<br /><br />Full name: Microsoft.FSharp.Core.byte</div>
<div class="tip" id="fs12">val mutable mempool : Dictionary&lt;obj,obj&gt;<br /><br />Full name: Mempool.mempool</div>
<div class="tip" id="fs13">Multiple items<br />type Dictionary&lt;&#39;TKey,&#39;TValue&gt; =<br />&#160;&#160;new : unit -&gt; Dictionary&lt;&#39;TKey, &#39;TValue&gt; + 5 overloads<br />&#160;&#160;member Add : key:&#39;TKey * value:&#39;TValue -&gt; unit<br />&#160;&#160;member Clear : unit -&gt; unit<br />&#160;&#160;member Comparer : IEqualityComparer&lt;&#39;TKey&gt;<br />&#160;&#160;member ContainsKey : key:&#39;TKey -&gt; bool<br />&#160;&#160;member ContainsValue : value:&#39;TValue -&gt; bool<br />&#160;&#160;member Count : int<br />&#160;&#160;member GetEnumerator : unit -&gt; Enumerator&lt;&#39;TKey, &#39;TValue&gt;<br />&#160;&#160;member GetObjectData : info:SerializationInfo * context:StreamingContext -&gt; unit<br />&#160;&#160;member Item : &#39;TKey -&gt; &#39;TValue with get, set<br />&#160;&#160;...<br />&#160;&#160;nested type Enumerator<br />&#160;&#160;nested type KeyCollection<br />&#160;&#160;nested type ValueCollection<br /><br />Full name: System.Collections.Generic.Dictionary&lt;_,_&gt;<br /><br />--------------------<br />Dictionary() : unit<br />Dictionary(capacity: int) : unit<br />Dictionary(comparer: IEqualityComparer&lt;&#39;TKey&gt;) : unit<br />Dictionary(dictionary: IDictionary&lt;&#39;TKey,&#39;TValue&gt;) : unit<br />Dictionary(capacity: int, comparer: IEqualityComparer&lt;&#39;TKey&gt;) : unit<br />Dictionary(dictionary: IDictionary&lt;&#39;TKey,&#39;TValue&gt;, comparer: IEqualityComparer&lt;&#39;TKey&gt;) : unit</div>
<div class="tip" id="fs14">val mutable mempoolHeight : int<br /><br />Full name: Mempool.mempoolHeight</div>
<div class="tip" id="fs15">Multiple items<br />type NopUndoWriter =<br />&#160;&#160;interface obj<br />&#160;&#160;new : unit -&gt; NopUndoWriter<br />&#160;&#160;override Write : &#39;a * &#39;b * &#39;c -&gt; unit<br /><br />Full name: Mempool.NopUndoWriter<br /><br />--------------------<br />new : unit -&gt; NopUndoWriter</div>
<div class="tip" id="fs16">val x : NopUndoWriter</div>
<div class="tip" id="fs17">override NopUndoWriter.Write : &#39;a * &#39;b * &#39;c -&gt; unit<br /><br />Full name: Mempool.NopUndoWriter.Write</div>
<div class="tip" id="fs18">val ignore : value:&#39;T -&gt; unit<br /><br />Full name: Microsoft.FSharp.Core.Operators.ignore</div>
<div class="tip" id="fs19">Multiple items<br />type OutpointCompare =<br />&#160;&#160;interface obj<br />&#160;&#160;new : unit -&gt; OutpointCompare<br />&#160;&#160;override Equals : left:&#39;c * right:&#39;d -&gt; bool<br />&#160;&#160;override GetHashCode : outpoint:&#39;a -&gt; &#39;b<br /><br />Full name: Mempool.OutpointCompare<br /><br />--------------------<br />new : unit -&gt; OutpointCompare</div>
<div class="tip" id="fs20">type IEqualityComparer&lt;&#39;T&gt; =<br />&#160;&#160;member Equals : x:&#39;T * y:&#39;T -&gt; bool<br />&#160;&#160;member GetHashCode : obj:&#39;T -&gt; int<br /><br />Full name: System.Collections.Generic.IEqualityComparer&lt;_&gt;</div>
<div class="tip" id="fs21">val x : OutpointCompare</div>
<div class="tip" id="fs22">override OutpointCompare.Equals : left:&#39;c * right:&#39;d -&gt; bool<br /><br />Full name: Mempool.OutpointCompare.Equals</div>
<div class="tip" id="fs23">val left : &#39;c</div>
<div class="tip" id="fs24">val right : &#39;d</div>
<div class="tip" id="fs25">type obj = Object<br /><br />Full name: Microsoft.FSharp.Core.obj</div>
<div class="tip" id="fs26">Object.ReferenceEquals(objA: obj, objB: obj) : bool</div>
<div class="tip" id="fs27">override OutpointCompare.GetHashCode : outpoint:&#39;a -&gt; &#39;b<br /><br />Full name: Mempool.OutpointCompare.GetHashCode</div>
<div class="tip" id="fs28">val outpoint : &#39;a</div>
<div class="tip" id="fs29">Multiple items<br />type MempoolUTXOAccessor =<br />&#160;&#160;interface obj<br />&#160;&#160;new : baseUTXO:obj -&gt; MempoolUTXOAccessor<br />&#160;&#160;override AddUTXO : outpoint:&#39;d * txOut:&#39;e -&gt; unit<br />&#160;&#160;member Clear : unit -&gt; &#39;g<br />&#160;&#160;member Commit : unit -&gt; unit<br />&#160;&#160;override DeleteUTXO : outpoint:&#39;f -&gt; unit<br />&#160;&#160;override Dispose : unit -&gt; &#39;a<br />&#160;&#160;override GetCount : txHash:byte [] -&gt; int<br />&#160;&#160;override GetUTXO : outpoint:&#39;b -&gt; &#39;c option (requires equality and &#39;c : null)<br /><br />Full name: Mempool.MempoolUTXOAccessor<br /><br />--------------------<br />new : baseUTXO:obj -&gt; MempoolUTXOAccessor</div>
<div class="tip" id="fs30">val baseUTXO : obj</div>
<div class="tip" id="fs31">val table : seq&lt;obj&gt;</div>
<div class="tip" id="fs32">val counts : Dictionary&lt;byte [],int&gt;</div>
<div class="tip" id="fs33">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int<br /><br />--------------------<br />type int = int32<br /><br />Full name: Microsoft.FSharp.Core.int<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; = int<br /><br />Full name: Microsoft.FSharp.Core.int&lt;_&gt;</div>
<div class="tip" id="fs34">val getOrDefault : (byte [] -&gt; int)</div>
<div class="tip" id="fs35">val hash : byte []</div>
<div class="tip" id="fs36">val f : bool</div>
<div class="tip" id="fs37">val count : int</div>
<div class="tip" id="fs38">Dictionary.TryGetValue(key: byte [], value: byref&lt;int&gt;) : bool</div>
<div class="tip" id="fs39">val deleteUTXO : (&#39;a -&gt; unit)</div>
<div class="tip" id="fs40">val addUTXO : (&#39;a -&gt; &#39;b -&gt; unit)</div>
<div class="tip" id="fs41">val utxo : &#39;b</div>
<div class="tip" id="fs42">val getUTXO : (&#39;a -&gt; &#39;b option) (requires equality and &#39;b : null)</div>
<div class="tip" id="fs43">val utxo : &#39;b (requires equality and &#39;b : null)</div>
<div class="tip" id="fs44">union case Option.Some: Value: &#39;T -&gt; Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs45">union case Option.None: Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs46">val getCount : (byte [] -&gt; int)</div>
<div class="tip" id="fs47">val txHash : byte []</div>
<div class="tip" id="fs48">val commit : (unit -&gt; unit)</div>
<div class="tip" id="fs49">module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs50">val iter : action:(&#39;T -&gt; unit) -&gt; source:seq&lt;&#39;T&gt; -&gt; unit<br /><br />Full name: Microsoft.FSharp.Collections.Seq.iter</div>
<div class="tip" id="fs51">val kv : obj</div>
<div class="tip" id="fs52">val outpoint : obj</div>
<div class="tip" id="fs53">val utxo : obj</div>
<div class="tip" id="fs54">Dictionary.Clear() : unit</div>
<div class="tip" id="fs55">val x : MempoolUTXOAccessor</div>
<div class="tip" id="fs56">member MempoolUTXOAccessor.Clear : unit -&gt; &#39;g<br /><br />Full name: Mempool.MempoolUTXOAccessor.Clear</div>
<div class="tip" id="fs57">member MempoolUTXOAccessor.Commit : unit -&gt; unit<br /><br />Full name: Mempool.MempoolUTXOAccessor.Commit</div>
<div class="tip" id="fs58">override MempoolUTXOAccessor.DeleteUTXO : outpoint:&#39;f -&gt; unit<br /><br />Full name: Mempool.MempoolUTXOAccessor.DeleteUTXO</div>
<div class="tip" id="fs59">val outpoint : &#39;f</div>
<div class="tip" id="fs60">override MempoolUTXOAccessor.AddUTXO : outpoint:&#39;d * txOut:&#39;e -&gt; unit<br /><br />Full name: Mempool.MempoolUTXOAccessor.AddUTXO</div>
<div class="tip" id="fs61">val outpoint : &#39;d</div>
<div class="tip" id="fs62">val txOut : &#39;e</div>
<div class="tip" id="fs63">override MempoolUTXOAccessor.GetUTXO : outpoint:&#39;b -&gt; &#39;c option (requires equality and &#39;c : null)<br /><br />Full name: Mempool.MempoolUTXOAccessor.GetUTXO</div>
<div class="tip" id="fs64">val outpoint : &#39;b</div>
<div class="tip" id="fs65">override MempoolUTXOAccessor.GetCount : txHash:byte [] -&gt; int<br /><br />Full name: Mempool.MempoolUTXOAccessor.GetCount</div>
<div class="tip" id="fs66">override MempoolUTXOAccessor.Dispose : unit -&gt; &#39;a<br /><br />Full name: Mempool.MempoolUTXOAccessor.Dispose</div>
<div class="tip" id="fs67">val txHash : obj<br /><br />Full name: Mempool.txHash</div>
<div class="tip" id="fs68">val checkScript : utxoAccessor:&#39;a -&gt; tx:&#39;b -&gt; Option&lt;unit&gt;<br /><br />Full name: Mempool.checkScript</div>
<div class="tip" id="fs69">val utxoAccessor : &#39;a</div>
<div class="tip" id="fs70">val tx : &#39;b</div>
<div class="tip" id="fs71">module Option<br /><br />from Microsoft.FSharp.Core</div>
<div class="tip" id="fs72">type unit = Unit<br /><br />Full name: Microsoft.FSharp.Core.unit</div>
<div class="tip" id="fs73">val x : bool option</div>
<div class="tip" id="fs74">val mapi : mapping:(int -&gt; &#39;T -&gt; &#39;U) -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;U&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.mapi</div>
<div class="tip" id="fs75">val i : int</div>
<div class="tip" id="fs76">val txIn : obj</div>
<div class="tip" id="fs77">val scriptEval : obj</div>
<div class="tip" id="fs78">val utxo : obj option</div>
<div class="tip" id="fs79">val map : mapping:(&#39;T -&gt; &#39;U) -&gt; option:&#39;T option -&gt; &#39;U option<br /><br />Full name: Microsoft.FSharp.Core.Option.map</div>
<div class="tip" id="fs80">val toList : source:seq&lt;&#39;T&gt; -&gt; &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.Seq.toList</div>
<div class="tip" id="fs81">val x : obj</div>
<div class="tip" id="fs82">property Option.IsSome: bool</div>
<div class="tip" id="fs83">property Option.Value: bool</div>
<div class="tip" id="fs84">val mempoolAccessor : MempoolUTXOAccessor<br /><br />Full name: Mempool.mempoolAccessor</div>
<div class="tip" id="fs85">val nopWriter : NopUndoWriter<br /><br />Full name: Mempool.nopWriter</div>
<div class="tip" id="fs86">val validate : tx:&#39;a -&gt; &#39;b<br /><br />Full name: Mempool.validate</div>
<div class="tip" id="fs87">val tx : &#39;a</div>
<div class="tip" id="fs88">val revalidate : unit -&gt; &#39;a<br /><br />Full name: Mempool.revalidate</div>
<div class="tip" id="fs89">member MempoolUTXOAccessor.Clear : unit -&gt; &#39;g</div>
<div class="tip" id="fs90">val newListTx : List&lt;byte []&gt;</div>
<div class="tip" id="fs91">val newMempool : obj</div>
<div class="tip" id="fs92">(extension) IEnumerable.Where&lt;&#39;TSource&gt;(predicate: Func&lt;&#39;TSource,bool&gt;) : IEnumerable&lt;&#39;TSource&gt;<br />(extension) IEnumerable.Where&lt;&#39;TSource&gt;(predicate: Func&lt;&#39;TSource,int,bool&gt;) : IEnumerable&lt;&#39;TSource&gt;</div>
<div class="tip" id="fs93">val tx : obj</div>
<div class="tip" id="fs94">(extension) IEnumerable.Select&lt;&#39;TSource,&#39;TResult&gt;(selector: Func&lt;&#39;TSource,&#39;TResult&gt;) : IEnumerable&lt;&#39;TResult&gt;<br />(extension) IEnumerable.Select&lt;&#39;TSource,&#39;TResult&gt;(selector: Func&lt;&#39;TSource,int,&#39;TResult&gt;) : IEnumerable&lt;&#39;TResult&gt;</div>
<div class="tip" id="fs95">Multiple items<br />property Dictionary.Count: int<br /><br />--------------------<br />(extension) IEnumerable.Count&lt;&#39;TSource&gt;() : int<br />(extension) IEnumerable.Count&lt;&#39;TSource&gt;(predicate: Func&lt;&#39;TSource,bool&gt;) : int</div>
<div class="tip" id="fs96">val addTx : tx:obj -&gt; unit<br /><br />Full name: Mempool.addTx</div>
<div class="tip" id="fs97">val iter : action:(&#39;T -&gt; unit) -&gt; option:&#39;T option -&gt; unit<br /><br />Full name: Microsoft.FSharp.Core.Option.iter</div>
<div class="tip" id="fs98">List.Add(item: byte []) : unit</div>
<div class="tip" id="fs99">property Dictionary.Item: obj -&gt; obj</div>
<div class="tip" id="fs100">val processCommand : command:&#39;a -&gt; &#39;b<br /><br />Full name: Mempool.processCommand</div>
<div class="tip" id="fs101">val command : &#39;a</div>
<div class="tip" id="fs102">val filter : predicate:(&#39;T -&gt; bool) -&gt; list:&#39;T list -&gt; &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List.filter</div>
<div class="tip" id="fs103">val not : value:bool -&gt; bool<br /><br />Full name: Microsoft.FSharp.Core.Operators.not</div>
<div class="tip" id="fs104">Dictionary.ContainsKey(key: obj) : bool</div>
<div class="tip" id="fs105">val iter : action:(&#39;T -&gt; unit) -&gt; list:&#39;T list -&gt; unit<br /><br />Full name: Microsoft.FSharp.Collections.List.iter</div>
<div class="tip" id="fs106">Dictionary.Add(key: obj, value: obj) : unit</div>
<div class="tip" id="fs107">Dictionary.TryGetValue(key: obj, value: byref&lt;obj&gt;) : bool</div>
<div class="tip" id="fs108">property Dictionary.Keys: Dictionary`2.KeyCollection&lt;obj,obj&gt;</div>
<div class="tip" id="fs109">val map : mapping:(&#39;T -&gt; &#39;U) -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;U&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.map</div>
<div class="tip" id="fs110">val startMempool : unit -&gt; unit<br /><br />Full name: Mempool.startMempool</div>
          
        </div>
        <div class="span1"></div>
      </div>
    </div>
  </body>
</html>
