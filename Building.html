<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!-- 
      The Building
 parameters will be replaced with the 
      document title extracted from the <h1> element or
      file name, if there is no <h1> heading
    -->
    <title>Building
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="http://code.jquery.com/jquery-1.11.2.js"></script>
    <script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
    <script src="http://getbootstrap.com/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="content/style.css" />
    <script src="content/tips.js" type="text/javascript"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">Bitcoin F#</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="Protocol.html">Protocol</a></li>
            <li><a href="DB.html">Persistence</a></li>
            <li><a href="P2P.html">Peer to Peer</a></li>
            <li><a href="Peer.html">Peer</a></li>
            <li><a href="Tracker.html">Tracker</a></li>
            <li><a href="Script.html">Script Interpreter</a></li>
            <li><a href="Mempool.html">Mempool</a></li>
            <li><a href="Checks.html">Validation</a></li>
            <li><a href="Blockchain.html">Blockchain</a></li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Misc <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                    <li><a href="Main.html">Main</a></li>
                    <li><a href="Test.html">Tests</a></li>
                    <li><a href="Building.html">Building and Running</a></li>
                    <li><a href="BIP37.html">SPV</a></li>
                    <li><a href="Changelog.html">Changelog</a></li>
                </ul>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    <div class="container">
      <div class="row" style="margin-top:70px">
        <div class="span1"></div>
        <div class="span10" id="main">
          <h1>Building</h1>

<p>The project can be build from Visual Studio 2015 (Preview). It doesn't depend on any recent F# improvements and may be capable of being built with an earlier release of Visual Studio.
It includes most of the dependencies as NuGet packages which are downloaded by the IDE automatically. Two packagages are not present on NuGet though:</p>

<ul>
<li>Secp256k1.net - On <a href="https://github.com/joshlang/Secp256k1.NET">github</a></li>
<li>leveldb-sharp - also on <a href="https://github.com/hhanh00/leveldb-sharp">github</a>. I forked from the official release to add support for binary keys and values.</li>
</ul>

<p>Last but not least, it needs <a href="https://github.com/google/leveldb">leveldb</a>. I built my version from source a while ago and unfortunately I don't remember the exact step that I went through. The source code has instructions for Windows so it could be as simple as following them.</p>

<h1>Configuration</h1>

<p>The important settings are the directory location for the block and the database files. If you want to bootstrap and quickly process a large amount of blocks, for instance if you want to sync up with the latest bootstrap, I recommend putting the UTXO leveldb database on a RAM Disk. I use <a href="http://www.ltr-data.se/opencode.html/#ImDisk">IMDisk</a>. It's free. A 2 GB RAM disk works fine.</p>

<h1>Setting the DB</h1>

<p>Run the database script <code>db.sql</code> to create the tables. You can use direct SQL or an IDE like <a href="http://sqlitestudio.pl/">SQLiteStudio</a>.</p>

<h1>Importing Bootstrap dat</h1>

<p>Syncing is much faster if you start with a <a href="https://bitcointalk.org/index.php?topic=145386.0">bootstrap file</a>. Then change the <code>main</code> function to just load this file. Basically uncomment the lines that mentions <code>readBootstrap</code> and comment out the rest.
This function uses a faster <code>processBlock</code> function that bypasses all validation. It just parses the file and updates the UTXO db.</p>

<p>Once it completes, you can copy the resulting UTXO and bitcoin databases to the normal location and update the config file accordingly.</p>

<h1>Syncing up</h1>

<p>Revert the changes you made to <code>main</code> and run the application again. This time, it will locate peers and synchronize the rest of the blockchain from them. You are good to go.</p>

                    
        </div>
        <div class="span1"></div>
      </div>
    </div>
  </body>
</html>
